# Tasker Pro:始终用音量键控制媒体音量

> 原文：<https://www.xda-developers.com/control-media-volume-using-volume-keys/>

自动化应该是简化日常任务，让你有更多宝贵的时间做自己喜欢的事情。在 XDA，我们已经向你展示了如何使用 Tasker 来[保护你的设备](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-send-sms-address-speed-url-map-pin-t3330371)、[提高生产力](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-read-google-calendar-events-day-t3332783)或[让驾驶更安全](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-driving-mode-answer-calls-texts-t3332004)，这些都是我们系列的一部分，叫做“ **[Tasker Week](http://www.xda-developers.com/xda-tasker-week-in-review/)** 。”

但是乐趣并没有就此结束。如果你一直渴望**一些非常棒的 Tasker 任务**(并且厌倦了*无聊的*东西，比如告诉你如何重启手机或者摇动手机来唤醒显示屏)，那么我们新的 [Tasker Pro 系列](http://xda-developers.com/tag/tasker-pro)就是为你准备的。

我们将发布一系列**高度先进的** Tasker 简介，向你展示 Tasker 有多强大，如果你愿意跳出框框思考的话。虽然我们已经为您做了大部分艰苦的工作，您当然可以自由地导入我的个人资料并按原样使用它们，但如果您想自己定制这些任务，我强烈建议您尝试一下如何使用 Tasker。在我们的 [Tasker Tips & Tricks](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-automatically-check-md5-sum-t3365590/post66531924#post66531924) 论坛上或者在 Reddit 的/r/Tasker subredit 上，你可以与他人分享和合作如何实现你可能有的想法(正如[我已经做了很多次](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-automatically-check-md5-sum-t3365590/post66531924#post66531924))。

这是 Tasker pro 的第**周第 7** 。上周，我们向您展示了如何使用 Tasker 通过 Android 设备上的指纹传感器解锁 Windows PC。本周，我们将向你展示如何**重新映射你的音量摇杆，使它只控制媒体音量而不是铃声音量。**

* * *

**Tasker Pro #7:锁定你的音量摇杆**

默认情况下，Android 设备上的音量摇杆被设置为控制通知/铃声音量。只有当应用程序请求通过媒体音量通道播放音频时，才会使用媒体音量。不幸的是，有时这会导致奇怪的情况，当你试图在开始媒体播放之前设置音量，而 Android 只是在按下音量键时不允许你这样做。

Reddit 上的许多用户发现这是....*微怒*。对于这些用户中的许多人来说，他们使用音量摇杆的主要原因是控制媒体音量。当他们中的大多数在振动和一个单独的音量级别之间切换时，为什么要费事用一种精确的方法来控制铃声的音量呢？这是各种用户对 Android 的抱怨，但对大多数人来说，解决方案要么不容易获得，要么半生不熟，不能正常工作，要么根本不能在他们的手机上工作。

 <picture>![1](img/077190a58763c71985ed2a20bf704f33.png)</picture> 

Media Control Option from a Custom ROM

例如，定制 ROM 用户已经有能力用音量摇杆控制媒体音量*年*了。这个特性几乎在每一个定制的 ROM 中都可以找到。但是可以理解的是，许多用户不想使用定制的 ROM。root 用户可以安装 Xposed 框架并运行一个模块[专门实现这个特性](http://forum.xda-developers.com/xposed/modules/mod-volume-keys-change-music-volume-t3238473)，但是有很多手机的 root 访问是不可用的。另一个选择是使用非根应用程序来[重新映射你的按钮](https://play.google.com/store/apps/details?id=com.irishin.buttonsremapper)，但这并不支持每一个设备。一种支持每种设备的方法是使用[摇杆锁定应用](https://play.google.com/store/apps/details?id=com.tomwandroid.rockerlocker)，然而，这款应用使用了一种非常糟糕的方法来保持你的音量摇杆锁定媒体控制:它实际上*不断从你的扬声器*播放音频(严重地说)，这可能导致巨大的电池消耗。

使用 Tasker，我们可以创建一个**不需要 root，不在后台运行，**和**在所有设备**上工作的方法。它将防止铃声音量**的步进变化，除非有一个呼入/呼出电话正在进行**，但是**静音/振动模式仍将正常工作。**请注意，更改音量时会有微小的延迟，即使您会在音量条出现时看到铃声音量降低，Tasker 也会自动撤消您的更改，并将音量更改应用到媒体音量。这是因为没有 root 用户，你实际上无法*阻止* Android 在你按下音量键时改变铃声音量，所以相反，我们在音量改变发生时立即拦截它，并重定向它以应用于媒体音量。

* * *

**要求**

* * *

**指令**

*免责声明:多年来，各种 Tasker 论坛上已经出现了许多这种设置的变体。它每隔几个月就会重新浮出水面，但除了利基论坛之外，很少被用户看到。虽然我是从零开始创建这个设置的，但是这个方法使用了相当简单/基本的 Tasker 逻辑，所以它很可能类似于其他人过去所做的工作。*

你需要做的第一件事是创建一个新的配置文件，并将其命名为类似于 **Media Volume。**名字绝对不要紧，但是挑一些描述性的。我们将为此任务使用两个触发器，一个状态上下文和一个事件上下文。对于**事件上下文**，您需要转到**变量**并选择**变量集。**对于变量，让它监控 **%VOLR 的变化。**不要指定值，因为我们希望 Tasker 检测%VOLR(振铃音量)动态全局变量的任何变化。对于**状态上下文**，您将需要转到**电话**并选择**呼叫。**在下拉框中选择**任意**然后勾选底部的**反转**。这样一来，只有当您不在通话中时，该档案才会被激活。

* *注意:为了向此配置文件添加第二个触发器，您首先必须至少向任务添加一个操作(或者直接按照下面的说明来完成它)。然后，您可以长按第一个触发器，并选择“添加上下文”选项*

接下来，我们将创建任务本身。这是每当 Tasker 检测到振铃音量发生变化(事件)并且您不在通话中(状态)时将运行的一系列操作。

1.  变量->变量集。名字: **%VolRing** 到 **%VOLR。**勾选底部的 If，设置为 if **%VolRing！设置**。此操作将在您第一次运行此脚本时运行，以后不会再运行。每当%VolRing 没有值(尚未设置)时，它就会运行。
2.  变量->变量集。名称: **%volmedia** 到 **%VOLM。**这将在本地变量中保存当前媒体卷。
3.  任务->如果。如果 **%VOLR > %VolRing。**如果当前铃声的音量大于先前铃声的音量，这意味着您刚刚按下了音量调高按钮。
4.  变量->变量集。名称: **%VolRing** 到 **%VOLR-1** 。检查**做数学。**将响铃音量变量设置为之前的响铃音量(实质上是反向更改)。
5.  变量->变量集。名称: **%volmedia** 到 **%VOLM+1。**查 ****做数学题。**** 增加媒体音量变量(因为你按了音量增大键)。
6.  任务->否则如果。如果 **%VOLR < %VolRing。**此保护套在您按下音量键时会覆盖。
7.  变量->变量集。名称: **%VolRing** 到 **%VOLR+1** 。检查**做数学。**将响铃音量变量设置为之前的响铃音量(实质上是反向更改)。
8.  变量->变量集。名称: **%volmedia** 到 **%VOLM-1。**检查**做数学。**减小媒体音量变量(因为您按下了音量键)。
9.  任务->其他。
10.  任务->停止。我们在此放置了一个停止操作，以便在%VOLR 中的当前振铃器音量与%VolRing 中的相匹配时停止运行该任务。我们需要考虑这种情况，以防止在动作 13 期间发生无限循环，因为当您更改铃声音量时(即使是在 Tasker 中，而不是通过硬件按钮)，任务将再次运行。但是当它再次运行时，如果你没有这个动作，它会继续运行任务。或者，您可以在下面的操作 13 中设置检查，使其仅在%VolRing =/= %VOLR 时运行。
11.  任务->如果结束。
12.  音频->媒体音量。按双箭头图标允许您在此设置变量，而不是使用滑块。如果您看不到此按钮，那么您需要在 Tasker 的首选项中禁用初学者模式。对于**级别**，将其设置为 **%volmedia。**这将改变媒体音量。
13.  音频->铃声音量。再次按下双箭头图标，允许变量输入。对于**电平**，将其设置为 **%VolRing。**这将改变铃声音量。

* * *

瞧，瞧！如果你能理解这一点，那么恭喜你，你已经是一个任务大师了！迷茫于一个步骤，只想导入脚本，继续自己的生活？

**如果你想导入这个 Tasker 脚本，可以从 [Android 文件主机](https://www.androidfilehost.com/?fid=24591023225177387)下载。**为了导入任务，您需要首先在 Tasker 中禁用初学者模式，进入菜单- >偏好设置。在 UI 选项卡下，取消选中“初学者模式”然后回到主任务菜单，点击“个人资料”标签。然后长按“配置文件”选项卡，并按“导入”导航到下载 my .prf.xml 文件的位置，并选择要导入的文件。一旦你导入了它，你就可以随意使用它了。该任务无需任何用户输入即可运行，因此您无需以任何方式启动该配置文件/任务。

*下周我将为 Tasker Pro 展示如何在屏幕关闭时使用音量键来**控制你的音乐(甚至是 Spotify)。***

[**Check out all Tasker Pro scripts!**](http://www.xda-developers.com/tag/tasker-pro/)

* * *

你想看我和 Tasker 一起做什么？请在下面告诉我们，我们可能会在未来的文章中重点介绍您的想法！