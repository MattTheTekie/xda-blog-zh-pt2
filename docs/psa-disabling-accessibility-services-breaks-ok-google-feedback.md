# 禁用辅助功能服务会扼杀牛轧糖 OK 谷歌音频反馈

> 原文：<https://www.xda-developers.com/psa-disabling-accessibility-services-breaks-ok-google-feedback/>

# PSA:禁用辅助服务破坏了 Nougat 上的谷歌音频反馈

“OK Google”音频反馈在牛轧糖上坏了。目前，为了修复它，你需要启用任何辅助功能服务。

“好的谷歌，明天天气怎么样。”谷歌应用的语音识别功能对于回答许多基本问题非常有用，尽管该功能在公共场所往往没有得到充分利用。许多配有专用语音处理芯片的手机能够用一个简单的热门词来召唤谷歌搜索，如果你的手机没有静音，你会听到一声哔哔声，表明该热门词被识别。

但似乎有一个相当奇怪的错误影响了 Android Nougat 上的谷歌应用程序，这就是在 OK 谷歌语音识别期间明显缺乏听觉反馈。当用户禁用了设置- >辅助功能下的**所有辅助功能服务**时，问题出现了。为了恢复语音识别的听觉反馈，您只需启用**菜单中列出的任何辅助功能服务**。

无论你运行的是哪个版本的谷歌应用程序，这个错误似乎都会发生(我们测试了旧版本和昨天发布的测试版)。我们不确定为什么会出现这个 bug，或者*确切地说*为什么启用可访问性服务似乎可以修复这个搜索问题，因为对启用和未启用可访问性服务的 logcat 输出的比较没有显示出任何可以解释这个 bug 的明显变化。

但是启用可访问性服务解决问题的事实似乎表明，谷歌应用程序使用可访问性事件，可能是 TYPE_WINDOW_STATE_CHANGED，来检测 DspHotwordVoiceSearchActivity 何时被调用，以在当前活动的顶部绘制 [PopupWindow](https://developer.android.com/reference/android/widget/PopupWindow.html) 。Nougat 上的可访问性工作方式可能有一些模糊的变化，导致谷歌应用程序明确要求发送可访问性事件，而在以前的 Android 版本中这是不必要的。

当然，由于谷歌应用程序是闭源的，实际上没有办法验证为什么会出现这个错误。我们将不得不通知谷歌这个问题，并希望在下一个版本的谷歌应用程序中看到一个快速补丁。

* * *

*谢谢/u/[alpha nu 22](https://www.reddit.com/user/alphanu22)*