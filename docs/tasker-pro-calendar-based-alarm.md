# Tasker Pro:基于日历的闹钟，永远不会错过工作，让你免于尴尬！

> 原文：<https://www.xda-developers.com/tasker-pro-calendar-based-alarm/>

自动化应该是简化日常任务，让你有更多宝贵的时间做自己喜欢的事情。在 XDA，我们已经向您展示了如何使用 Tasker 来[保护您的设备](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-send-sms-address-speed-url-map-pin-t3330371)、[提高生产力](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-read-google-calendar-events-day-t3332783)或[让驾驶更安全](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-driving-mode-answer-calls-texts-t3332004)，这些都是我们名为“ **[Tasker Week](http://www.xda-developers.com/xda-tasker-week-in-review/)** ”系列的一部分

但是乐趣并没有就此结束。如果你一直渴望**一些非常棒的 Tasker 任务**(并且厌倦了*无聊的*东西，比如告诉你如何重启手机或者摇动手机来唤醒显示屏)，那么我们新的 [Tasker Pro 系列](http://xda-developers.com/tag/tasker-pro)就是为你准备的。

我们将发布一系列**高度先进的** Tasker 简介，向你展示 Tasker 有多强大，如果你愿意跳出框框思考的话。虽然我们已经为您做了大部分艰苦的工作，您当然可以自由地导入我的个人资料并按原样使用它们，但如果您想自己定制这些任务，我强烈建议您尝试一下如何使用 Tasker。在我们的 [Tasker Tips & Tricks](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-automatically-check-md5-sum-t3365590/post66531924#post66531924) 论坛上或者在 Reddit 的/r/Tasker subredit 上，你可以与他人分享和合作如何实现你可能有的想法(正如[我已经做了很多次](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-automatically-check-md5-sum-t3365590/post66531924#post66531924))。

这是 Tasker pro 的第 5 周。[上周](http://www.xda-developers.com/tasker-pro-copy-two-factor-authentication-codes/)，我们向您展示了如何使用 Tasker 复制通过短信发送的双因素验证码，而无需离开您的应用程序。本周，我们将向你展示如何**设置一个基于日历的闹钟，并禁用任何设定在工作时间响起的闹钟！**

* * *

**Tasker Pro #5:基于日历的闹钟**

你早上 7 点醒来。你淋浴，吃早餐，喝一杯咖啡，跳上你的车，然后你就去上班了。如果这是你每天早上的例行公事，你可能不会记得设置闹钟。对于我们这些工作时间不规律的人来说，检查我们的工作时间表以确定我们什么时候需要起床并准备准时到达是非常重要的。记住设置闹钟对成为一个守时的员工至关重要，但我们都是人，所以我们肯定会犯错。这就是为什么我使用 Tasker 和 AlarmPad 应用程序设计了这个基于日历的闹钟，以确保如果你第二天有工作安排，你一定会在那个时间设置闹钟。

* * *

**要求**

* * *

**指令**

你需要做一些准备来让这个任务真正为你工作。首先，你实际上需要确保在谷歌日历中记录你的工作日程。例如，我的工作日程有一个导出到谷歌日历的选项，我就是这样设置的。设置好日历后，我们现在将讨论两个独立的 Tasker 脚本，这两个脚本将确保您准时上班，并确保您永远不会出现忘记在工作时关闭闹钟的尴尬情况。如果您认为合适，可以实现其中一个或两个设置。

第一，如何制作基于日历的闹钟。下面是设置此任务所需操作的屏幕截图。这个任务应该每晚运行一次，最好是在睡觉前。你可以将它设置为基于时间环境运行(例如每晚午夜)或者基于其他一些触发，比如一个 [NFC 标签](https://play.google.com/store/apps/details?id=com.jwsoft.nfcactionlauncher&hl=en)(这是我的首选方法)。

1.  任务->执行任务。名称:**获取事件。**如果你注意到了，这一步中的第一个动作实际上调用了另一个任务。这是我从 Tasker 上一个 Redditor 的作品中编辑的一个任务，并在三月份的 Tasker 周向 XDA 展示过。在我们的[任务提示&技巧论坛](http://forum.xda-developers.com/u/tasker-tips-tricks/guide-read-google-calendar-events-day-t3332783)中可以找到关于这个任务是什么和它做什么的完整指南。你可以在下面的链接或者下面的帖子中下载这个任务，因为我为了这个指南重新上传了它。**这里有一点警告，如果你用日历做一大堆你不想设置闹钟的事情，那么一定要编辑“获取事件”脚本，只从你特定的工作日历中提取。**
2.  任务->如果。如果设置了 **%Calstart1** **。**这将使脚本仅在您的 Google 日历中确实有明天的活动时运行。
3.  插件->自动报警。这将提取大量关于下一个发生的警报的细节。从技术上讲，用几个 Java 函数就可以做到这一点，但是它包含了更多不必要的步骤，而插件只是让它变得简单多了。
4.  变量->变量集。名称: **%nextalarm** 到 **%TIMES + %seconds。**勾选“做数学”这将把下一个闹钟当前预定的时间(以从该时间开始的秒数表示)作为一个名为“next alarm”的变量提取出来
5.  变量->变量集。名称:**% diff**to(**% cal start 1-% next alarm)/3600**。勾选“做数学”此公式将确定日历上的下一个事件与下一个闹钟设定的时间之间的时间差，以小时为单位。
6.  任务->如果。如果 **%diff** **< 2** 。如果下一个闹钟在 2 小时之后(日历事件之前或之后，都没关系)，那么我们需要安排一个更合适的闹钟。
7.  变量->变量集。名称:**%报警**到 **%Calstart1*1000** 。我们在这里所做的就是准备好我们需要设置闹钟的时间，这样我们就能以一种它能识别的格式把它输入到自动工具中。
8.  插件->自动工具->自动工具时间。点击**添加时间。**转到**日期**，点击**数据毫秒**，进入**%报警**。返回并为**添加单位**将其设置为**小时。**对于**增加值**将其设置为 **-2** (这是 Tasker 将设置闹钟的日历事件之前的时间，如果您认为工作前 2 小时太长，您可以更改数字，但请确保它是一个*负数*)。对于**输出格式**:设置为 **HH:mm** 。
9.  变量->变量拆分。名称: **%atcalculateddate** 。分割线 **:** (对，就是冒号)。这将使下一个警报变成两个独立的变量，一个是小时，一个是分钟。
10.  插件- > AlarmPad 运行操作。**禁用:下一个发生的警报。**
11.  插件- > AlarmPad 设置警报。对于小时，将其设为**% at 计算日期 1** ，对于分钟，将其设为**% at 计算日期 2。**勾选“运行后自动删除”
12.  任务->如果结束。
13.  任务->如果结束。

这就是基于日历的报警部分！现在，如果你已经使用 AlarmPad 有一段时间了，你可能会认为这整个任务是多余的，因为 AlarmPad 本身有一个功能来监控日历事件，**但它只会问你是否要设置它们**(意味着你必须手动设置)和**，它不会区分你的各种日历**。假设你已经正确设置了你的工作日历，这将自动完成所有的事情，所以你不用担心任何事情。

接下来，是一个相当常见的 Tasker 脚本的变体，它涉及在工作时让手机静音...而且还有一个额外的好处，那就是在工作时，如果闹钟恰好响起，就将其禁用！以下是外观概述:

如您所见，您将创建一个状态配置文件，它在检测到日历事件时是活动的。创建一个新的档案，并将其命名为**无声日历**。将标题、位置和描述留空，但对于日历，请选择您的工作日历。创建一个没有名称的输入任务。以下是按顺序排列的步骤，我们将在下面详细介绍。

1.  音频->静音模式。模式:**振动。**不言自明。上班时把你的手机设置成振动模式。
2.  App ->测试 App。类型:**日历开始(秒)。**数据:**%次。**将结果存储在: **%currstart。**获取当前日历事件的开始时间。我们将用它来与设置的下一个警报进行比较。
3.  插件->自动报警。获取关于下一个闹钟的信息。
4.  变量->变量集。名称: **%nextalarm** 到 **%TIMES+%seconds。**获取下一个闹铃设置的时间，从 epoch 开始以秒为单位定义。
5.  测试应用程序。类型:**日历标题**。数据: **%nextalarm。**储存结果于: **%title。**获取与下一个闹钟设定的时间相匹配的事件标题(如果有的话)。
6.  测试应用程序。类型:**日历日历。**数据: **%nextalarm。**将结果存储在**%日历中。**获取与上述事件对应的日历。
7.  测试应用程序。类型:**日历开始(秒)。**数据: **%nextalarm。**将结果存储在: **%nextstart。**获取对应于下一个闹钟的日历事件的开始时间(如果有)。
8.  插件- > AlarmPad 运行操作。**禁用:下一个发生的警报。**如果选中**，如果设置了%title1 则设置为**&% calendar 1 ~ YOURWORKCALENDARNAME&% curr start 1 = % next start 1。**这是在进行三项检查，以确保下一个警报被正确禁用。如果下一个闹铃设置在日历事件期间，并且该日历事件来自您的工作日历，并且该日历事件与您当前的工作重叠，则仅在此时禁用下一个闹铃。**

您可以单独使用这个脚本，也可以与上面的脚本配合使用。我两者都用，它对我不规律的工作日程帮助很大。试试看！

* * *

瞧，瞧！如果你能理解这一点，那么恭喜你，你已经是一个任务大师了！迷茫于一个步骤，只想导入脚本，继续自己的生活？我不能责怪你，这一次我花了很多时间才把它写好。

**如果想导入这个 Tasker 脚本，可以从 Android 文件主机下载。您将需要下载这三个文件并全部导入:[[1](https://www.androidfilehost.com/?fid=24572369242686933)][[2](https://www.androidfilehost.com/?fid=24591023225176660)][[3](https://www.androidfilehost.com/?fid=24572369242686932)]**为了导入任务，您需要首先在 Tasker 中禁用初学者模式，方法是进入菜单- >首选项。在 UI 选项卡下，取消选中“初学者模式”然后回到主任务菜单，点击“任务”标签。然后长按“任务”标签并按“导入”导航到下载 my .prf.xml 文件的位置，并选择要导入的文件。一旦你导入了它，你就可以随意使用它了。

下周，我将向你展示如何使用你的指纹解锁你的 Windows 电脑！

[**Check out all Tasker Pro scripts!**](http://www.xda-developers.com/tag/tasker-pro/)

* * *

你想看我和 Tasker 一起做什么？请在下面告诉我们，我们可能会在未来的文章中重点介绍您的想法！