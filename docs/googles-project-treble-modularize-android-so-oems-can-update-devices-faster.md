# 谷歌的 Treble 项目将 Android 模块化，因此原始设备制造商可以更快地更新设备

> 原文：<https://www.xda-developers.com/googles-project-treble-modularize-android-so-oems-can-update-devices-faster/>

对 Android 的主要批评之一是软件更新的碎片化。时至今日，许多设备要比谷歌设备晚等几个月才能收到下一个主要版本的安卓系统。例如，Android 牛轧糖于去年 8 月正式发布，但原始设备制造商连续数月才推出 Android 7。x 给他们的用户。截至本月，只有大约 7%的安卓设备在运行安卓牛轧糖。为了应对发布新版本 Android 和原始设备制造商更新其设备之间的漫长时间，谷歌宣布了迄今为止对 Android 底层系统架构的最大改变- **Project Treble** 。

* * *

## 项目三重模块化机器人，以改善软件更新

首先，为了理解 Project Treble 到底是做什么的，理解 Android 每次迭代所涉及的一般更新过程是很重要的。该过程可以概括为大约 5 个步骤，如下所示:

1.  AOSP 发布——谷歌发布新安卓版本的源代码
2.  启动/硬件兼容性-芯片制造商(高通、三星、海思、联发科等。)修改源代码，以便 Android 可以在他们的芯片上启动，并且芯片上的所有硬件都按预期运行
3.  OEM 修改-修改后的源代码将提供给设备制造商(OEMS，如三星、LG、华为/Honor、一加、HTC 等)。)以便他们可以修改源代码以包含他们自己的软件。
4.  QA/测试——原始设备制造商在内部经历软件的测试阶段，并与他们的运营商合作伙伴一起测试他们的软件。
5.  全面发布——通过 OTA 更新，最终用户将在数周内获得更新

谷歌通常很快发布每个新 Android 版本的源代码，甚至[与他们的一些合作伙伴](https://www.xda-developers.com/huawei-has-already-started-internal-testing-of-android-o-on-the-mate-9/)私下分享他们的代码，以便他们可以立即开始更新他们的代码库。谷歌无法控制第 4 步和第 5 步需要多长时间，但他们已经找到了减少第 2 步时间的方法。Android 背后的团队正在底层“重新架构”Android，以便让芯片制造商更容易更新和测试他们的代码。

为此，谷歌推出了他们所谓的**供应商界面**。该供应商界面在功能上类似于兼容性定义文档(CDD)和兼容性测试套件(CTS)，这两者都确保原始设备制造商确切知道他们需要实施什么，以便他们的设备满足在最新版本的 Android 上运行 Google Play 服务的必要要求。谷歌正在模块化 Android，以便 Android OS 框架与由芯片制造商编写的特定于设备的底层软件保持分离。供应商接口由供应商测试套件(VTS)进行验证，因此芯片制造商确切知道他们的芯片需要满足哪些要求才能支持启动 Android。

这一变化的主要好处是，设备制造商(OEM)现在可以选择通过更新 Android OS 框架**来更新他们的手机，而不必等待芯片制造商**更新他们的供应商实现代码。虽然这一举措如果早一点进行，不太可能影响到 MSM8974 上的设备是否获得 Android 7.0 牛轧糖更新(因为该问题源于 CDD 要求 Vulkan Graphics API 或 GLES 3.1，这是 OEM 厂商必须等待芯片制造商在其源代码中提供 GPU 支持的事情)，但这一举措仍然应该大大减少主要 Android 更新到达消费者手中的时间。

这一举措将在多大程度上减少更新延迟时间，我们无法准确预测。微软很久以前就通过 Windows 驱动程序的硬件抽象解决了这个问题，所以我们希望这个主要的底层变化能让 Android 在某种程度上更接近 Windows。新项目 Treble architecture 已经在 Android O 开发者预览版的 Google Pixel 和 Pixel XL 上运行，该项目的完整文档将在今年夏天晚些时候随着 Android O 的推出而提供。

不幸的是，这意味着对于绝大多数现有设备来说，你不会看到 Android 团队在 Project Treble 中的劳动成果。我们还需要几年时间才能真正看到这一举措是否对缩短你等待下一代 Android 的时间产生了重大影响。然而，这对于 Android 粉丝来说是一个令人兴奋的发展，因为它解决了操作系统的一个核心问题，我们许多人来到 XDA 开发者论坛就是为了解决这个问题:软件更新。我们希望它不辜负炒作。

* * *

[**来源:安卓开发者博客**](https://android-developers.googleblog.com/2017/05/here-comes-treble-modular-base-for.html)