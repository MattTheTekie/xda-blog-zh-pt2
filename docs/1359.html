<html>
<head>
<title>FCM exploit behind strange notifications from Microsoft Teams, Hangouts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>微软团队奇怪通知背后的FCM漏洞</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/firebase-cloud-messaging-exploit-likely-strange-push-notifications-microsoft-teams/#0001-01-01">https://www.xda-developers.com/firebase-cloud-messaging-exploit-likely-strange-push-notifications-microsoft-teams/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>似乎我们不能一天不在某个软件或服务中出现另一个重大的安全缺陷。本周似乎是Firebase云消息应对一个容易被利用的漏洞的时候了。</p>

  
<p><a href="https://www.xda-developers.com/tag/firebase/"> Firebase Cloud Messaging </a>是谷歌的一个框架，旨在帮助通过几乎任何平台上的应用程序更容易地发送通知。只需对应用和服务器进行一些简单的配置，你就可以在几分钟之内向用户发送一般的或有针对性的推送通知。大多数提供推送通知的Android应用程序可能会使用Firebase云消息(或传统的Google云消息)来实现这一点。这包括从单个业余爱好者开发的应用程序到微软，当然还有谷歌这样的大公司的应用程序。</p>

 
<h2 id="the-exploit">利用</h2>
<p>这就是这个漏洞的来源。如果你使用类似<a href="https://www.reddit.com/r/androiddev/comments/ihh3sd/someone_is_testing_push_notifications_for_the/">微软团队</a>或<a href="https://www.reddit.com/r/androidapps/comments/iftf1o/fcm_messages_test_notification/">谷歌社交</a>的应用，你可能最近会注意到随机通知的到来，就像下面的截图。这些是利用Firebase云消息传递的不正确配置的人。</p>
<div class="body-img portrait"><div class="responsive-img image-expandable img-article-item-portrait" data-img-url="https://static1.xdaimages.com/wordpresshttps://external-preview.redd.it/U1SaPGysROO8VSMZUba6AjSj5rY2UpP5Ive_VK7dX7Y.jpg?width=640&amp;amp;crop=smart&amp;amp;auto=webp&amp;amp;s=0b39a50b112e978cbc174d2c7839700f8cb1f459" data-modal-id="single-image-modal" data-modal-container-id="single-image-modal-container" data-img-caption="&quot;Screenshot from \/u\/ToTooThenThan on Reddit.&quot;">
 
<figure> <picture>  <source media="(min-width: 1024px)" sizes="750px" data-srcset="https://external-preview.redd.it/U1SaPGysROO8VSMZUba6AjSj5rY2UpP5Ive_VK7dX7Y.jpg?width=640&amp;amp;crop=smart&amp;amp;auto=webp&amp;amp;s=0b39a50b112e978cbc174d2c7839700f8cb1f459?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 768px)" sizes="750px" data-srcset="https://external-preview.redd.it/U1SaPGysROO8VSMZUba6AjSj5rY2UpP5Ive_VK7dX7Y.jpg?width=640&amp;amp;crop=smart&amp;amp;auto=webp&amp;amp;s=0b39a50b112e978cbc174d2c7839700f8cb1f459?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 481px)" sizes="600px" data-srcset="https://external-preview.redd.it/U1SaPGysROO8VSMZUba6AjSj5rY2UpP5Ive_VK7dX7Y.jpg?width=640&amp;amp;crop=smart&amp;amp;auto=webp&amp;amp;s=0b39a50b112e978cbc174d2c7839700f8cb1f459?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 0px)" sizes="360px" data-srcset="https://external-preview.redd.it/U1SaPGysROO8VSMZUba6AjSj5rY2UpP5Ive_VK7dX7Y.jpg?width=640&amp;amp;crop=smart&amp;amp;auto=webp&amp;amp;s=0b39a50b112e978cbc174d2c7839700f8cb1f459?q=50&amp;fit=crop&amp;dpr=1.5"/> <img class="lazyload" alt="r/androiddev - Someone is testing push notifications for the Microsoft teams app in production." data-img-url="https://external-preview.redd.it/U1SaPGysROO8VSMZUba6AjSj5rY2UpP5Ive_VK7dX7Y.jpg?width=640&amp;amp;crop=smart&amp;amp;auto=webp&amp;amp;s=0b39a50b112e978cbc174d2c7839700f8cb1f459" src="../Images/30823dccccbef1564cf816846b65acde.png" data-original-src="https://external-preview.redd.it/U1SaPGysROO8VSMZUba6AjSj5rY2UpP5Ive_VK7dX7Y.jpg?width=640&amp;amp;crop=smart&amp;amp;auto=webp&amp;amp;s=0b39a50b112e978cbc174d2c7839700f8cb1f459"/> </picture> <figcaption class="body-img-caption">Screenshot from /u/ToTooThenThan on Reddit.</figcaption> </figure> </div>


 </div>


<p>我不会在这里说太多细节，但这个问题并不是谷歌的错。为了安全地发送推送通知，Google要求实际发送它们的服务器也发送一个密钥来验证它们是真实的。这个密钥应该只存在于Firebase控制台和服务器上。</p>

<p>但是受影响的应用程序，不管什么原因，也有内置的密钥。它没有被使用，但是它就在那里，以明文的形式，供任何人查看和使用。有点讽刺的是，Google Hangouts和Google Play Music似乎容易受到这种利用的攻击，微软团队也是如此。所以这是谷歌的错，但也不尽然。</p>

<p>它可以被用于非常邪恶的目的。虽然看起来此漏洞的大多数“实现”仅用于向人们发送奇怪的文本，但攻击者有可能执行网络钓鱼骗局。通知的文本可能类似于“您的会话已过期。请点击此处重新登录”，点击后会显示一个网址。这个URL可能最终成为一个看起来像微软登录页面的网站。但你不是登录微软，而是给别人你的登录。</p>
<p class="ad-odd"> </p>


<h2 id="what-should-users-do">用户应该怎么做？</h2>
<p>没什么。作为用户，您无法阻止这些通知。你可以屏蔽它们进入的频道(或者完全屏蔽来自应用程序的通知)，但你不能过滤掉非法通知，因为据Firebase所知，它们<em>是</em>合法的。</p>

<p>但是，你能做的就是小心。如果你收到一个通知，似乎是要求你的登录信息，或任何其他个人信息，不要点击它。而是直接打开app。如果通知是真实的，应用程序会显示出来。否则，很可能是网络钓鱼企图。如果您点击了通知，请立即关闭任何打开的网站。</p>

<p>最后，如果您已经通过通知将密码放在某个地方，请立即更改它，取消所有登录设备的授权(如果适用)，如果您还没有启用双因素身份验证，请启用双因素身份验证。</p>
<p class="ad-even"> </p>


<h2 id="what-should-developers-do">开发者应该怎么做？</h2>
<p>如果你已经在应用中实现了Firebase Cloud Messaging，检查配置文件以确保你的服务器密钥不在其中。如果是，立即使它们无效，创建新的，并重新配置您的服务器。</p>

<p>同样，这不是一篇非常技术性的文章，所以你可以访问下面的链接来获得更多关于缓解的信息。</p>
<p class="ad-odd"> </p>


<h2 id="google-and-microsoft-responses">谷歌和微软的回应</h2>
<p>谷歌的一位发言人告诉《每日电讯报》,这个问题“与开发者在他们的代码中为不应该包含的服务包含API密钥有关，这可能会被利用”，而不是Firebase云消息服务本身受到损害。这位发言人补充说:“如果谷歌能够识别出使用了服务器密钥，我们会试图提醒开发者，让他们可以修复他们的应用程序。”</p>

<p>微软在推特上发布了以下声明:</p>

 


<p class="ad-even"> </p>


<h2 id="further-reading">进一步阅读</h2>
<p>这里有两篇文章更详细地介绍了这种利用是什么，它是如何工作的，以及如何确保自己不容易受到攻击。如果你是一名应用程序开发人员，或者你只是想了解这是如何工作的，那么就来看看吧。</p>


</div>


</div>    
</body>
</html>