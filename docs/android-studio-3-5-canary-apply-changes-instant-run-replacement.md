# Android Studio 3.5 Canary 增加了“应用更改”，这是一个即时运行的替代品

> 原文：<https://www.xda-developers.com/android-studio-3-5-canary-apply-changes-instant-run-replacement/>

# Android Studio 3.5 Canary 增加了“应用更改”，这是一个即时运行的替代品

Android Studio 3.5 引入了 Apply Changes，这是流行的应用开发工具即时运行功能的继任者。

Android Studio 3.5(目前在 Canary 和 Dev 频道)现在提供了一种新的方式来将代码更改推送到您的应用程序，并在运行中查看其效果，而无需重启应用程序。它被简单地称为“应用更改”，是之前版本的 Android Studio 的“即时运行”功能的继承者。

谷歌的 [Android 开发者博客](https://developer.android.com/studio/preview/features/#3.5)对应用更改做了如下描述:

> #### 应用更改可让您将代码和资源更改推送到正在运行的应用程序，而无需重新启动应用程序，在某些情况下，甚至无需重新启动当前活动。应用更改用一种全新构建优化方法取代了即时运行。Apply Changes 通过利用 Android 8.0 (API level 26)或更高版本支持的运行时工具，动态地重新定义类，而不是在构建时重写 APK 的字节码。
> 
> #### 此外，Android Studio 现在会在检测到更改与应用更改不兼容时，提示您决定是否重新启动您的应用程序或活动。与即时运行的行为相比，这种额外的控制应该为您提供更加一致和可预测的体验。

这篇博文接着列出了新功能的一些限制。例如，测试你的应用的设备必须至少运行[Android 8.0 Oreo(API 26 级)](https://www.xda-developers.com/google-play-app-updates-must-target-android-8-0/)并且某些代码更改仍然需要重启你的应用。与“即时运行”一样，“应用更改”将强制您的应用重新启动，如果您:

*   添加或删除类、方法或字段
*   更改清单
*   更改方法签名
*   更改方法或类的修饰符
*   重命名类
*   更改类继承
*   添加或删除资源

在“已知问题”下，博客文章指出，由于谷歌最初在这项新功能中优先考虑稳定性而不是性能，“应用更改”有时会比其前身功能“即时运行”运行得更慢。此外，不支持 x86_x64 模拟器映像，出于调试目的，仅支持 Android Pie (API 级别 28)。您可以在下面的源代码链接中看到限制和已知问题的完整列表。

关于“应用更改”和“即时运行”之间的区别的更详细的描述，Android Studio 团队的一名谷歌员工在 Reddit 上说:

> #### 它做的事情非常非常不同。即时运行对构建有非常特殊的影响，它在编译时检测每个类，为它们在运行时被新版本的类替换做准备。它还将你的 APK 分成几个 apk，以更递增的方式重新上传你的应用。
> 
> #### “应用更改”一点也不像它。无论您是否使用应用更改，您的 APK 都是一样的。相反，它依赖于 ART VM 的新运行时检测功能，在应用程序运行时动态重新加载和替换类。这就是为什么它需要更新版本的 Android。

随着谷歌对其性能和稳定性的改进，“应用更改”有望最终取代测试版和稳定版中的“即时运行”。

* * *

[**来源:安卓开发者博客**](https://developer.android.com/studio/preview/features/#3.5)