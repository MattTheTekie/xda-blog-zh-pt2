# 9 岁的 Linux 内核错误被称为“肮脏的母牛”,可以扎根于每个版本的安卓系统

> 原文：<https://www.xda-developers.com/9-year-old-linux-kernel-bug-dubbed-dirty-cow-can-root-every-version-of-android/>

尽管事实上成千上万的用户积极地仔细研究 Linux 内核源代码，积极地寻找安全缺陷，但是严重的错误被忽视也不是没有听说过。毕竟，尽管通过让更多的人来审核代码，遗漏一些极其严重的事情的可能性降低了，但我们仍然是人，注定会犯错误。这次的错误似乎相当严重，很不幸。上周最近发现了一个**权限提升漏洞**，尽管它[已经在主线 Linux 内核中被修补了](https://lkml.org/lkml/2016/10/19/860)，但该漏洞可能**在市场上几乎每部 Android 手机上被利用**，直到每台设备都收到合适的内核补丁。

* * *

**输入脏牛**

权限提升漏洞俗称脏牛漏洞，但它在 Linux 内核的漏洞跟踪器系统中被归类为 CVE-2016-5195。尽管上周才被发现，但这个漏洞已经在 Linux 内核代码中存在了 9 年。此外，可利用的代码存在于 Linux 内核的一个部分中，几乎所有基于 Linux 内核的现代操作系统都搭载了这个部分——顺便说一下，包括 Android。更糟糕的是，发现该漏洞的研究人员已经发现了该漏洞在现实世界中被恶意利用的证据**，因此他们建议所有发布基于 Linux 内核的软件的供应商立即修补该漏洞。**

 **Dirty Cow 本身不是一个漏洞，而是一个漏洞。但是，此漏洞允许提升用户空间进程的权限，授予其超级用户权限。通过利用此漏洞，恶意用户空间进程可以在受害者的设备上获得不受限制的根用户访问权限。用更专业的术语来说，这个错误涉及到 Linux 内存复制技术的一种竞争情况，这种技术被称为写时复制。通过利用这种竞争条件，用户可以获得对通常设置为只读的内存映射的写访问权限。从这里的、这里的和这里的可以收集到更多关于这个漏洞的细节。

据说这个安全漏洞很容易被利用，事实上，在这个漏洞被公开的几天内,[一个概念验证特权提升利用](https://github.com/timwr/CVE-2016-5195)已经被展示给**所有的 Android 设备**。任何运行 Linux 内核版本高于 2.6.22(阅读: ***现有的每一个 Android 发行版*** )的 Android 设备都可能成为这种概念验证漏洞的受害者。虽然概念验证利用实际上不会获得根用户访问权限，但利用此漏洞攻击系统会使这变得非常简单。在发给 ArsTechnica 的一封电子邮件中，Phil Oester，一个正在他的网站上对已知的 Dirty Cow 的真实攻击进行分类的 Linux 内核开发人员，对这个 bug 有这样的描述:

> #### 在我的测试中，任何用户都可以在不到 5 秒的时间内成为 root 用户，非常可靠。可怕的东西。
> 
> #### 对系统(如外壳帐户)的本地访问最容易利用此漏洞。更重要的是，任何允许攻击者将文件上传到受影响的系统并执行该文件的 web 服务器/应用程序漏洞也会起作用。
> 
> #### 上传到我的系统的特定漏洞是用 GCC 4.8.5 发布的 20150623 编译的，尽管这并不意味着该漏洞在该日期之前不可用，因为它已经存在很长时间了。至于谁是目标，任何在面向 web 的服务器上运行 Linux 的人都是易受攻击的。
> 
> #### 在过去的几年里，我一直在捕捉所有进入我的网络服务器的流量，以便进行取证分析。这种做法在许多场合下被证明是无价的，我会向所有管理员推荐它。在这种情况下，我能够从这些捕获中提取上传的二进制文件来分析其行为，并升级到适当的 Linux 内核维护人员。

在开发人员进一步证明利用 Android 上的 Dirty Cow 的有效性后，一名开发人员能够通过利用该漏洞在几秒钟内成功地为他的 HTC 设备找到根。在 XDA，我们普遍欢迎用户获得 root 访问权限的能力，但我们不赞成存在这样的 root 漏洞，尤其是这种漏洞如此普遍，对最终用户具有难以置信的潜在危险。为了让你了解脏牛在野外有多危险，YouTuber Computerphile 制作了一个快速视频，展示了黑客可以用来悄悄获得你的设备的 root 访问权限的潜在恶意攻击媒介。

* * *

[**来源:ars technica【1】**](http://arstechnica.com/security/2016/10/most-serious-linux-privilege-escalation-bug-ever-is-under-active-exploit/)

[**来源:ars technica【2】**](http://arstechnica.com/security/2016/10/android-phones-rooted-by-most-serious-linux-escalation-bug-ever/)**