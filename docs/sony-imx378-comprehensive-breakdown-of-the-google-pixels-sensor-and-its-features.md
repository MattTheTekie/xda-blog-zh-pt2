# 索尼 IMX378:谷歌 Pixel 的传感器及其功能的全面分解

> 原文：<https://www.xda-developers.com/sony-imx378-comprehensive-breakdown-of-the-google-pixels-sensor-and-its-features/>

## IMX378 概述

我们联系了索尼，试图了解更多关于即将推出的谷歌 [Pixel](http://forum.xda-developers.com/pixel) 和 [Pixel XL](http://forum.xda-developers.com/pixel-xl) 手机以及 [小米 Mi 5S](http://forum.xda-developers.com/mi-5s) 使用的 IMX378 传感器。不幸的是，索尼目前还不能分发 Exmor RS IMX378 传感器的数据手册，但他们非常有帮助，能够为我们提供一些以前未发布的关于 IMX378 的信息。

首先，这个名字本身就是错误的。尽管有传言称它将成为背面照明(BSI) CMOS 传感器的一部分，就像之前用于 5X[Nexus 6P](http://forum.xda-developers.com/nexus-6p)的 IMX377 一样，但我们在索尼的联系人告诉我们，IMX378 将被视为索尼【的一部分

从 IMX377 到 IMX378，许多东西都保持不变，包括像素尺寸(1.55 微米)和传感器尺寸(7.81 毫米)，但增加了一些关键功能。也就是说，它现在是一个堆叠的 BSI CMOS 设计，它有 PDAF，它增加了索尼的 SME-HDR 技术，它对高帧率(慢动作)视频有更好的支持。

## 堆叠 BSI CMOS

从 2010 年的 [HTC Evo 4G](http://forum.xda-developers.com/htc-evo-4g) 开始，背面照明本身就是一个非常有用的功能，在过去几年里几乎已经成为旗舰智能手机的标准。它允许相机通过移动一些传统上位于前置照明传感器上的光电二极管前面的结构来捕捉更多的光(以更多噪声为代价)。

令人惊讶的是，与大多数相机技术不同，背面照明最初是在 DSLRs 之前出现在手机中的，这在很大程度上是因为难以制造更大的 BSI 传感器。第一个 BSI APS-C 传感器是 2014 年在他们的 NX1 相机中发现的三星 S5KVB2，第一个全画幅传感器是去年在索尼α7R II 中发现的索尼 Exmor R IMX251。

堆叠 BSI CMOS 技术将更多电路从前层移到光电二极管后面的支撑基板上，从而更进一步。这不仅允许索尼大幅减小图像传感器的尺寸(允许在相同的占地面积中使用更大的传感器)，还允许索尼单独印刷像素和电路(即使在不同的制造工艺上)，降低缺陷风险，提高产量，并允许光电二极管和支持电路之间更加专业化。

## PDAF

[![Phase Detection Autofocus PDAF Example by cmglee](img/d2fe3352cf34aaa81865b2481bc41cee.png)](http://static1.xdaimages.com/wordpress/wp-content/uploads/2016/10/Phase-Detection-Autofocus-PDAF-Example-by-cmglee.png)imx 378 增加了相位检测自动对焦，而去年的 Nexus 手机和 IMX377 都不支持 。它允许相机有效地利用传感器上不同点之间的光强差异来识别相机试图聚焦的对象是在焦点前面还是后面，并相应地调整传感器。与我们过去在许多相机上看到的传统的基于对比度的自动对焦相比，这在速度和精度上都是一个巨大的进步。因此，我们看到了使用 PDAF 的手机的绝对爆炸，它已经成为一个巨大的营销流行语，被视为整个行业相机营销的核心。

虽然不像 [三星 Galaxy S7](http://forum.xda-developers.com/galaxy-s7) 拥有的双光电二极管 PDAF(也称为 *【双像素 PDAF】*和 *【双像素自动对焦】* )那样快速对焦，但通过每个像素包括两个光电二极管，允许每个像素用于相位检测，PDAF 和激光自动对焦的合并应该仍然是一个有力的组合。

## 高帧速率

最近有很多关于高帧率相机的讨论(包括消费应用和专业电影制作)。能够以更高的帧速率拍摄既可以用来以常规速度创建令人难以置信的流畅视频(这对于体育和其他高速场景来说可能是梦幻般的)，也可以用来在放慢一切速度时创建一些真正 [有趣的视频](http://www.xda-developers.com/xda-external-link/showcase-of-240fps-slow-motion-video-on-the-nexus-6p/) 。



不幸的是，以更高的帧率拍摄视频极其困难，即使你的相机传感器可以以更高的帧率拍摄，手机的图像信号处理器也很难跟上。这就是为什么在 Nexus 5X 和 6P 中使用的 IMX377 可以拍摄 300 Hz 的 720p 视频和 120 Hz 的 1080p 视频，而我们在 Nexus 5X 中只能看到 120 Hz 的 720p 和 240 Hz 的 720p。IMX377 也能够播放 60 赫兹的 4k 视频，尽管 Nexus 设备被限制在 30 赫兹。

Pixel 手机都能够提供高达 120 Hz 的 1080p 视频和 240 Hz 的 720p 视频，这在一定程度上要归功于 IMX378 的改进，imx 378 在 1080p 下的能力提高到了 240 Hz。

该传感器还能够更快地拍摄全分辨率连拍，在 10 位输出时步进至 60 赫兹，在 12 位输出时步进至 40 赫兹(分别从 40 赫兹和 35 赫兹上升)，这应有助于减少使用 HDR+时的运动模糊和相机抖动。

## SME-HDR

传统上，HDR 对于视频一直是一种取舍。你要么把帧速率减半，要么把分辨率减半。因此，许多原始设备制造商甚至都不在乎它，三星和索尼是少数几个实施它的公司之一。即使是 [三星 Galaxy Note 7](http://forum.xda-developers.com/note-7) 也仅限于 1080p 30 Hz 录制，部分原因是 HDR 视频的计算成本很高。

HDR 视频的两种主要传统方法中的第一种，Red Digital Cinema Camera Company 称之为[【HDRx】](http://www.red.com/learn/red-101/hdrx-high-dynamic-range-video)，Sony 称之为数字重叠 HDR ( [DOL-HDR](http://www.sony-semicon.co.jp/products_en/IS/sensor2/technology/dol-hdr.html) ) ，通过拍摄两个连续的图像，一个曝光较暗，一个曝光较亮，并将它们合并在一起创建一个视频帧。虽然这允许您保持相机的全分辨率(并为两个单独的帧设置不同的快门速度)，但由于两帧之间的时间差(尤其是对于快速移动的对象)，这通常会导致问题。此外，处理器可能很难跟上，就像多尔 HDR 一样，手机的 ISP 负责将独立的帧合并在一起。

另一种传统方法，索尼称之为宁滨多路曝光 HDR (BME-HDR)，为传感器中两行像素的每对 [设置不同的曝光设置，以同时创建两个半分辨率图像，然后将它们合并为一个 HDR 帧用于视频。虽然这种方法避免了与 HDRx 相关的问题，即帧速率的降低，但它也有其他问题，特别是分辨率的降低以及如何在两组线之间改变曝光的限制。](http://developer.sonymobile.com/2013/01/22/shoot-great-videos-in-all-conditions-with-the-new-hdr-functionality-in-xperia-z/)



空间复用曝光(SME-HDR)是索尼正在使用的一种新方法，允许他们以传感器能够支持的全分辨率和全帧速率拍摄 HDR。它是[空间变化曝光](http://www.cs.cmu.edu/~ILIM/projects/IM/assorted/)的变体，使用专有算法使索尼能够从暗像素和亮像素中捕捉信息，这些像素以棋盘风格的模式排列，并推断暗曝光和亮曝光图像的全分辨率图像。

不幸的是，索尼无法向我们提供关于确切模式的更详细的解释，他们可能永远也不会透露它——当涉及到尖端技术时，公司往往会保守秘密，就像我们在 HDR 看到的那样，甚至谷歌也有自己的 HDR 照片专有算法，称为 HDR+。尽管如此，仍然有一些公开的信息，我们可以用来拼凑如何实现它。哥伦比亚大学的 Shree K. Nayar 已经发表了几篇论文([其中一篇](https://scholar.google.ca/scholar?cluster=16720089453645910068&hl=en&as_sdt=0,5)是与索尼的 Tomoo Mitsunaga 合作的)，其中包含了使用空间变化曝光的不同方法，以及可以实现它的不同布局。下面是一个 RGBG 图像传感器的四级曝光布局示例。这种布局声称能够实现单次捕获全分辨率 HDR 图像，而空间分辨率只有大约 20%的损失，这取决于场景(索尼声称为 SME-HDR 取得了相同的成就)。

索尼已经在几个图像传感器中使用了 SME-HDR，包括最近很受欢迎的 IMX214(用于 [华硕 Zenfone 3](http://forum.xda-developers.com/zenfone-3) 激光， [Moto Z](http://forum.xda-developers.com/moto-z) ，以及[Xperia X Performance](http://forum.xda-developers.com/xperia-x-performance))，但与 IMX377 相比，它是 IMX378 的新成员它允许相机传感器在 SME-HDR 激活的情况下以 60 Hz 输出 10 位全分辨率和 4k 视频。虽然该过程中其他地方的瓶颈将导致更低的限制，但这是对 IMX377 能力的巨大改进，是未来好事情的迹象。

与 IMX377 相比，IMX378 的一大改进是它能够在片内处理更多的图像处理，减少了 ISP 的工作量(尽管 ISP 仍然能够请求原始图像数据，这取决于 OEM 如何决定使用传感器)。它可以处理许多小事情，如缺陷纠正和本地镜像，但更重要的是，它还可以处理 BME-HDR 或 SME-HDR，而不必涉及 ISP。这可能是未来的一个重大变化，为 ISP 在未来手机上节省了一些开销。

我们要再次感谢索尼为创作这篇文章提供的所有帮助。我们非常感谢索尼在帮助确保这一功能的准确性和深度方面所做的努力，特别是让我们发现了一些以前未发布的关于 IMX378 的信息。

话虽如此，但很难获得这些信息，甚至是基本的产品信息，这真的很遗憾。当公司试图在网站上发布信息时，这些信息往往是不可访问和不完整的，这在很大程度上是因为它往往被视为公司员工的次要问题，因为他们更专注于自己的主要工作。一个专门处理公共关系的人可以在向公众提供和获取这类信息方面发挥巨大作用，我们看到一些人在空闲时间试图这样做。甚至在 [索尼 Exmor](https://en.wikipedia.org/wiki/Exmor) 维基百科的文章本身上，一个人在几个月的空闲时间里奠定了大部分基础，从一篇几乎无用的[1715 字节的文章](https://en.wikipedia.org/w/index.php?title=Exmor&oldid=617031964) 几年来几乎相同，到我们今天看到的大约 5 万字节的文章，有 185 个不同的编辑。这篇文章可以说是网上关于索尼 Exmor 传感器系列的最佳信息库，我们可以在其他文章中看到非常相似的模式。一个专门的作家可以在消费者比较不同产品的难易程度以及感兴趣的消费者对该主题的了解程度方面产生重大影响，这可能会产生深远的影响。但这是另一个话题了。

和往常一样，我们想知道这些硬件的变化会如何影响设备本身。我们很明显不会获得 4k 60 Hz HDR 视频(可能根本不会获得 HDR 视频，因为谷歌还没有提到它)，但更快的全分辨率拍摄可能会对 HDR+有很大帮助，我们将看到新传感器的改进以其他类似的小而实质性的方式渗透到手机中。

虽然 DXOMark [将 Pixel](http://www.xda-developers.com/meet-the-new-google-pixel-and-google-pixel-xl/) 手机列为表现略好于三星 Galaxy S7 和 HTC 10，但让 Pixel 手机领先的许多因素都是重大的软件改进，如 HDR+(它产生了绝对精彩的结果，DXOMark 专门用了一整节的篇幅来评论它)和谷歌的特殊 EIS 系统(可以与 OIS 协同工作)，该系统每秒钟对陀螺仪进行 200 次采样，以提供我们见过的最好的电子图像稳定。是的，Pixel 手机有一个很棒的摄像头，但如果加上 OIS 和双像素 PDAF，它们会更好吗？绝对的。

不要误会我的意思，正如我所说，Pixel 手机有一个绝对令人惊叹的摄像头，但你不能真的责怪我想要更多，特别是当这些改进的道路如此清晰时(当手机定价为全旗舰定价时，你会期望最好的最好)。总有一部分的我想要更多，想要更好的电池寿命，更快的处理器，更好的电池寿命，更亮更生动的屏幕，更响的扬声器，更好的摄像头，更多的存储，更好的电池寿命，最重要的是，更好的电池寿命(再次)。也就是说，Pixel 手机有许多奇妙的小功能，它们可以组合在一起，创造出一个真正有前途的设备，我很高兴看到这一点。