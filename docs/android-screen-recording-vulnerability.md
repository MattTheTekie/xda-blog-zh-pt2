# 新的 Android 应用程序漏洞欺骗用户录制屏幕

> 原文：<https://www.xda-developers.com/android-screen-recording-vulnerability/>

全球有数十亿台设备安装了 Android，每天都有新的漏洞被发现。现在， *MWR 信息安全*发现了一个漏洞，详细说明了 5.0 到 7.1 版本的 Android 应用程序如何在用户不知情的情况下欺骗用户记录屏幕内容。

它涉及 Android 的 [MediaProjection](https://developer.android.com/reference/android/media/projection/MediaProjection.html) 框架，该框架与 5.0 Lollipop 一起推出，让开发人员能够捕捉设备的屏幕并记录系统音频。在 5.0 Lollipop 之前的所有 Android 版本中，抓屏应用程序需要以 root 权限运行，或者必须用特殊密钥签名，但在较新版本的 Android 中，开发人员不需要 root 权限就可以使用 MediaProjection 服务，也不需要声明权限。

通常，使用 MediaProjection 框架的应用程序通过一个 **intent** 请求访问该服务，Android 以 SystemUI 弹出窗口的形式呈现给用户。 *MWR 信息安全公司*发现攻击者可以用诱饵覆盖一个普通的系统界面弹出窗口，诱骗用户授予应用程序屏幕录制权限。原因？高于 5.0 Lollipop 的 Android 版本无法检测部分模糊的 SystemUI 弹出窗口。

该报告称，该漏洞目前仅在 Android 8.0 Oreo 中得到修补，因为大多数 Android 智能手机都没有运行最新版本的 Android，所以它仍然是一个严重的风险。据 *MWR 信息安全*称，截至 10 月 2 日，约 77.5%的活跃安卓设备易受攻击。

升级问题没有短期的解决方案——这取决于手机制造商。与此同时，Android 开发人员可以通过应用程序的 WindowManager 启用 **FLAG_SECURE** 布局参数来抵御攻击，这可以确保应用程序窗口的内容被视为安全的，并防止它们出现在屏幕截图中或在不安全的显示器上被查看。

从面向用户的角度来看，MWR 信息安全公司补充道，这种攻击并非完全不可检测。该报告指出:

> 当应用程序获得对 MediaProjection 服务的访问权限时，它会生成一个虚拟显示，激活通知栏中的截屏图标。如果用户在其设备通知栏中看到截屏图标，他们应该调查当前在其设备上运行的应用程序/进程。”

这个故事的寓意是什么？小心你下载的应用程序。

* * *

[**来源:MWR 信息安全**](https://labs.mwrinfosecurity.com/advisories/screencapture-via-ui-overlays-in-mediaprojection/)