# 用 Tasker 和 AutoTools 制作你自己的剪贴板管理器

> 原文：<https://www.xda-developers.com/make-clipboard-manager-with-tasker-autotools/>

一段时间以来，我一直试图解决手机上没有剪贴板管理器的问题。有第三方应用程序和一些内置剪贴板管理器的键盘，但我个人发现许多第三方键盘很慢而且笨重，因此我通常坚持使用 Gboard。此外，如果可以的话，我通常会尽量避免安装专用于一个目的的新应用程序。这是我自己的剪贴板管理器在 Tasker 中发挥作用的地方！

* * *

## Tasker -剪贴板管理器

多亏了新的 AutoTools WebScreens 操作，我终于可以创建自己的剪贴板管理器了，它可以快速、方便地访问。Tasker 剪贴板管理器项目可以存储多达 9 个剪辑，在添加新剪辑时替换旧剪辑。我挑选了 9 个项目来存储，因为它们非常适合我的屏幕，但通过一些简单的调整，你可以设置存储剪贴板的数量。

虽然你*可以*有一个浮动的动作按钮(FAB)来拉起剪贴板，但我更喜欢用滑动手势来代替。为了缓解潜在的性能问题，我已经设置了 Tasker 剪贴板管理器项目，以便在您的手机内存中占用非常小的空间，因为配置文件只能限于某些应用程序。在下面的视频中，你可以看到我将剪贴板菜单只链接到 Google+和 Pages Manager 应用程序。但是请记住，每当您对当前存储的剪辑进行更改时，剪辑的收集都会在后台进行。

如果您使用的是 [Join](https://play.google.com/store/apps/details?id=com.joaomgcd.join) 应用程序，这个项目应该不会干扰它。但是通过使用 Join，您还可以与其他设备共享我的项目中的选定剪辑。对于这个项目，我使用的是 AutoTools 的 WebScreens 操作，所以要确保你已经安装了插件。其他的都只是股票 Tasker。对剪贴板管理器的访问是由应用程序本身驱动的。因此，当我看 YouTube 或玩游戏时，我不需要激活这个配置文件，所以我的配置文件被设置为只在需要它的应用程序上激活。

这里有一个展示我的作品的视频:

如果你想按原样导入我的项目，那么你可以点击下面的链接，这将带你到 AndroidFileHost 下载页面。

[**下载 Tasker 剪贴板管理器项目**](https://www.androidfilehost.com/?fid=673368273298969744)

下载上面的 ZIP 文件，并将内容解压缩到您的 Android 设备的内部存储中。打开 Tasker，在首选项中禁用“初学者模式”。然后，回到 Tasker 的主页，长按左下角的 home 图标。您将看到一个“导入”项目的选项。点击该选项，然后找到您之前提取的. prj.xml 文件。导入后，您将会在 Tasker 的默认主页图标旁边的底部看到一个新标签。

请注意，该项目要求您安装[自动工具](https://play.google.com/store/apps/details?id=com.joaomgcd.autotools)才能工作。如果你想定制我的项目的各个方面，那么我建议你继续阅读下面的内容，这样你就可以了解这是如何工作的，以及可以做出哪些改变。请注意，至少，您应该更改应用程序上下文中的应用程序，以便这个剪贴板管理器可以在比默认设置更多的应用程序中被调用。

* * *

### 个人资料-带剪贴板的应用程序

在这个例子中，我使用 Google+和 Pages Manager 来启用 WebScreens 滑动。

### TASKER 个人资料-带剪贴板的应用程序

```
Profile: Apps With Clipboard 恢复:否应用程序:Google+或页面管理器进入:启动菜单A1:自动工具网页屏幕[配置:屏幕预设:滑动显示模式:覆盖关闭覆盖 ID:滑动source:/storage/emulated/0/AutoTools/swipe/page . html烤面包持续时间:5000背景色:#00CE93D8宽度:10身高:400重力:右下角动画:从底部滑入覆盖 Id:刷卡显示持续时间:500隐藏持续时间:250拖动:不可拖动隐藏对话框阴影:true注入头:变量 a = 1；命令前缀:滑动向左滑动:向左向右滑动:向右向上滑动:向上向下滑动:向下边框颜色:#AB47BC边界宽度:3边框侧:右侧超时(秒):30 ]退出:退出剪辑手势A1:自动工具网页屏幕[配置:屏幕预设:滑动显示模式:关闭关闭覆盖 ID:滑动source:/storage/emulated/0/AutoTools/swipe/page . html烤面包持续时间:5000背景色:#00CE93D8宽度:10身高:400重力:右下角动画:从底部滑入显示持续时间:500隐藏持续时间:250拖动:不可拖动隐藏对话框阴影:true注入头:变量 a = 1；命令前缀:滑动向左滑动:向左向右滑动:向右向上滑动:向上向下滑动:向下边框颜色:#AB47BC边界宽度:3边框侧:右侧超时(秒):30 ]
```

选择要在上下文中启用的应用程序，然后创建一个名为 Launch Menu 的任务。此任务将在 Tasker 项目-剪贴板管理器中启用网络屏幕滑动。

#### 任务启动菜单

在 AutoTools WebScreen 选项中，导入一个屏幕预设**(滑动)**并删除所有命令，除了设置页面命令部分的“**左**”。

根据您的喜好设置窗口设置。我将重力设置为右下角，宽度设置为 10，高度设置为' **fill** '。

#### 任务退出剪辑手势

我们需要在不需要的时候禁用手势。添加退出任务并创建另一个 WebScreens 操作。这次使用显示模式来设置'**关闭**动作。这将终止网页屏幕和刷卡识别。

默认情况下，向右滑动会发出自动工具命令 **swipe=:=right** 。当这种情况发生时，我希望我的剪贴板管理器打开。创建一个新的配置文件，将 AutoApps 上下文设置为“**刷卡**”作为过滤器。当滑动完成后，一个漂亮的菜单会出现，里面有我们需要的所有剪辑。

```
Profile: Show Menu 事件:AutoApps 命令[配置:命令过滤器:滑动]进入:剪贴板菜单A1:自动工具网页屏幕[配置:屏幕预设:卡片列表显示模式:对话框source:/storage/emulated/0/AutoTools/cardlist/page . html烤面包持续时间:5000宽度:100高度:填充重力:右下角动画:从顶部滑入显示持续时间:500隐藏持续时间:250根据命令关闭:真等待命令:真标题:剪辑卡片标题:%ClipPosition()左侧卡片潜台词:%ClipAbrev()卡片命令:%ClipPosition()命令前缀:剪贴板背景颜色:#BDBDBD强调色:#F9A825最大卡片宽度:90%最大图像高度:75标题文本大小:5卡片填充:0卡片对齐:居中项目分隔符:，超时(秒):30 ]
```

#### 任务-剪贴板菜单

布局是从 Joao 的教程中“借用”来的。我喜欢侧面发射器的样子，所以没有必要重新发明轮子。显然，该 WebScreen 中使用的变量会有所不同，但布局几乎是相同的。

添加一个 AutoTools Web 屏幕操作，并选择卡片列表预设。在窗口设置设置下:

*   宽度为 **100**
*   到**填充的高度**
*   重力至**右下角**

在命令选项下，根据命令和**启用**关闭，等待命令**，然后在卡片设置下:**

*   **%ClipPosition()** 的卡片标题(将包含 1-9 的数字)
*   卡片附加到 **%ClipAbrev()** (包含简短片段)
*   卡命令给 **%ClipPosition()** (用于识别按压)
*   命令前缀到**剪贴板**
*   最大卡片宽度和最小卡片宽度为**的 90%**
*   最大图像高度为 **75**
*   标题文本大小为 **5**

您可以随意修改通知的外观，自己摆弄这些数字。请记住，没有下一步就打开网页屏幕不会给你任何预览。

### 任务数组编号

我们需要一个包含从 1 到 9 的数字的数组。这些将用于识别我们的剪贴板条目，并将存储在 **%ClipPosition()** 数组中。

### 任务数组编号

```
array numbersA1:变量集[名称:% clip position To:1 . 2 . 3 . 4 . 5 . 6 . 7 . 8 . 9递归变量:Off 做数学:Off 追加:Off ]A2:变量 Split[Name:% clip position Splitter:。删除基础:关闭]
```

创建此任务，然后生成数组。这将创建全局数组。

### 配置文件-剪贴板监视器

该配置文件将监控包含当前剪贴板值的系统变量 **%CLIP** 的变化。创建一个设置了事件触发变量的概要文件，并将其设置为监控变量 **%CLIP** 。当用户(您)设置了一个新的剪贴板条目时，Tasker 将检测到这一变化。

### 配置文件-剪贴板监视器

```
Profile: Clipboard Monitor 事件:变量集[变量:%CLIP 值:*仅用户变量:Off ]输入:剪贴板管理器A1:可变部分[名称:%CLIP From:1 长度:6 Adapt To Fit:On Store Result In:% abrev]A2:数组推送[变量数组:%ClipboardArray 位置:1 值:%CLIP 填充空格:Off ]A3:数组推送[变量数组:%ClipAbrev 位置:1 值:%abrev 填充空格:On ]A4:数组处理[变量数组:%ClipAbrev 类型:删除重复项]A5:数组进程[变量数组:%ClipboardArray 类型:删除重复项]A6:数组进程[变量数组:% ClipboardArray 数组类型:Squash ]A7:数组进程[变量数组:%ClipAbrev 类型:Squash ]A8:数组 Pop [变量数组:% clipa brev Position:10 To Var:]If[% clipa brev(#)eq 10]A9:数组 Pop [变量数组:% clipboard Array Position:10 To Var:]If[% clipboard Array(#)eq 10]
```

#### 任务-剪贴板管理器

我们的剪贴板内容存储在 **%ClipboardArray()中。**每次保存一个新的剪贴板，一个**数组 Push (A2)** 动作将它移动到数组的第一个位置。因为我不想让整个文本在侧边菜单上可见，所以我创建了另一个数组 **%ClipAbrev()** **(A3)** ，它将存储剪贴板的前 X 个字母。要缩短剪贴板，使用 **(A1)变量选择**并将字符数限制为 6(确保勾选了适应)，并将该值存储在本地 **%abrev** 变量中，该变量用于填充 **(A3)数组推送**动作。

现在我们已经准备好剪贴板集合，我们必须清理混乱。该数组将收集所有的剪贴板。这意味着当我们从侧边菜单中选择一个剪贴板时，它将收集新的值并将其作为副本分配给菜单。因此，每次我们保存一个剪辑时，我都想删除重复的条目 **(A4，A5)** 并删除空白区域 **(A6，A7)** 。**数组处理动作**在 **%Clipboard Array()** 和 **%ClipAbrev()** 上都执行。

最后，我希望我的菜单只包含 9 个条目。你可以有更多的菜单，但是我发现这 9 个菜单不需要滚动就很适合我的屏幕。为此，使用**数组 Pop (A8，****【A9)**并删除第 10 个位置。如果数组包含 10 个元素，只需做这个**。否则，删除最后一个元素。我们通过检查元素的数量 **%ClipboardArray(#) = 10** 来实现这一点。**

## 配置文件集剪贴板

我们快完成了。这是一个非常简单的简介。我们使用 AutoApps 命令剪贴板来检查命令是否已被接收。该命令看起来像这样: *clipboard=:=1* 其中数字代表我们侧边菜单上按下的按钮。

### 配置文件集剪贴板

```
Profile: Set Clipboard 事件:AutoApps 命令[配置:命令过滤器:剪贴板]回车:设置新剪辑A1:设置剪贴板[Text:% Clipboard array(% aacomm)Add:Off]
```

#### 任务-设置新剪辑

任务也很简单。将剪贴板设置为 **%ClipboardArray()** 的值，我们希望选择由接收到的命令的 **%aacomm** 部分指定的元素。所以将剪贴板设置为 **%ClipboardArray(%aacomm)** 就大功告成了。Tasker 剪贴板管理器现在已经完成。

* * *

现在，在您选择的应用程序中，您可以向右滑动来打开您自己的自定义剪贴板管理器！跟随 [XDA 开发者教程](https://www.xda-developers.com/category/tutorials/)获取更多这样的帖子。此外，查看我们的 [Tasker Tips & Tricks](https://forum.xda-developers.com/u/tasker-tips-tricks) 论坛，了解我们社区中自动化爱好者的最新创造。