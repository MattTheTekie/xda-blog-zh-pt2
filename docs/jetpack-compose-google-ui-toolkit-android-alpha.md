# Jetpack Compose 是谷歌为 Android 开发的新用户界面工具包，现在已经发布了 alpha 版本

> 原文：<https://www.xda-developers.com/jetpack-compose-google-ui-toolkit-android-alpha/>

说到开发一个应用程序，有很多方法可以实现。您可以选择为哪个(些)平台开发，您想要使用哪个(些)编程语言，等等。

早在 2019 年秋天，谷歌[推出了](https://www.xda-developers.com/android-jetpack-camerax-biometrics/)一个使用 Kotlin 在 Android 中构建 ui 的新框架。到目前为止，它一直处于发展状态，经常有突破性的变化和大量缺失的功能。但今天，谷歌已经将 Jetpack Compose 推向了 alpha 发布状态，这意味着它离用于生产质量的项目更近了一步。

## 什么是 Jetpack Compose？

当构建一个 Android 应用程序时，通常有两个主要组件需要处理:代码，用于基于逻辑的东西；和用于布局的 XML。默认情况下，Android 使用 Java 编写代码，使用自己的 XML 标签来进行布局。

对于许多人来说，Java 和 XML 就足够了，尤其是对于简单的应用程序。但是这两种系统都有其局限性和烦恼。随着 Kotlin 作为 Android 开发的官方语言(也是推荐语言)的引入，制作 Android 应用程序的编码变得更加容易。有了 Kotlin 的便利特性，如内置的空保护和扩展功能，代码看起来更整洁，更容易阅读。

但是 Kotlin 并没有改变 Android 的布局。要制作一个复杂的布局，您仍然需要创建一个 XML 文件并在那里进行设计。这有一些明显的缺点，包括代码和 XML 之间固有的分离。例如，如果您的代码中有一个常量字符串，您不能只从 XML 中引用它，所以如果该字符串在代码中发生了变化，您必须记住也要在 XML 中更新它。

输入 Jetpack Compose。这是谷歌对 Android 中越来越笨拙的 XML 布局设计过程的回应。不用用 XML 设计你的应用程序的 UI，你可以直接从你的代码开始。虽然基于代码的布局是可以创建的，但是它们通常比 XML 更难维护，并且包含容易损坏的库。另一方面，Compose 被设计成直接在 Kotlin 内部工作:不再需要 XML。

Jetpack Compose 也完全背离了 XML 布局的标准命令式设计。相反，它更类似于 React 或 Flutter，具有在数据变化时自动更新的声明性布局，而不是依赖开发人员来实现该逻辑。

## 支持什么

所以 Jetpack Compose 现在在 alpha 中。那是什么意思？嗯，很多事情。

### 与视图的互操作性

就像 Kotlin 与 Java 完全互操作一样，Jetpack Compose 与 Android 的标准视图完全互操作。这意味着很多事情。

首先，如果您愿意，迁移到 Jetpack Compose 会容易得多。不必将所有的定制视图和布局转换为 Composables，您可以在 Compose 中创建新的布局和组件。拥有一个使用“传统”视图的库，但您的应用程序是用 Compose 设计的？没问题。您可以将视图直接添加到您的可组合函数中。还没有开始编写，但是你想使用一个依赖于 Composables 的库？再说一遍，没问题。只需将可组合组件放入布局中。

至于主题化，它不像布局互操作性那样即插即用。然而， [Google 已经开发了一个库](https://material-components.github.io/material-components-android-compose-theme-adapter/)来将你的标准 XML 主题改编成兼容 Compose 的主题，这有助于保持事情的集中化并避免重复。

### 动画片

这里真的没有太多要说的，除了 Jetpack Compose 支持动画，就像 Android 的 View 框架一样。您可以随心所欲地移动、调整大小和旋转。

### 懒惰列表

惰性列表本质上是 Compose 版本的 RecyclerView。它只在需要时布置项目，节省了 RAM 并提高了性能。当然，由于是组合，列表实现起来要简单得多。

### 约束布局

Android 中更强大的视图之一是 ConstraintLayout。这使您可以相对于彼此定位、调整子视图的大小和权重，同时也使某些动画变得更容易。如果您担心在 Compose 中失去这个功能，您不应该担心，因为它也在这里。

### 材料用户界面组件

另一组强大的视图是 Google 的材料组件库。这里的大部分是标准视图和布局，您可以在本机视图框架中找到。但是它们被调整或包装，以提供额外的功能，使主题化更容易，并且它们也有自己的作曲方式。

### 测试

开发应用程序的一个重要部分是测试它。对于一个简单的应用程序，您可以通过安装和使用它来手动完成。然而，更复杂的项目可以从自动化测试框架中受益匪浅，因为它为您做了大部分艰苦的工作。Jetpack Compose 支持自动化测试，因此您可以使您的应用程序尽可能稳定。

### 辅助功能

无障碍是我们社会的重要组成部分。如果我们的技术中没有无障碍功能，许多人就会被我们的电话、电视和其他任何东西提供的好处拒之门外。Jetpack Compose 仍处于 alpha 阶段，因此对可访问性的支持还不完整，但 Google 在开发过程中会记住这一点，并且已经提供了基本的支持。

## 安卓工作室

不过，Jetpack Compose 本身并不具备 Jetpack Compose 的所有特性。Android Studio 和 Kotlin 也有插件和扩展，以方便创作。

### Kotlin 编译器插件

与 Kotlin JVM 一样，Android Studio 中有一个编译器插件，可以正确地将您的 Compose 函数转换为 Android 可以理解和遵循的代码。

### 交互式预览

就像标准的 XML 布局一样，Android Studio 附带了 Jetpack Compose 的布局预览。虽然它目前在某些方面不如 XML 预览方便——您必须构建项目以便预览更新，并创建专用的预览功能——但它确实有一个显著的优势:交互式预览。

交互式预览只是普通的预览，但是*交互式*。我知道这很疯狂。这意味着，你可以在文本框中输入文本，点击按钮，与组件进行交互，甚至不需要部署它们。

### 单一可组合部署

如果您确实想实际部署(即安装)您的布局以查看它在真实设备上如何工作，此功能可能会对您有所帮助。对于普通的 XML 布局，为了了解布局在现实世界中是如何工作的，您必须构建并安装整个应用程序。如果您想要测试的布局不在主屏幕上，您可能需要多次点击才能找到它。

这就是只部署一个可组合组件的能力发挥作用的地方。您无需构建和安装应用程序，然后导航到正在测试的布局，只需部署布局即可。Android Studio 将生成并打开一个包装器活动，该活动只显示您部署的可组合组件。这可以使测试和设计更快，甚至可以帮助隔离与元素交互相关的问题。

### 代码完成

如果你的 IDE 没有代码完成功能，那它还是 IDE 吗？不不不是的。所以，当然，Android Studio 支持 Jetpack Compose 的完整代码完成。

* * *

虽然这不是 Jetpack Compose 带来的所有东西，但上面的特性和行为展示了 Google 希望这个框架有多强大。而且，虽然它仍处于 alpha 阶段，但这比它以前的“开发”状态领先了一步。如果你一直没有真正使用 Jetpack Compose(像我一样)，现在可能是时候再试一次了。