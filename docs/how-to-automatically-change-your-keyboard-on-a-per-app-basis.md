# 如何基于每个应用程序自动更改键盘

> 原文：<https://www.xda-developers.com/how-to-automatically-change-your-keyboard-on-a-per-app-basis/>

与 iOS 不同，Android 有能力改变你的默认键盘已经很多很多年了。如此大量的替代键盘在谷歌 Play 商店激增。尽管大多数人可能会使用 Gboard、Swiftkey 或 Swype 中的一种，但出于多种原因，还有许多其他伟大的键盘应用程序是数百万人每天都在使用的。许多人寻求非默认键盘应用程序的一个原因是因为语言支持。

一些键盘应用程序更适合某些语言，但通常在其他方面并不是最好的。许多多语言用户发现，每当他们想用母语输入一些东西或者想用英语输入一些东西时，他们就会频繁地在键盘应用程序之间切换。如果您的设备上启用了多个键盘，那么您可以用来在键盘之间切换的方法取决于您的设备。除了新发布的 Galaxy S8 或 Galaxy S8+之外，三星智能手机在显示键盘时会发布通知，当点击时，会打开键盘切换器对话框。其他带有虚拟导航键的手机，如华为的手机，在导航条上显示一个按钮来切换键盘。

如果你发现自己只有在使用某些应用程序时才频繁切换键盘，这里有一个教程教你如何在每个应用程序的基础上自动切换键盘。这样，您可以放弃使用导航条按钮或通知来切换键盘，而是自动化这个过程。尽管我之前的陈述提到这对于多语言用户非常有用，但我还能想到其他一些可能有用的场合:

*   当你使用 Android Auto 时，自动切换到谷歌语音输入
*   当您准备好输入密码时，自动切换到密码管理器的键盘

* * *

## 基于每个应用程序自动切换键盘

我们将使用 Tasker 来检测我们所在的应用程序，然后使用 SecureTask 或 AutoTools 来自动切换键盘。SecureTask 和 AutoTools 都是 Tasker 插件，可以做我们正在寻找的事情，但是，在这种情况下，AutoTools 在设置这一点上更加用户友好。因为 AutoTools 不是一个免费的插件，所以我将提到如何使用 SecureTask 来实现这一点，但是要知道，要让它运行起来，您还需要做一些额外的工作。

### 步骤 1:启用 Tasker 的辅助功能服务

为了让 Tasker 检测到我们在哪个应用程序中，我们需要授予它可访问性服务。这样做非常快，只需进入设置->辅助功能，并在服务列表中查找“Tasker”。启用辅助功能服务。

接下来，我们需要授予 SecureTask 或 AutoTools 修改设备上的系统设置的能力。为了做到这一点，我们必须授予 SecureTask 或 AutoTools 一个称为 WRITE_SECURE_SETTINGS 的特殊权限，通常常规应用程序无法访问该权限，但用户可以使用 ADB 手动授予该权限。因此，您需要在您的机器上安装并运行 ADB 来使其工作。幸运的是，授予这个权限只是一次性的事情，所以一旦你这么做了，你就可以使用这个插件来跟随我们的许多其他使用这个插件的教程(其中[有许多](https://www.xda-developers.com/category/tutorials/))。

如果你已经建立了亚洲开发银行，你可以跳过 2A 步骤。

### 步骤 2A:建立亚洲开发银行

你需要做的第一件事是为你的操作系统下载 ADB 二进制文件。你可以在这里这样做。一旦你下载了它们，如果你用的是 Windows，你需要确保你有合适的[驱动程序](https://developer.android.com/studio/run/win-usb.html)。

一旦你将二进制文件解压到一个单独的文件夹并安装了驱动程序，我们接下来需要在智能手机上启用 USB 调试。为此，请打开“设置”,然后进入“关于手机”。点击 7 次 Build Number 直到你得到一个对话框告诉你你已经解锁了开发者选项。您现在可以在“设置”中访问开发人员选项。显然在 Android O 中，你必须输入你的 pin/密码才能打开开发者选项。这样做，并寻找 USB 调试，然后启用它。

现在插上你的手机，在你解压 ADB 二进制文件的同一个目录下打开一个命令提示符。(Windows 用户，按住 shift 键并右键单击该文件夹，然后选择“在此打开命令提示符”)在命令提示符下键入`adb devices`。你会看到一条消息，说亚行服务器正在启动，然后在你的手机上，你会看到一个提示，要求你授予你的计算机亚行访问。接受吧。现在，当您在命令提示符下输入`adb devices`时，您应该会看到您的设备的序列号，如果是这样，那么您就成功了。

打开 ADB 命令提示符后，输入以下命令授予 SecureTask 必需的权限。

```
 adb shell pm grant com.balda.securetask android.permission.WRITE_SECURE_SETTINGS

```

如果您正在使用自动工具，请输入以下命令:

```
 adb shell pm grant com.joaomgcd.autotools android.permission.WRITE_SECURE_SETTINGS 
```

SecureTask/AutoTools 现在将能够在没有 root 访问权限的情况下修改系统设置！现在我们准备向 Tasker 前进。

### 步骤 3:设置任务者配置文件

打开 Tasker，点击 **+** 按钮，创建新的个人资料。点击**应用**添加应用上下文。在应用程序选择屏幕中，选择您希望键盘自动切换的应用程序。

按返回键或点击左上角的返回箭头返回 Tasker 的主屏幕。Tasker 将要求您创建一个新任务或附加一个现有的任务。选择创建新任务。不要费心命名它，只需点击复选标记就可以进入任务编辑屏幕。

现在我们将创建任务。如果使用自动工具，请遵循步骤 3A；如果使用 SecureTask，请跳至步骤 3B。

进入任务编辑屏幕后，按照以下步骤创建输入任务，该任务将在我们进入之前选择的应用程序时改变我们的键盘):

1.  点击底部中间的 **+** 图标，添加新动作。
2.  按下**插件**然后**自动工具**然后**安全设置**。
3.  点击**铅笔**图标，调出自动工具配置。
4.  向下滚动并点击**服务**。
5.  选择**输入法**。
6.  选取您想要在打开您选择的应用程序时自动切换到的键盘应用程序)。
7.  按返回键，然后点击复选标记保存自动工具配置。回到 Tasker 的屏幕，您应该会在“输入法:”旁边看到键盘服务的名称
8.  按后退键或点击后退箭头两次以完成此任务的创建。

接下来，我们需要创建一个退出任务，当我们离开我们选择的应用程序时触发该任务。这将恢复我们的键盘回到我们最喜欢的/默认的键盘。以下是步骤:

1.  回到 Tasker 的主屏幕，长按刚刚创建的现有任务。一个弹出窗口将显示一些选项。选择**添加退出任务**。
2.  选择在此创建新任务。
3.  进入任务编辑屏幕后，重复之前说明中的步骤 2-8，除了在步骤#5 中选择离开所选应用程序后要返回的键盘。

### 步骤 3B:如果使用 SecureTask，则为 Tasker 任务

进入任务编辑屏幕后，按照以下步骤创建输入任务，该任务将在我们进入之前选择的应用程序时改变我们的键盘):

1.  通过按下底部中间的 **+** 按钮创建一个动作。
2.  点击**插件**然后**安全任务**然后**安全设置**。
3.  点击**铅笔图标**打开 SecureTask 配置。
4.  在 SecureTask 中，将动作设置为 **Read** 。对于设置类型**安全默认输入方法**。对于结果变量名，键入**键盘**。
5.  点击复选标记保存 SecureTask 配置，然后点击后退键或按左上方的箭头键返回到任务编辑屏幕。
6.  添加另一个动作，但这次是转到**变量**，然后是**变量集**。
7.  对于名称，将其设置为一个**全局变量**，表示当前默认键盘的**名称。当变量名的**首字母大写时，Tasker 识别全局变量。**比如，我把名字写成%Gboard。**
8.  用于将其设置为%键盘。
9.  按 back 返回任务编辑屏幕。
10.  在屏幕左下方，点击**播放按钮**运行任务。

步骤 2-10 旨在保存键盘的服务名，它是一个全局变量，当我们需要更改键盘时可以引用它。我们需要知道键盘服务的确切名称，否则我们无法更改到该键盘。您可以切换到 Tasker 中的 Variables 选项卡，查看刚刚保存的键盘服务的名称。

您需要**重复**步骤 2-10 来保存您想要切换的所有其他键盘的键盘服务名称。你所要做的就是手动换到另一个键盘，重复步骤 2-10，然而，你需要**改变第 7 步**中的变量名。例如，我把我的键盘改成了 Xperia 键盘，所以我没有保存名为%Gboard 的全局变量，而是把它命名为%Xperia。

一旦您对想要切换的键盘重复了上述步骤，我们现在可以设置我们的实际任务来改变键盘。请遵循以下步骤:

1.  删除之前的两个动作，方法是长按选择它们，然后将高亮显示的动作拖到底部的垃圾桶中。
2.  添加新动作，进入**插件** - > **安全任务** - > **安全设置**。
3.  点击铅笔图标打开 SecureTask 配置。
4.  对于这次的动作，选择**写**。再次设置为**安全默认输入方法**。但是这次为新值设置它**你想要自动切换到的键盘的全局变量名**。例如，我把%Gboard 放在这里。
5.  退出任务编辑屏幕，回到 Tasker 的主菜单。

现在，我们需要添加一个退出任务，当我们离开我们选择的应用程序时将触发该任务，因此 Tasker 会将我们恢复到我们选择的默认键盘。步骤如下:

1.  长按我们刚刚创建的任务，直到您看到一个弹出窗口。
2.  选择**添加退出任务**。
3.  创建新任务。
4.  通过转到插件->安全任务->安全设置来添加操作。动作:**写**。设置:**安全默认 _ 输入 _ 方法**。新值:**退出应用程序后要恢复到的键盘的全局变量名**。

* * *

## 结论

在这里，使用 AutoTools 还是 SecureTask 并不重要——最终结果是一样的。当您进入您选择的应用程序时，Tasker 会自动为您切换键盘，并在您离开这些应用程序时恢复键盘更改。

一旦你设置好这些，你就可以随时随地使用不同的键盘。正如我在开始提到的，你可以在安卓自动模式下自动启用谷歌语音输入。或者举例来说，如果您使用 KeePass2Android，您可以让 Tasker 在发布 KeePass 通知时切换到 KeePass 键盘(注意:这需要您使用另一个插件，如 AutoNotification 或 Notification Listener，为简洁起见，我们不在此赘述)。

我们希望本教程对你有用。请关注我们的[教程类别](https://www.xda-developers.com/category/tutorials/)来寻找更多有用的教程，比如这个！