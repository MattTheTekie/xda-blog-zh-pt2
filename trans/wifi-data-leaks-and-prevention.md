# WiFi 数据泄露及预防

> 原文：<https://www.xda-developers.com/wifi-data-leaks-and-prevention/>

有能够连接到 WiFi 网络的设备吗？答案很可能是“是”。在这种情况下，你应该知道它最有可能泄漏潜在的私人信息。如果你想知道什么正在被泄露以及如何防止泄露，请继续阅读。

当您的设备完全休眠时，您的 WiFi 芯片会定期泄露两条信息:

*   您以前连接过的网络的名称。
*   您设备的 MAC 地址。

注意我们说的是深度睡眠。你的屏幕被关闭不一定足够，因为音乐播放或其他服务可以让你的手机保持清醒。

## 记忆网络的名称

第一种类型的泄漏是由于首选网络卸载(PNO)而发生的。这项功能是在 Honeycomb 中添加的，基本上是通过为每个记住的网络发送探测请求来在后台扫描 WiFi 网络。它一直这样做，直到收到一个响应，表明网络的接入点在范围内。

[1]:WiFi 设备使用探测请求来扫描已知的接入点。这通常是在没有连接到任何网络时完成的。然而，许多品牌也会发送探测请求，以确定信号较强的网络是否在覆盖范围内。在最新版本的 Android 上，设备唤醒时使用的非 PNO 扫描仪不会泄露我们上面列出的数据。

与被动扫描(等待接入点广播其存在)相反，这种方式速度更快，并且不需要设备长时间保持唤醒状态。简而言之:它节省电池。

默认行为是将记住的网络(ssid)名称作为探测请求的一部分发送，即使除了隐藏的 ssid 之外并不要求这样做。

你记得的 SSIDs 能说明你什么？它们实际上可以用来确定你经常去的地方和你的习惯(例如咖啡店或酒店)，或者甚至是具体的家，如果这些名字是指示性的(例如吉姆的路由器)或者在驾驶数据库中有索引。一个流行的例子是 WiGLE.net 驾驶数据库。通过查看您过去连接过的所有网络，还可以更准确地确定您的主要位置。有一个有趣的实验在实践中证明了这一点:[大脚野人](http://brambonne.com/docs/bonne14sasquatch.pdf)。

我们以一个随机的人为例。我们有一些无关痛痒的网络名称，它们本身并没有太多含义:“Home”、“HHonors”、“ATTwifi”、“Columbia University”……但是把它们放在一起，你就已经知道很多了。如果那个人去度假，这也将使用户记忆的网络集合更加独特。反过来，这使得发现他们的身份更加容易，尽管这些细节本身相当微小。

## 您设备的 MAC 地址

至于你的设备的 MAC 地址，它可以作为一个唯一的标识符，显示你的智能手机的制造商。每个 MAC 地址实际上都包含一个[组织唯一标识符](http://standards.ieee.org/faqs/regauth.html)。

例如，如果使用多个探测器，这可以让第三方跟踪你在商场的活动。如果你有兴趣了解更多的话，大脚野人背后的同一个团队在[的一个实验](http://brambonne.com/docs/bonne13wifipi.pdf)中也做过同样的实验。有了一些创意，随着时间的推移，这些信息甚至可以与你的实际身份联系起来——想象一下，例如，商场老板将你设备的 MAC 地址与你对收银机的访问联系起来。

## 邪恶的双胞胎袭击

这不是一个漏洞，但是我们将很快讨论它，因为它有助于理解一个提议的解决方案在后面做什么。不过，它确实利用了网络列表泄漏。

攻击者可以使用网络的名称，通过模仿另一个接入点(个人接入点或流行网络，如咖啡店的接入点)来专门针对您或 a 组人员。这被称为一个邪恶的孪生攻击，基本上包括一个新的接入点使用你的设备已知的 SSID。接入点的 MAC 地址也很容易伪造。这在许多情况下都是可能的，例如在开放网络甚至 WPA 个人网络中，其他人知道密码。使用 WPA 企业版更复杂，但可以防止这种情况。

在大多数情况下，这意味着如果其他人连接到同一个网络，他们可以读取正常的流量，要么是因为网络/密钥是共享的(再次考虑商店的例子)，要么是因为邪恶的孪生攻击。在这些情况下，使用 HTTPS，甚至 VPN 或 SSH 隧道通常可以保证您的安全，除非您接受自定义根证书。

# 预防和解决方案

最后一部分已经讨论过了，那么，要意识到连接到公共网络的风险，并采取相应的行动。其他的呢？

理想情况下，您的设备会广播探测请求，要求附近的接入点宣布它们的存在，而不是“呼叫”每个接入点的名称。这对于正常的 ssid 来说工作得很好，在探测请求中发送 ssid 只能用于隐藏的 ssid。顺便提一下，这就是为什么您不应该将隐藏的 SSIDs 视为一种安全措施。这样做可以解决位置跟踪问题，但需要在 WiFi 芯片的层面上实现，这是当设备处于深度睡眠状态时活跃和泄露数据的部分。

另一种方法是，当您不在范围内时，手动删除记忆的网络，或者在确定设备的位置后，只发送对附近接入点的探测请求。第一个需要手工操作，第二个可能是一个巨大的电池消耗者。

幸运的是，存在更好的解决方案…

## Wi-Fi 隐私警察

Wi-Fi 隐私策略有两个功能:

*   首先，它通过禁用不在范围内的 WiFi 网络来自动执行“忘记过去的接入点”部分，从而防止您的设备在深度睡眠时发送记住的网络 SSIDs。
*   第二，它会询问你一个已知名称，但不同的 MAC 地址的新接入点。这旨在防止接入点假冒。

第一点如预期的那样起作用。在网络被遗忘之前会有短暂的延迟，但这可能不是问题，因为您可能刚刚超出范围。

如果 SSID 是伪造的，那么第二种方法确实可以防止接入点被假冒。但是，如果攻击的目标是特定的(公共或个人)接入点，MAC 地址也很容易伪造。你应该意识到这一点，因为安全的幻觉比知道缺陷更糟糕。

如果您想避免网络列表泄露，这是一个不错的选择，尤其是如果您不是 root 用户，因为不需要 root 用户。可以从 [Google Play 商店](https://play.google.com/store/apps/details?id=be.uhasselt.privacypolice)抢。该应用程序也是开源的(GPLv2+许可)，欢迎你在 [GitHub](https://github.com/BramBonne/privacypolice) 上查看其源代码。

## Pry-Fi

Pry-Fi 可防止您的设备公布记忆的网络列表，但仍允许自动连接到网络。

此外，当您没有连接到 WiFi 网络时，您的 MAC 地址会不断被随机化，从而使跟踪变得毫无用处。当您连接到 WiFi 网络时，它也会再次被随机化(您不会在以后的连接尝试中使用相同的 MAC 地址)。

最后但同样重要的是，Pry-Fi 带有一个警告模式，它会不断快速地改变你的 MAC 地址。这使得跟踪单个设备变得更加困难，并可能在一定程度上破坏你周围的跟踪数据，尽管如果只有你一个人在使用它，将这些轨迹归因于一个人也是可行的。

简而言之:如果你想阻止你的网络列表泄露和 MAC 追踪，使用这个。

Pry-Fi 需要 Root 才能正常工作。要安装它，请查看 XDA 论坛的帖子或前往 T2 的 Google Play 商店。

请注意，在过去的几个月里，Pry-Fi 还没有得到积极的开发，所以如果你的设备不被支持，你可能就要倒霉了。[你可以在这里了解更多原因](https://plus.google.com/+Chainfire/posts/Y4fjP6cH45v)。

## Pry-Fi 源补丁

这些补丁可以由 ROM 开发者应用(它们可能需要在某些设备上进行额外的测试/修复)。它们提供了两种功能，并且通常比相同功能的其他解决方案更可靠:

*   首先，在扫描网络时，设备的 MAC 地址是随机的，但在连接到网络时不会。
*   第二，你的设备将不再泄漏记忆网络列表。

要了解更多信息，请务必查看 [XDA 论坛主题](http://forum.xda-developers.com/showthread.php?t=2780902)和链接提交。