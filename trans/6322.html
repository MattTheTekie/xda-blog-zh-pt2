<html>
<head>
<title>Android Q adds a new Notification Assistant API to manage notifications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Android Q增加了新的通知助手API来管理通知</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/android-q-notification-assistant/#0001-01-01">https://www.xda-developers.com/android-q-notification-assistant/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<section class="emaki-custom-block emaki-custom-note"><div class="emaki-custom note" id="custom_block_0"><p><strong>更新1(美国东部时间5/8/19 @ 00:52AM):</strong>谷歌在谷歌I/O 2019发布的Android Q beta 3中移除了对NotificationAssistant API的公共访问。更多细节见下文。</p> </div></section>
<p/><p>在Android 8.0 Oreo之前，谷歌<a href="https://android.googlesource.com/platform/frameworks/base/+/android-8.0.0_r1/core/java/android/service/notification/NotificationAssistantService.java">就已经开发了</a>新的通知助手API。随着<a href="https://www.xda-developers.com/android-q-dp1-google-pixel-2-google-pixel-3/">第一个Android Q beta </a>的发布，谷歌将API公之于众，<a href="https://developer.android.com/reference/android/service/notification/NotificationAssistantService.html">也为其发布了文档</a>。在第二个Android Q测试版中，现在可以将默认的通知助手从Android Services Library系统应用程序更改为您选择的任何第三方应用程序。下面是对新API及其功能的初步介绍。</p>

  
<p>首先，如果你在3月份在谷歌Pixel上安装了Android Q beta，你可能会短暂地看到智能回复和按钮出现在每个通知中。负责插入智能回复的应用程序是默认的通知助手，尽管谷歌很快通过服务器端更新禁用了通知助手的智能回复功能。我们重新激活了该特性，向您展示该API的能力，如下图所示。</p>





<p>正如你所看到的，通知助理为来自电报应用的消息添加了上下文按钮。它或者向我显示智能回复，或者在URL的情况下，显示在适当的应用程序中打开URL的链接。根据文档，通知助理可以在发布之前或之后调整优先级或向任何现有通知添加按钮。<a href="https://www.xda-developers.com/add-mark-as-read-button-gmail/">与长期存在的通知监听器API </a>不同，通知助手在对通知进行调整时会保留现有的通知。如果通知支持内嵌回复，通知助手应用程序可以添加按钮来发送响应，这正是平台默认的通知助手所做的。由于API是通用的，通知助理可以向通知添加按钮，即使不是来自消息应用程序，也可以触发您想要的任何操作。</p>
<div class="body-img portrait"><div class="responsive-img image-expandable img-article-item-portrait" data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/04/Android-Q-Notification-Assistant-561x1024.png" data-modal-id="single-image-modal" data-modal-container-id="single-image-modal-container" data-img-caption="&quot;Changing the default Notification Assistant in Settings &amp;gt; Apps &amp;amp; notifications &amp;gt; Notifications &amp;gt; Notification Assistant. The Notification Assistant can also be programmatically changed by writing to Settings.Secure.enabled_notification_assistant.&quot;">
 
<figure> <picture>  <source media="(min-width: 1024px)" sizes="750px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/04/Android-Q-Notification-Assistant-561x1024.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 768px)" sizes="750px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/04/Android-Q-Notification-Assistant-561x1024.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 481px)" sizes="600px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/04/Android-Q-Notification-Assistant-561x1024.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 0px)" sizes="360px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/04/Android-Q-Notification-Assistant-561x1024.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <img class="lazyload" alt="Notification Assistant in Android Q" data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/04/Android-Q-Notification-Assistant-561x1024.png" src="../Images/35272302c3f9974135b87f74e3d95318.png" data-original-src="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/04/Android-Q-Notification-Assistant-561x1024.png"/> </picture> <figcaption class="body-img-caption">Changing the default Notification Assistant in Settings &gt; Apps &amp; notifications &gt; Notifications &gt; Notification Assistant. The Notification Assistant can also be programmatically changed by writing to Settings.Secure.enabled_notification_assistant.</figcaption> </figure> </div>


 </div>


<p>Tasker和AutoApps的开发者joo Dias正在更新他的auto notification plugin for Tasker，可以让你对任何通知添加自定义的快速回复。这是他制作的一个视频，展示了支持通知助理API的新自动通知版本:</p>

 
<p class="w-rich w-youtube" id="0mzJKRoPEm0">  </p>


<p>我可以看到这个API对自动化应用很有用，但我不认为很多人会改变默认的通知助手。一旦谷歌在默认的通知助手中启用上下文操作和智能回复，人们就没有理由使用第三方的通知助手了。不过，像Tasker这样的自动化应用程序的粉丝可能会发现Android Q中的这个新API很有用。</p>

 



 




<h2 id="update-1-documentation-for-the-api-has-been-removed">更新API的文档已经被删除</h2>
<p>在Google I/O 2019上发布了<a href="https://www.xda-developers.com/android-q-beta-3-released/">第三个Android Q beta </a>之后，Tasker开发者联系我，通知我Google移除了NotificationAssistant功能的公共API。检查<a href="https://developer.android.com/sdk/api_diff/q-beta3-incr/changes/pkg_android.service.notification.html"> API差异</a>证实了这一点。我们也和I/O的谷歌员工谈过，他们被告知这个API不是面向公众的。如果这个API的可用性有任何变化，我们将更新这篇文章。</p>

 </div>


</div>    
</body>
</html>