<html>
<head>
<title>[UPDATED] Google Pixel 2's "Now Playing" Feature uses AmbientSense to Minimize Battery Drain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>[更新]谷歌Pixel 2的“正在播放”功能使用AmbientSense来最小化电池消耗</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/google-pixel-2-now-playing-ambientsense-battery-drain/#0001-01-01">https://www.xda-developers.com/google-pixel-2-now-playing-ambientsense-battery-drain/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p><strong>2017年10月16日更新:</strong>谷歌已经联系我们，通知我们“正在播放”<strong>不是基于AmbientSense </strong>。我们已经回复了关于此功能的更多信息，并将根据他们的回复更新本文。</p>

  
<p><strong>2017年10月19日更新:</strong>我们已经了解了更多关于Now Playing如何工作的细节。请<a href="https://www.xda-developers.com/how-google-pixel-2-now-playing-works/">阅读这篇后续文章</a>了解更多详情。</p>

<hr/>

<p/><p>经过数月的泄露，谷歌Pixel 2和Pixel 2 XL T1正式发布。其中一个更有趣(也更有争议)的功能是“正在播放”，它可以检测背景中正在播放的音乐，并向您显示锁定屏幕上正在播放的内容。在推出的几周前，我们第一次听说了这个功能<a href="https://www.xda-developers.com/pixel-2-xl-stereo-speaker-music-recognition-portrait-mode/">，但是我们没有太多关于这个功能的信息，除了谷歌告诉我们它可以离线工作，不需要向云发送任何数据(鉴于</a><a href="https://www.xda-developers.com/google-home-mini-top-touch-bug/">最近披露的关于谷歌Home Mini </a>的消息，后者尤其重要)。在深入研究了Now Playing功能后，我们发现该功能基于一项名为<strong> AmbientSense </strong>的古老技术，该技术承诺<strong>最小的电池消耗</strong>。</p>





<p/><p><em>谷歌Pixel 2的现在播放功能</em></p>

<p>当我们分析谷歌Play商店上提供的Pixel Ambient Services应用程序时，我们第一次得到了这方面的提示。</p>

 

<p>但让我们意识到AmbientSense联系的并不是这个应用本身。相反，它是谷歌Pixel 2上预装在/system/priv-app中的APK的名称。APK被称为AmbientSense，它与研究人员M. Rossi、S. Feese、O. Amft、N. Braune、S. Martis和G. Trö ster在2013年IEEE普适计算和通信研讨会国际会议上提交的研究论文中描述的技术名称相匹配。</p>

 
<h2 id="what-is-ambientsense-and-how-does-it-relate-to-now-playing">什么是AmbientSense，它与“正在播放”有什么关系</h2>
<p>我们发现一个网页显示了这篇论文的第一页<a href="https://www.deepdyve.com/lp/institute-of-electrical-and-electronics-engineers/ambientsense-a-real-time-ambient-sound-recognition-system-for-9vWQ7kDSlD">这里</a>。根据论文摘要，AmbientSense是智能手机上的一个<strong>实时环境声音识别系统AmbientSense最有趣的是，它可以作为Android应用程序来实现，只需要访问设备的麦克风来分析环境声音。</strong></p>

<p>文中描述了两种处理模式:<strong>自治</strong>和<strong>服务器模式</strong>。只有通过将音频样本与本地存储的数据库进行比较，智能手机才会进行自主处理。相比之下，服务器模式向服务器发送音频特征，然后服务器发回分类结果。显然，谷歌的“正在播放”功能正在“自主”模式下运行AmbientSense，因为它可以离线工作，无需向谷歌发送任何信息。</p>

<p>该论文继续描述了研究小组如何在一组23种环境声音类别中测试自主和服务器模式识别下的识别性能、运行时间、CPU负载和识别延迟。他们发现AmbientSense应用程序在三星Galaxy SII上运行了13.75小时，在谷歌Nexus One上运行了12.87小时。记住这些设备有多旧；谷歌Nexus One于2010年发布，配有1400毫安时电池<strong> </strong>，与Pixel 2相比是一只恐龙。我们只能想象通过谷歌的测试，AmbientSense被提炼了多少。</p>
<p class="ad-odd"> </p>


<h2 id="is-it-possible-to-port-the-now-playing-feature-on-non-google-pixel-2-phones">有没有可能在非谷歌Pixel 2手机上移植Now Playing功能？</h2>
<p>我还不能做出任何承诺，但我认为这是可能的。我们正与XDA公认的贡献者<a href="https://forum.xda-developers.com/member.php?u=3563640">昆尼899 </a>一起努力让它发生。为了让Now Playing功能在第一代谷歌Pixel/Nexus智能手机上运行，我们认为需要做几件事:</p>

<ul> <li>像素环境服务(AmbientSense.apk)</li> <li>音频匹配数据库</li> <li>一些缺失的库</li> <li>对环境显示的系统用户界面修改</li> <li>Root访问(将上述文件推送到/system)</li> </ul>





<p/><p><em>截图鸣谢:基隆·奎因(Quinny899) </em></p>

<p>我们目前已经拥有一个名为“matcher.leveldb”的音频匹配数据库，这是一个基于谷歌<a href="https://github.com/google/leveldb"> LevelDB </a>的53MB存储库。这是AmbientSense在自主模式下进行音频匹配所依赖的数据库。</p>

<p>至于库，我们知道它们的名称以及在哪里可以找到它们，但是在我们能够得到Pixel 2来提取它之前，还需要一些时间。</p>

<p>最后，SystemUI需要修改，因为“Now Playing”功能将文本写入环境显示——这在第一代Pixel上的环境显示功能上目前是不可能的。</p>

<p>至于让它在非谷歌手机上工作，我们将在谷歌Pixel和Nexus手机上工作后进行测试。如果或当我们在使这一功能工作上取得突破性进展时，您将首先在XDA门户网站上了解到这一点——请继续关注更多内容！</p>

 </div>


</div>    
</body>
</html>