<html>
<head>
<title>Why App Updates Sometimes Break Substratum Themes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>为什么应用程序更新有时会破坏底层主题</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/why-app-updates-sometimes-break-substratum-themes/#0001-01-01">https://www.xda-developers.com/why-app-updates-sometimes-break-substratum-themes/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>这是一个常见的现象:用户将Substratum主题应用到他们的手机上，然后更新Slack、WhatsApp、Instagram或Play Store中的任何其他应用程序。突然，他们甚至无法打开这些应用程序，直到他们的主题覆盖被禁用。自从Android Oreo 的<a href="https://www.xda-developers.com/custom-themes-android-oreo-substratum/">无根底层主题发布以来，许多新的底层用户表达了他们对这个问题的体验。</a></p>

  
<p>有时在底层中重建覆盖层可以解决问题，但有时直到主题开发者再次更新主题时才会起作用。在后一种情况下，用户不得不在他们的非主题、库存状态下使用受影响的应用程序。不用说，对许多人来说，这是一次令人沮丧的经历。</p>

<p>该问题通常是多种因素综合作用的结果:编码糟糕的第三方应用程序、对所述应用程序的频繁更新实际上导致了比它们修复的问题更多的问题，以及叠加管理器服务(OMS)框架中的限制。我与几位知名的主题人进行了交谈，他们对这个问题提供了一些有价值的见解:<a href="https://forum.xda-developers.com/member.php?u=2808964">杰里米·贝克</a>，他制作了<a href="https://play.google.com/store/apps/details?id=com.jerbeck24.Spectrum">光谱</a>底层主题，以及<a href="https://play.google.com/store/apps/details?id=com.annihilation.dominationdonate">统治</a>名声的<a href="https://forum.xda-developers.com/member.php?u=4603975">大卫·威尔森</a>。</p>

<p>根据这些底层中坚分子的说法，在糟糕编码的应用领域，一些最糟糕的罪犯是最受欢迎的。WhatsApp、Instagram、Slack、脸书和Telegram是这些底层主题者在讲述这个问题时向我们列举的例子。事实上，大卫说它们是“可怕的、令人厌恶的、卑鄙的编码”应用的例子，这生动地说明了底层主题开发者在试图围绕一个共同的主题统一他们的Android体验时，在让他们的用户满意时所面临的挫折。</p>

<p>例如，一个“编码拙劣”的应用程序可能会在其colors.xml文件中将文本颜色与背景颜色绑定在一起。在本例中，如果主题将背景色更改为不再是白色，文本也会随之更改，并且会变得更难阅读(甚至无法阅读)。因此，主题必须将他们自己的布局xml文件添加到他们的主题覆盖图中，以便为文本和背景指定单独的颜色。</p>

<p>需要注意的是，新的xml文件还必须包含原应用程序同名文件中的每一个代码字符，这样就不会丢失任何功能。这是因为OMS从替代文件中读取主题文件，而应用程序本身试图做原始文件允许的一切。当应用程序被更新并且<strong>对原始的xml文件做了</strong>哪怕是最轻微的不相关的改变，覆盖将无法工作。</p>

<p>大卫是这样解释的:</p>

<blockquote>
<p/><h4>这些可笑的“开发人员”(我在描述这些小丑时不严格地使用这个术语)所做的是，他们在布局XML中使用项目，这使得我们很难在不将这些布局XML添加到我们的覆盖图中的情况下正确地对应用程序进行主题化。</h4>
<p/><h4>举个例子，让我们以WhatsApp为例，看看他们的/res/values/colors.xml中的一个项目是<color name="white"> #ffffffff </color></h4>
<p/><h4>他们在整个应用程序中使用@color/white作为文本颜色和背景颜色。这意味着，如果一个主题想要将“白色”的颜色改为深色，以使背景变暗，那么它也会使许多文本变暗，这是非常糟糕的。</h4>
<p/><h4>为了解决这个缺点，主题将把布局XML添加到它们的覆盖图中，并改变文本颜色或背景颜色，或者两者都改变，从类似Android:background = " @ color/white "变为类似Android:background = " @ * Android:color/background _ dark ",使背景变暗。</h4>
<p/><h4>这很好，使背景变暗了，但是布局xml需要包含原始布局xml中的所有内容，从几行到100多行不等。在布局xml的这些行中，可以有许多不同的资源，这些资源驻留在应用程序的原始代码中，它们被调用，例如id、尺寸、字符串、样式等。</h4>
<p/><h4>现在问题就在这里....如果一个主题制作了一个覆盖图来适应WhatsApp 2.17.323，WhatsApp更新到2.17.351(举例来说),那么如果WhatsApp以其无限的智慧决定改变覆盖图中为2.17.323制作的字符串的名称，而该字符串在2.17.351中不再存在，那么覆盖图将不会成功构建。</h4>
<p/><h4>这同样适用于覆盖图中的任何代码，该代码调用应用程序中的资源，如果该特定资源位于覆盖图设计的应用程序中，然后应用程序更新，并且该资源不再位于应用程序的代码中，则覆盖图将不会编译。</h4>
 </blockquote>
<p>这只是Substratum主题者面临的交替应用和主题更新的猫捉老鼠游戏的一个例子。当主题支持大量的第三方应用程序时，他们必须在每次主题更新时将这个游戏增加几倍。这是一个永无止境的循环，即跟上多个受支持的应用程序，并希望沮丧的用户不会在更新之间对他们的主题评分很低，因为Slack(另一个例子)在他们最喜欢的Slack支持主题的最后一次更新后的两周内向他们的应用程序推送了三次更新。</p>

 
<h2 id="what-can-you-do-about-it">你能做些什么呢？</h2>
<p>就我个人而言，我通常会等到<strong>更新到我最喜欢的主题后，再更新我使用的任何主题为</strong>的应用。也就是说，并不是每个主题都有时间不断更新，以跟上这些应用程序的更新，所以你的里程数可能会有所不同。如果你真的不能忍受使用一个未经处理的应用程序，那么等待几个小时或几天对你来说并不是什么大不了的事情。如果这是一个交易破坏者，那么你可能希望只主题化那些不太可能很快改变的系统应用程序(比如SystemUI或者Android框架)。</p>

<p>只要认识到这个问题不是因为底层本身或底层主题，当出现问题时，请不要责怪主题开发者。这就是为什么EMUI、Samsung Experience或LG UX等Android OEM版本的主题引擎不允许你对系统应用和系统UI本身进行主题化。为了享受Substratum提供的定制水平，你可能需要等待一段时间才能享受最新的应用程序更新。</p>

 </div>


</div>    
</body>
</html>