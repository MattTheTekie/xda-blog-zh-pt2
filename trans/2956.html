<html>
<head>
<title>Application Signature Verification: How It Works, How to Disable It with Xposed, and Why You Shouldn't</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>应用程序签名验证:它是如何工作的，如何用Xposed禁用它，以及为什么不应该这样做</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/application-signature-verification-how-it-works-how-to-disable-it-with-xposed-and-why-you-shouldnt/#0001-01-01">https://www.xda-developers.com/application-signature-verification-how-it-works-how-to-disable-it-with-xposed-and-why-you-shouldnt/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p>如果您曾经试图修改和重新安装系统应用程序，您可能会遇到这种或那种形式的应用程序签名检查。您可能在继续之前删除了原始应用程序，或者您为修改后的APK提供了另一个软件包名称，以便在不删除旧应用程序的情况下安装它。在这两种情况下，您还必须自己重新签名应用程序，以便首先安装它。</p>

  
<p>您可以通过暂时禁用应用程序签名检查来避免所有这些行为。但是在我们进入这篇文章的隐喻部分并告诉你如何做之前，我们先讨论一下应用程序签名检查，它们做什么，以及为什么在大多数情况下你应该<span>永远不要</span>删除它们，这是很重要的。</p>

<h3 id="android-signature-verification-basics">Android签名验证基础</h3>
<p>默认情况下，Android操作系统要求<strong>所有</strong>应用程序都要签名才能安装。用非常基本的术语来说，这意味着应用程序签名用于识别应用程序的作者(<em>即</em>验证其合法性)，以及在具有相同签名的应用程序之间建立信任关系。对于前者，您可以(在一定程度上)确信具有有效签名的应用程序来自预期的开发人员。通过后者，用相同私钥签名的应用程序可以在相同的进程中运行并共享私有数据。然后，当您安装应用程序更新时，Android操作系统会检查该签名，以确保:A)APK自签名以来未被篡改，B)应用程序的证书与当前安装版本的证书相匹配。</p>

<p>那么这一切在现实世界中对我有什么影响呢？很简单，真的。如果您从谷歌Play商店之外获得一个APK，并试图将其作为您当前安装的应用程序的更新来安装(阅读:相同的软件包名称)，操作系统将尝试验证该应用程序的证书，以确保它来自相同的初始开发者。如果证书匹配，应用程序安装将按计划进行，您的应用程序将保留其现有数据，一切都很简单。如果签名无效(表明APK已被篡改)或者证书与原始应用程序的证书不匹配，安装将会失败。如前所述，应用程序证书只有在使用用于签名前一版本的相同私钥进行签名时才会匹配。换句话说，只有当应用程序的有效签名与APK的内容相匹配时，您才能安装该应用程序；只有当应用程序的证书与应用程序早期版本的证书相匹配时，您才能安装更新。</p>

<p>[在这篇密集的文章中，有一个幽默的旁白，有一个非常公开的例子，其中一个私有应用程序签名密钥丢失或被破坏。我指的当然是谷歌自己的Authenticator应用，它在大约两年前的一次更新中收到了一次更新，将包名从<em><a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator" target="_blank">com . Google . Android . apps . Authenticator</a></em>改为<a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" target="_blank">com . Google . Android . apps . Authenticator 2</a>。由于这一更改，所有后续的验证器应用程序更新只能在新的包名称下发布-使用由新的私有签名密钥生成的新签名。]</p>

<h3 id="why-you-may-wish-to-temporarily-disable-signature-verification">为什么您可能希望(暂时)禁用签名验证</h3>
<p>现在，让我们来看看一个潜在的场景，我们可能希望暂时禁用应用程序签名验证。正如本文开头提到的，在修改现有的系统应用程序时，签名验证可能有点令人头疼。如果安装系统应用程序的修改版本，您将无法使用有效的匹配证书对应用程序进行签名。在这种情况下，您通常会首先删除现有的应用程序，然后像往常一样安装修改后的版本。您也可以禁用签名验证，但最好(也更安全)让签名验证保持启用状态，只需删除旧版本，以便安装新版本。然而，如果你试图替换的应用程序有你不希望丢失的数据，这可能会成为一个问题。当然有办法使用root权限手动保留数据，并将其移植到新版本的应用程序中，但用户也可能希望暂时禁用签名验证，然后恢复检查。或者，正如XDA资深会员<a href="http://forum.xda-developers.com/member.php?u=1369818"> mcbyte_it </a>在评论中指出的，这在应用程序开发中也是有用的。</p>

<h3 id="how-to-do-so">怎么做呢</h3>
<p>到目前为止，禁用签名验证对于几乎任何问题来说都是一个糟糕的解决方案。这是因为当这样做时，你实际上抛弃了Android的内置保护，这种保护可以确保你的应用程序没有被篡改，并且它们的更新来自最初的开发者。但是现在多亏了Xposed Framework的魔力，您可以暂时禁用签名验证，并在安装完修改后的应用程序后重新启用它。XDA资深成员<a href="http://forum.xda-developers.com/member.php?u=5064841">派勒</a>最近发布了一个这样的x曝光模块，可以精确地做到这一点，它可以按计划为所有能够运行x曝光的设备工作。这样，当您希望安装尚未正确签名的修改后的应用程序更新时，您可以简单地启用该模块，重新启动，安装修改后的应用程序更新，禁用该模块，重新启动，然后就可以随心所欲了。</p>

<p>现在您已经知道了如何暂时禁用签名验证，重申始终启用签名验证的重要性是很重要的，除非您有非常非常好的理由禁用它。因此，只有在应用您自己创建的应用程序更新时，以及在情有可原的情况下需要您这样做时，您才应该真正使用这样的工具，而不是简单地先卸载旧的应用程序。</p>

<p>注意安全，谨慎使用。</p>

 </div>


</div>    
</body>
</html>