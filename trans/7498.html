<html>
<head>
<title>Android 11 may finally bring a proper, native Wireless ADB implementation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Android 11可能最终会带来一个合适的原生无线ADB实现</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/android-11-native-wireless-adb/#0001-01-01">https://www.xda-developers.com/android-11-native-wireless-adb/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>对于Android应用开发者来说，ADB是调试应用不可或缺的工具。ADB具有生成日志、推/拉文件、侧装apk和进入shell的能力，使开发人员在使用PC时能够对测试设备进行大量控制。虽然可以通过TCP/IP*连接到您的设备来无线使用ADB，但许多开发人员可能不知道这一点，因此他们只是坚持使用有线连接。此外，如果您的设备没有静态IP地址，或者您要处理多个测试设备，无线ADB目前并不方便。最后，通过ADB在TCP/IP上进行的数据传输是以纯文本的形式进行的，所以在连接到不可信的网络时使用它并不是一个好主意。令人欣慰的是，看起来谷歌正在努力实现一个合适的、本地的(可能)安全的无线ADB，它可能会在明年的Android 11中登陆。</p>

  
<p>Google的软件工程师Joshua Duong向AOSP Gerrit 提交了多个实现该功能的提交。这些承诺<a href="https://android-review.googlesource.com/c/platform/system/core/+/1148015">为亚洲开发银行</a>创建一个WiFi服务，同时<a href="https://android-review.googlesource.com/c/platform/system/core/+/1148676">支持安全配对</a>。我们还没有发现新实现对传输中的数据进行加密的证据，但这一功能显然仍在开发中，因此可能会在以后的提交中实现。在用户端，谷歌计划在开发者选项中添加一个新的“无线调试”开关，支持通过扫描二维码或输入6位数字代码来配对设备。</p>

<section class="emaki-custom-block emaki-custom-expandable"><div class="emaki-custom expandable" id="custom_block_2"><h3 id="wireless-adb-strings-for-android-11">Android 11的无线ADB字符串</h3><pre> <code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"enable_adb_wireless"</span>&gt;</span>Wireless debugging<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"enable_adb_wireless_summary"</span>&gt;</span>Debug mode when Wi\u2011Fi is connected<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_wireless_error"</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_wireless_settings"</span>&gt;</span>Wireless debugging<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_wireless_list_empty_off"</span>&gt;</span>To see and use available devices, turn on wireless debugging<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_pair_method_qrcode_title"</span>&gt;</span>Pair device with QR code<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_pair_method_qrcode_summary"</span>&gt;</span>Pair new devices using QR code Scanner<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_pair_method_code_title"</span>&gt;</span>Pair device with pairing code<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_pair_method_code_summary"</span>&gt;</span>Pair new devices using six digit code<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_paired_devices_title"</span>&gt;</span>Paired devices<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_wireless_device_connected_summary"</span>&gt;</span>Currently connected<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_wireless_device_details_title"</span>&gt;</span>Device details<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_device_connect"</span>&gt;</span>Connect<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_device_disconnect"</span>&gt;</span>Disconnect<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_device_forget"</span>&gt;</span>Forget<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_device_mac_addr_title_format"</span>&gt;</span>Device MAC address: %s<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_wireless_connection_failed_title"</span>&gt;</span>Connection unsuccessful<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_wireless_connection_failed_message"</span>&gt;</span>Make sure %s is connected to the correct network<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"pairing_progress_category_title"</span>&gt;</span>Waiting for pairing requests..<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_pair_new_devices_title"</span>&gt;</span>Pair new devices<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_no_pairing_devices_found"</span>&gt;</span>No devices were found for pairing.<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_pairing_device_dialog_title"</span>&gt;</span>Pair with device?<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_pairing_device_dialog_pairing_code_label"</span>&gt;</span>Wi\u2011Fi pairing code<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_pairing_device_dialog_failed_title"</span>&gt;</span>Pairing unsuccessful<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_pairing_device_dialog_failed_msg"</span>&gt;</span>Make sure the device is connected to the same network.<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_wireless_verifying_qrcode_text"</span>&gt;</span>Checking QR code...<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_qrcode_pairing_device_failed_msg"</span>&gt;</span>Failed to pair the device. Either the QR code was incorrect, or the device is not connected to the same network.<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_discovery_enable_failed_title"</span>&gt;</span>Discovery unsuccessful<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"adb_discovery_failed_msg"</span>&gt;</span>Failed to enable ADB wireless discovery. Please make sure you are connected on a Wi\u2011Fi network.<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"keywords_adb_wireless"</span>&gt;</span>adb, debug, dev<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span></code> </pre> </div></section>
<p>看起来谷歌终于开始开发这项功能了，所以我希望它能在明年的Android 11中实现。然而，这些提交还没有合并，所以不能保证这个特性会出现在下一个Android版本中。我们将密切关注AOSP Gerrit，以跟踪它何时被合并，并了解更多关于该实现的信息。</p>

<p>*XDA知名开发者phhusson让我注意到，ADB <a href="https://android.googlesource.com/platform/system/core/+/master/adb/daemon/mdns.cpp">支持多播DNS </a>，因此已经可以无线连接到ADB，而不需要您设备的IP地址。然而，启动服务需要root用户，并且一次只能连接一个设备，因此这不是一个理想的解决方案。另外，它没有在任何地方公开记录，所以很少有人知道它。</p>

<hr/>

<p><em>感谢XDA知名开发者<a href="https://forum.xda-developers.com/member.php?u=5778309"> luca020400 </a>的提示，感谢<a href="https://forum.xda-developers.com/member.php?u=1915408"> phhusson </a>指出mDNS在亚行的支持！</em></p>

 </div>


</div>    
</body>
</html>