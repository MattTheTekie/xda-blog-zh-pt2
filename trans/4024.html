<html>
<head>
<title>Android Oreo Adds Commands to Programmatically Change the Lockscreen Pin, Password, or Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Android Oreo增加了以编程方式改变锁屏Pin、密码或模式的命令</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/android-oreo-programmatically-change-lockscreen-pin-password-pattern/#0001-01-01">https://www.xda-developers.com/android-oreo-programmatically-change-lockscreen-pin-password-pattern/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>从外观上看，Android Oreo拥有许多秘密改进。<a href="https://www.xda-developers.com/android-oreo-command-line-themes/">主题支持</a>，<a href="https://www.xda-developers.com/android-oreo-android-tv-notification/">安卓电视通知禁用</a>，<a href="https://www.xda-developers.com/android-oreo-lock-screen-latency/">减少解锁延迟</a>等等。所有这些都在奥利奥的承诺历史中。在官方变更日志中没有发现，但是我们发现了更多。一个这样的发现是以编程方式改变锁屏pin、密码或模式的命令。乍一看，这似乎没什么用，但是这个命令有一些有趣的应用，在向您展示如何使用它之后，我们将在下面概述这些应用。</p>

 
<section class="emaki-custom-block emaki-custom-note"><div class="emaki-custom note" id="custom_block_1"><p><strong>警告</strong>:如果你不小心的话，<strong>可能会把你自己锁在你的设备之外</strong>。你已经被警告了。这只是为了展示谷歌添加的新命令，也是为了从理论上展示你能用它做什么。<strong>如果你承担不起丢失数据的后果</strong>，或者你没有根，就不要乱来。如果您意外地将自己锁定在设备之外并拥有root权限，请删除/data/system中的以下文件:gatekeeper.pattern.key、gatekeeper.password.key以及任何其他gatekeeper文件。</p> </div></section>
<hr/>


<h2 id="changing-the-lockscreen-pin-password-or-pattern-programmatically">以编程方式更改锁屏Pin、密码或模式</h2>


<p>Android Oreo增加了一些新的调试命令来改变各种锁屏方式。在<a href="https://android.googlesource.com/platform/frameworks/base/+/android-8.0.0_r1/cmds/locksettings/src/com/android/commands/locksettings/LockSettingsCmd.java">提交</a>之后，命令如下所示。注意你需要首先使用<strong> adb shell </strong>，因为这些需要通过设备的shell来执行。这些命令用于设置锁屏的模式、pin或密码，但是如你所见，如果你需要也可以清除这些。</p>

<pre> <code class="hljs sql">locksettings <span class="hljs-keyword">set</span>-pattern <br/>locksettings <span class="hljs-keyword">set</span>-pin<br/>locksettings <span class="hljs-keyword">set</span>-<span class="hljs-keyword">password</span><br/>locksettings clear</code> </pre>
<p>这些命令的作用相当明显。模式有一点不同，但足够简单易懂。例如，对于右图所示的模式，您使用的命令如下。</p>

<p><code/></p>

<p>锁紧装置设置-模式159</p>



<p>模式是通过给每个单元格分配一个数字来设置的，所以左上角是“1”，中间是“5”，右下角是“9”。这就是我们如何达到159 -你只需将每个图案点的位置映射成一个数字，就像它是一个T9拨号器。</p>

<p>重要的是，您使用这些方法设置的任何pin、密码或模式也会更新加密密码，就像您从设置中设置它一样。有一种方法可以设置一个与锁屏不同的<a href="https://www.xda-developers.com/how-to-manually-change-your-android-encryption-password/">加密密码，但是不推荐，除非你知道你在做什么。</a></p>
<p class="ad-odd"> </p>


<h2 id="the-return-of-timepin">TimePIN的回归？</h2>
<p>在运行Android Oreo的根设备上，一个潜在的有趣用例是重新创建一个类似于<a href="https://forum.xda-developers.com/showthread.php?t=2640494"> TimePIN </a>的应用程序。TimePIN所做的是动态地将锁屏的PIN号更改为当前时间，尽管你可以通过反转数字、偏移数字等方式来混淆它。让它更加安全。例如，在时间11:56，pin将是1156。如果偏移量为-1003，则实际引脚应为0153。</p>

<p>随着Android Marshmallow的发布，当设备管理员应用程序不再能在设备上更改密码时，这种能力被打破了。但是多亏了这些新命令，应该可以在根设备上复制这个功能。</p>

<p>我们基于这一概念创建了一个概念验证Tasker配置文件！<strong>我们强烈建议不要使用它，</strong>,因为它很快就被组装在一起，不能保证它能完美地工作。如果您真的想要类似TimePIN的功能，请不要使用它。如果你是一个正在阅读这篇文章的开发者，并且认为你可以用它来制作一个应用程序，请成为我们的客人！</p>

<p>你可以从这里下载<a href="https://www.androidfilehost.com/?fid=673368273298981036"> Tasker项目。通过首先在Tasker的首选项中禁用初学者模式来导入它，然后在主屏幕中长按左下方的主页图标来调出导入选项。找到并导入. prj.xml文件。要设置它，您需要执行两个步骤:</a></p>

<ol> <li>转到Tasker中的var选项卡，将您当前的pin设置为%OldPIN</li> <li>打开“设备关闭”配置文件的任务。在“运行Shell”操作中，在命令末尾添加所需的备份pin。此外，请确保%OldPIN和您的备份PIN之间有一个空格。您的命令应该如下所示:lock settings set pin-old % old pin 3523</li> </ol>

<p>现在启用两个配置文件。</p>

<p>请记住，目前更改pin码也将更新加密pin码，所以如果你不小心，你可能会意外地无法解密手机中的数据。我们想重申，以上是我们提出的概念证明，希望更有能力的开发人员可以正确地研究这个问题。</p>

<hr/>
<p class="ad-even"> </p>


<h2 id="wrap-up">总结</h2>
<p>总的来说，这是一个有趣的发展，可能对那些想在手机上创建动态pin的人有用，或者甚至对那些需要保存手机的人有用，如果调试在计算机上被打开并被允许的话。上面的Tasker配置文件只是通过Android shell调用adb命令，因此可以像adb命令一样更改PIN。</p>

 </div>


</div>    
</body>
</html>