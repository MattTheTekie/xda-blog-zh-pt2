# 基于 DNS 的广告拦截器在最新版本的 Chrome 上被破坏了，所以这里有一个修复方法

> 原文：<https://www.xda-developers.com/fix-dns-ad-blocker-chrome/>

最近，谷歌为谷歌 Chrome 增加了对异步域名解析功能的支持，该功能旨在通过在你点击链接之前解析网站的 IP 地址来加快页面加载速度。它的工作原理是在加载时扫描网页，找到任何链接的域名，并使用域名服务器(DNS)找到与每个域名相关的 IP 地址。谷歌表示，它应该尊重用户在设备上配置的 DNS 服务器，但在某些场合，情况似乎并非如此。用户报告称，基于 DNS 的广告拦截器，如 AdHell 和 DNS66，在最新版本的 Chrome 上不再正常运行。

事实证明，谷歌并不总是尊重设备上配置的域名，并恢复到自己的域名，因此用户开始再次看到广告。据信它不会影响不使用 DNS 来阻止广告的广告拦截器，例如 NetGuard，它使用自己的防火墙。

然而，XDA 的年轻成员 [tersono](https://forum.xda-developers.com/member.php?u=8874573) 发现有一个补丁可以很容易地从应用程序内部应用。它包括编辑 Chrome 的标志来禁用异步 DNS。请注意，考虑到我们将禁用的功能是为了使网页能够更快地启动，网站加载时间可能会稍长，但这只会产生极小的影响——如果有影响的话。

* * *

## 修复谷歌浏览器中基于 DNS 的广告拦截器

### 步骤 1 -禁用 Chrome 的异步 DNS 功能

首先，你需要在你的地址栏中导航到 *chrome://flags* ，在那里你会被带到一个菜单，在那里你可以启用和禁用 chrome 中的功能。搜索“DNS”并禁用名为“异步 DNS 解析器”的功能

### 步骤 2 -清除 DNS 缓存

接下来，我们需要清除 DNS 缓存。这是因为谷歌仍将有许多不同的域名解析到他们的 IP 地址，并存储在一个文件中。这意味着切换这个功能是不够的，就好像你到目前为止面对任何广告，谷歌 Chrome 仍然会存储他们的 IP 地址。我们可以很容易地清除这个缓存，只需导航到 *chrome://net-internals* 。导航到 DNS 选项卡并点击“清除主机缓存”

### 第三步-重启 Chrome

真的很简单，只需在最近菜单中滑动 Chrome，或者在设备的应用程序设置中强制停止该应用程序，即可重启 Chrome。

* * *

## 为什么我的基于 DNS 的广告拦截器现在可以在谷歌浏览器上使用？

随着谷歌最近的改变，它将经常使用谷歌的 DNS，而不尊重任何其他正在运行的设备上的 DNS 服务。这不仅会影响基于 DNS 的广告拦截器，还会影响任何使用 VPN 的人，因为任何 DNS 请求都会泄漏。这对许多人来说是隐私问题，而不仅仅是对那些不想看广告的人来说是个麻烦。

我们通过禁用标志来禁用谷歌 Chrome 中实现的这一新功能，因此应用程序将被迫使用 Android 系统其余部分正在使用的任何 DNS 服务器。目前还不知道这一修复是否会在未来生效，因为在 Chrome 的未来版本中，当该功能默认启用时，该标志可能会被完全删除。