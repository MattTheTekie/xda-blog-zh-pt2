<html>
<head>
<title>Android 11 screen recorder may soon support recording internal audio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Android 11屏幕录制器可能很快会支持录制内部音频</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/android-11-screen-recorder-internal-audio/#0001-01-01">https://www.xda-developers.com/android-11-screen-recorder-internal-audio/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>最初的几个Android 10开发者预览版在SystemUI中有一个准系统屏幕记录器，但在发布时用户无法访问该功能。然而，随着第一个<a href="https://www.xda-developers.com/android-11-developer-preview-2-changes/"> Android 11开发者预览版</a>，屏幕记录器变得可以从快速设置磁贴中访问。现在在Android 11开发者预览版2中，屏幕记录器有一个改进的UI，通知用户记录敏感信息的可能性，并让用户选择他们是否希望记录麦克风的音频和/或在屏幕上显示轻敲。然而，目前没有办法记录设备上播放的音频，但在未来的预览版中可能会有所改变。</p>

 




<p/><p><em>从左到右:屏幕记录快速设置磁贴、屏幕记录下拉选项、新屏幕记录倒计时、新屏幕记录状态栏指示器。</em></p>

<p>Android 11中的SystemUI增加了与屏幕记录功能相关的新字符串。这些字符串表明您将能够录制“来自您设备的声音，如音乐、通话和铃声”</p>

<pre> <code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"screenrecord_device_audio_and_mic_label"</span>&gt;</span>Device audio and microphone<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"screenrecord_device_audio_description"</span>&gt;</span>Sound from your device, like music, calls, and ringtones<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br/><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"screenrecord_device_audio_label"</span>&gt;</span>Device audio<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span></code> </pre>
<p>这个文本目前在屏幕记录功能中不可见，并且在Android 11中负责屏幕记录的三个类中的任何一个中都没有记录内部设备音频的能力的指示:RecordingController、RecordingService和ScreenRecordDialog。Android 10 <a href="https://www.xda-developers.com/android-q-record-audio-monitor-device-temperature/">使得应用程序可以通过audiopaybackcapture API</a>录制来自其他应用程序<a href="https://developer.android.com/guide/topics/media/playback-capture">的音频</a>。事实上，<a href="https://www.xda-developers.com/android-10-record-internal-game-audio/">谷歌Play商店</a>上已经有第三方应用程序利用这个API让你从你的设备上捕捉视频和音频。我测试了Android 11 DP2中改进的屏幕录制功能，以确保它不支持录制内部音频，遗憾的是，它仍然只支持录制麦克风的音频。为了进行自我测试，请尝试开始屏幕录制，然后在大声说话的同时在Google相册中打开一个视频——如果您可以听到自己在屏幕录制中对着视频说话，那么很可能只是从麦克风录制音频。当然，我将这个结果与我提到的使用该API的第三方应用程序进行了比较。</p>

<p>假设谷歌确实允许你在未来的Android 11预览版中录制内部设备音频，我不确定它是否真的有用。虽然以Android 10为目标的应用程序默认允许其音频由使用AudioPlaybackCapture API的应用程序捕获，但以Android 9 Pie为目标的应用程序必须通过在其清单文件中启用allowAudioPlaybackCapture标志来选择加入。如果音频被声明为媒体、游戏或未知类型，也只能被捕获。系统应用程序，如SystemUI，也能够从应用程序录制音频，即使它们的音频采集策略设定为ALLOW_CAPTURE_BY_SYSTEM，但如果是这种情况，它们也不允许存储音频。</p>

<p>由于屏幕记录是“com.android.systemui”的一部分，而不是“com.google.android.systemui”，这意味着该功能很可能会成为AOSP的一部分。因此，其他智能手机制造商的设备一旦升级到Android 11，就应该能够享受这一功能，当然，除非OEM已经有了类似或更好的屏幕记录器。很多OEM屏幕录像机让你改变录制的分辨率、比特率和帧速率，所以谷歌的仍然是相当准系统，即使他们增加了录制内部设备音频的能力。</p>

 </div>


</div>    
</body>
</html>