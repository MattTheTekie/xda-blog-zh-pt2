# 如何在晚上自动将 Gboard 的主题改为黑暗模式

> 原文：<https://www.xda-developers.com/automatically-change-gboard-theme-dark-mode-at-night/>

在 XDA 开发者论坛上，人们仍然喜欢扎根于他们的手机的一个最受欢迎的原因是，他们可以随心所欲地给他们的手机添加主题。多亏了 Substratum，大多数系统 UI 元素和许多应用程序都可以主题化。如果你最喜欢的应用程序没有底层主题，那么在某些情况下，你可以寻找那些提供主题功能的应用程序的替代版本。虽然谷歌的键盘应用程序 Gboard 确实提供了改变主题的功能，但许多人失望地发现，没有办法根据一天中的时间自动改变主题。也许你喜欢在白天使用“材质光”主题，但是想在晚上切换到“材质暗”主题，这样你就不会被它的亮度所蒙蔽。在这种情况下，这里有一个关于如何根据你想要的任何标准自动改变 Gboard 主题的教程。

*Gboard 单色主题-目前共有 17 种*

* * *

### 要求

Tasker 是我用来完成这个设置的自动化应用程序。你可以免费使用其他免费的自动化应用程序，但 Tasker 是我多年来一直使用的应用程序，所以它是我唯一一个足够熟悉来制作像这样的脚本的程序。

至于需要 root 访问，不幸的是，这是无缝改变 Gboard 主题且无需用户干预的唯一方法。由于 Gboard 没有提供任何在主题之间快速切换的意图或快捷方式，我们需要 root 访问权限，这样我们就可以修改位于/data/data 文件夹中的 Gboard 首选项文件。

* * *

### 辅导的

这个脚本有两个部分。第一个包括创建一个 Tasker Profile——一个时间上下文，当它被满足时将触发我们的 Tasker 任务来改变我们的 Gboard 主题。第二个，正如您可以猜到的，是 Tasker 任务本身，当概要文件被激活时，它将被调用。我将一步一步地指导您创建 Tasker 配置文件，但是我将给出关于创建 Tasker 任务的不太详细的指导，因为它更高级一些。我建议当你到达 Tasker 任务部分时，你只需导入我将在下面链接的任务。

[**从 AndroidFileHost** 下载 Gboard 变色任务](https://www.androidfilehost.com/?fid=673368273298954408)

下载上述 Tasker 任务，并将. tsk.xml 文件保存在内部存储的任意位置。然后打开 Tasker，点击顶部的“任务”标签。一旦你进入任务标签，长按“任务”直到你看到一个“导入”的选项点击导入并查找您之前保存的. tsk.xml 文件。选择它以将其导入。您现在应该看到一个名为“Gboard 颜色改变”的任务，带有 Gboard 图标。(注意:如果你从你的应用抽屉中隐藏了 Gboard 图标，那么这个图标可能会显示为一个错误。不过，您可以放心地忽略这一点。)

接下来，我将指导您创建概要文件，它将利用我们刚刚导入的这个任务。

1.  打开 Tasker，点击右下角的 **+** 按钮。
2.  选择**时间**上下文。
3.  对于“从”,选择您希望 Gboard 深色主题激活的开始时间。对于“到”,选择您希望 Gboard Light 主题开始活跃的结束时间。例如，我选择了从晚上 7:00 到早上 7:00，这意味着我的黑暗主题在晚上 7:00 到早上 7:00 之间有效，而光明主题在早上 7:01 到 6:59 之间有效。
4.  点击 back，Tasker 将要求您要么附加一个任务，要么创建一个新任务。即使您导入了 Gboard 颜色更改任务，**也不要选择它**。相反，创建一个**新任务**。
5.  给概要文件起一个描述性的名字。我把它命名为“改变 Gboard 之夜主题”
6.  进入任务编辑界面后，按下底部中间的 **+** 按钮，添加一个新动作。
7.  选择**变量**->-**变量设置**。名称:**%主题**。至:**材质 _ 深色**。
8.  添加另一个操作。选择**任务**->T2 执行任务。对于名称，点击放大镜，现在选择 **Gboard 颜色变化**。在参数 1 下，输入**%主题**。

现在退出回到 Tasker 的主屏幕。你已经完成了一半的设置，现在 Tasker 将在晚上 7:00 或者你设置的任何时间触发，并将 Gboard 的主题改为黑暗材质。现在我们需要完成第二部分，所以 Tasker 会在早上 7:00 或者你设定的任何时间将主题改回材质光。

1.  长按刚刚创建的任务。您应该会看到一个选项来选择**添加退出任务**。选择那个选项。
2.  无需命名任务，只需再次进入任务编辑屏幕。
3.  添加一个操作。**变量**->-**变量组**。名称:**%主题**。到:**材质 _ 灯光**。
4.  添加另一个操作。**任务** - > **执行任务**。名称: **Gboard 变色**。在参数 1 下，输入**%主题**。

你完了！Tasker 现在会根据一天中的时间自动改变 Gboard 的主题。请注意，如果您还没有授予 Tasker root 访问权限，它会在该任务首次运行时要求您授予它 root 访问权限。通过进入 Gboard 颜色更改任务，长按 Action #2，然后按左下角的 run 键，可以强制它现在就请求 root 访问权限。

* * *

### 换成其他颜色，或者在其他环境下

使用我的任务，你可以将 Gboard 的主题更改为其他颜色，也可以基于其他上下文。您所要做的就是用不同的上下文(比如一个应用程序上下文)创建新的概要文件，然后添加我在上面定义的两个动作(变量集和执行任务)。如果您想要除“材质暗”或“材质亮”之外的颜色，以下是与您拥有的 17 种颜色选项相对应的所有字符串的列表:

*   材质 _ 深色
*   材质 _ 灯光
*   谷歌蓝光
*   谷歌 _ 蓝色 _ 深色
*   colorref
*   颜色 _ 绿色
*   颜色 _ 青色
*   颜色 _ 蓝色
*   颜色 _ 青色
*   颜色 _ 深紫色
*   颜色 _ 粉色
*   颜色 _ 浅 _ 粉色
*   颜色 _ 棕色
*   颜色 _ 蓝色 _ 灰色
*   颜色 _ 黑色
*   全息蓝
*   全息白

将 **%theme** 变量设置为这些字符串之一，以便将 Gboard 的主题设置为该颜色。

* * *

### 这是如何工作的解释

如果你想知道这是如何工作的，这里有一个简单的解释。使用 root，我复制了位于/data/data/com . Google . Android . input method . Latin/shared _ prefs/named com . Google . Android . input method . Latin _ preferences . XML 中的 Gboard 使用的首选项文件。我使用%theme 参数并替换已经设置好的颜色，然后将修改后的文件推回到 Gboard 的/data 文件夹中，然后关闭 Gboard 应用程序。Boom -主题自动改变。

* * *

本教程到此为止！关注我们的[教程类别](https://www.xda-developers.com/category/tutorials/)获取更多类似的内容。谢谢，请继续关注我们的下一个教程！