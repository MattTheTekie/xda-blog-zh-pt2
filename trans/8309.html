<html>
<head>
<title>Android 11's power menu may turn into control center for home automation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Android 11的电源菜单可能变成家庭自动化的控制中心</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/google-android-11-power-menu-control-center-shortcuts/#0001-01-01">https://www.xda-developers.com/google-android-11-power-menu-control-center-shortcuts/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<section class="emaki-custom-block emaki-custom-note"><div class="emaki-custom note" id="custom_block_0"><p><strong>更新2(美国东部时间2/20/2020 @ 7:00PM):</strong>Kieron Quinn向我们发送了一张截图，显示了更明确的证据，表明这个控制API旨在在Android 11电源菜单中显示家庭自动化控制。</p><p><strong>更新1(美国东部时间2/20/2020 @下午5:30):</strong>我们发现了可能解释谷歌为什么致力于这项功能的证据:提供家庭自动化控制的快速访问！更多信息如下。原文如下。</p> </div></section>
<p/><p>当谷歌昨天发布安卓11开发者预览版1时，我们在最初的动手操作中发现<a href="https://www.xda-developers.com/android-11-developer-preview-changes/">主要是表层变化</a>。在谷歌I/O 2020 发布公告<a href="https://www.xda-developers.com/google-i-o-2020-may-12-14/">后，谷歌似乎将再次把大部分用户界面变化和新功能留给</a><a href="https://www.xda-developers.com/android-11-2-more-developer-previews-3-betas-before-stable/">公共测试版</a>。然而，我们发现了几个正在开发中的用户界面调整，表明2020年安卓操作系统将发生巨大的变化。我们发现谷歌可能在快速设置面板<a href="https://www.xda-developers.com/custom-rom-throwback-android-11-tests-separating-quick-settings-panel-from-notification-shade/">中放置</a><a href="https://www.xda-developers.com/android-11-music-player-quick-settings-panel/">媒体播放器，将通知阴影</a>从快速设置面板中分离出来，现在，我们发现谷歌可能正在调整电源菜单，以适应用户选择的家庭自动化快捷方式。</p>

  
<p>在我运行Android 11 DP1的Pixel 2 XL上，我设法为长按电源菜单激活了一个新的UI，如下所示。现有的电源菜单图标，包括紧急、截图、重启和关机，都转移到了屏幕的顶部，在下面留下了大量的空白空间。此外，图标上方会出现一个新的“主页”文本。图标向上移动表明谷歌计划添加<em>一些东西</em>来填补空白，我们最初认为这是为现在Android 11中的<a href="https://www.xda-developers.com/android-10-11-developer-preview-quick-access-wallet-google-pay/">新快速访问钱包功能</a>做准备。然而,“Home”文本的出现提出了一个问题，为什么它会在那里——谷歌会不会正在为不同种类的操作在power菜单中创建类别？</p>



<p>深入研究代码，我们发现SystemUIGoogle中有多个类与一个名为“控件”的特性相关。该代码建议用户可以将快捷方式设置为“收藏夹”以显示在该菜单中，这些快捷方式由系统存储在一个XML文件中，其中包含快捷方式的id、标题、类型和组件。SystemUIGoogle中有与控件相关的新活动:ControlsFavoritingActivity和ControlsProviderSelectorActivity。启动前者会导致权限拒绝，因为它是未报告的活动，并且我们没有root访问权限，而启动后者会出现以下UI:</p>



<p>不幸的是，这个用户界面目前是空的，所以我们不能添加我们自己喜欢的快捷方式到电源菜单。我们发现了对一个名为“android . permission . bind _ CONTROLS”的新权限和一个名为“Android . service . CONTROLS . CONTROLS providerservice”的新服务的引用，这表明第三方应用程序将能够创建一个Android系统可以绑定并显示在该列表中的“CONTROLS”服务，就像快速设置磁贴一样。没有支持“控件”API的第三方应用程序可以解释为什么上面显示的活动目前是空的。</p>

<p>看起来谷歌正在从iOS控制中心获得线索，尽管我们不完全确定谷歌为什么首先要开发这个功能，因为快速设置面板已经存在，并且可以填充自定义快捷键。我们将跟踪这项功能的发展，以防在未来的Android 11开发者预览版中有任何变化。</p>

<p/><p><strong> <a href="https://xda-developers.com/tag/android-11">安卓11 XDA新闻</a> </strong></p>

 
<h2 id="update-1-possibly-for-home-automation-controls">更新1:可能用于家庭自动化控制</h2>
<p>发表这篇文章后，XDA认识到开发人员Quinny899向我们通报了他自己的发现。Android 11中更新的framework.jar揭示了什么样的快捷方式可能会出现在电源菜单的“控制”菜单中。他发现了在控制服务中被接受为“有效设备类型”的设备类型列表。以下是完整列表:</p>

<section class="emaki-custom-block emaki-custom-expandable"><div class="emaki-custom expandable" id="custom_block_11"><h3 id="supported-home-automation-device-types-for-android-11-controls-api">Android 11控件API支持的家庭自动化设备类型</h3><pre> <code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> NUM_CONCRETE_TYPES = <span class="hljs-number">51</span>;<br/><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> NUM_GENERIC_TYPES = <span class="hljs-number">7</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_AC_HEATER = <span class="hljs-number">1</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_AC_UNIT = <span class="hljs-number">2</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_AIR_FRESHENER = <span class="hljs-number">3</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_AIR_PURIFIER = <span class="hljs-number">4</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_AWNING = <span class="hljs-number">33</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_BLINDS = <span class="hljs-number">34</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_CAMERA = <span class="hljs-number">50</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_CLOSET = <span class="hljs-number">35</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_COFFEE_MAKER = <span class="hljs-number">5</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_CURTAIN = <span class="hljs-number">36</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_DEHUMIDIFIER = <span class="hljs-number">6</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_DISHWASHER = <span class="hljs-number">24</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_DISPLAY = <span class="hljs-number">7</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_DOOR = <span class="hljs-number">37</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_DOORBELL = <span class="hljs-number">51</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_DRAWER = <span class="hljs-number">38</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_DRYER = <span class="hljs-number">25</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_FAN = <span class="hljs-number">8</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_GARAGE = <span class="hljs-number">39</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_GATE = <span class="hljs-number">40</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_GENERIC_ARM_DISARM = -<span class="hljs-number">5</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_GENERIC_LOCK_UNLOCK = -<span class="hljs-number">4</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_GENERIC_ON_OFF = -<span class="hljs-number">1</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_GENERIC_OPEN_CLOSE = -<span class="hljs-number">3</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_GENERIC_START_STOP = -<span class="hljs-number">2</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_GENERIC_TEMP_SETTING = -<span class="hljs-number">6</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_GENERIC_VIEWSTREAM = -<span class="hljs-number">7</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_HEATER = <span class="hljs-number">0x2F</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_HOOD = <span class="hljs-number">10</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_HUMIDIFIER = <span class="hljs-number">11</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_KETTLE = <span class="hljs-number">12</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_LIGHT = <span class="hljs-number">13</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_LOCK = <span class="hljs-number">45</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_MICROWAVE = <span class="hljs-number">14</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_MOP = <span class="hljs-number">26</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_MOWER = <span class="hljs-number">27</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_MULTICOOKER = <span class="hljs-number">28</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_OUTLET = <span class="hljs-number">15</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_PERGOLA = <span class="hljs-number">41</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_RADIATOR = <span class="hljs-number">16</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_REFRIGERATOR = <span class="hljs-number">0x30</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_REMOTE_CONTROL = <span class="hljs-number">17</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_SECURITY_SYSTEM = <span class="hljs-number">46</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_SET_TOP = <span class="hljs-number">18</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_SHOWER = <span class="hljs-number">29</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_SHUTTER = <span class="hljs-number">42</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_SPRINKLER = <span class="hljs-number">30</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_STANDMIXER = <span class="hljs-number">19</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_STYLER = <span class="hljs-number">20</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_SWITCH = <span class="hljs-number">21</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_THERMOSTAT = <span class="hljs-number">49</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_TV = <span class="hljs-number">22</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_UNKNOWN = <span class="hljs-number">0</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_VACUUM = <span class="hljs-number">0x20</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_VALVE = <span class="hljs-number">44</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_WASHER = <span class="hljs-number">0x1F</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_WATER_HEATER = <span class="hljs-number">23</span>;<br/><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> TYPE_WINDOW = <span class="hljs-number">43</span>;</code> </pre> </div></section>
<p>有可能谷歌会允许你通过Android 11中的电源菜单来控制你的智能家电。这个解释在“home”文本出现在顶部的上下文中是有意义的。如果我们对这个功能有了更多的了解，或者我们设法让我们自己的快捷方式出现在菜单中，我们会及时更新。</p>
<p class="ad-odd"> </p>


<h2 id="update-2-controls-provider-hacked-to-show-a-custom-lightbulb-app">更新2:控件提供者被黑客攻击显示了一个定制的“灯泡”应用程序</h2>
<p>这里有一个由开发者Kieron Quinn提供的截图，展示了他在Android 11的“控件提供者”活动中组装并设法出现的快速“灯泡”应用程序。点击图标会导致系统崩溃。如果我们能让它继续工作，我们会更新这篇文章。</p>


</div>


</div>    
</body>
</html>