# Android 7.1 牛轧糖的非官方公开框架

> 原文：<https://www.xda-developers.com/flashable-xposed-framework-android-nougat/>

经过一个月又一个月的等待，我们终于得到了对牛轧糖 rom 的 Xposed 框架支持(尽管是非正式的)。感谢我们自己的 XDA 论坛上的一些有才华的开发者，你现在可以通过一个 flash zip 在 Android Nougat ROM 上安装 Xposed 框架。

到目前为止，牛轧糖的未来看起来有点不稳定。rovo 89-x posed 框架背后的开发者- [在一个多星期前](https://www.xda-developers.com/xposed-android-nougat-support/)提供了对 Android 牛轧糖支持的更新。Rovo89 本质上说，为了让 Xposed 在牛轧糖上正常工作，还有很多工作要做，我们必须耐心等待。

谢天谢地，对于我们这些一直在焦急等待权宜之计的人来说，看起来我们找到了一个临时的解决方案。PurifyOS 团队获得了开发者 ab force T1 正在开发的艺术模块(以及今天早些时候发布的 T2 T3)，并通过 flash zip 将其安装在其他定制的 ROM 上(而不是在编译 ROM 时实现)。

目前有三个版本可供不同平台使用，包括 x 曝光 SDK25 **ARM64** ，x 曝光 SDK25 **ARM** ，x 曝光 SDK 25**x**86。PurifyOS 团队已经在运行基于 Android 7.1 的 OxygenOS 的 OnePlus 3T 上测试了这一新版本的 Xposed，但它应该可以在其他运行 Android Nougat 的手机上工作，用户已经报告他们已经能够成功地在不同的 rom 和设备上安装它。例如，一些 OnePlus 5 的用户报告说它工作正常(这并不奇怪，因为它在 OnePlus 3T 上运行得很好)，但一名为三星 Galaxy S6 运行 based ROM 的用户也报告说它对他们有效。

会有一些奇怪的问题需要解决，而且到目前为止，并不是每个人都设法让它工作，一些用户经历过强制关闭和其他奇怪的事情。然而，即使是这样，如果自从上一版本的 Android OS 发布以来，你一直在等待牛轧糖上 Xposed 的到来，你仍然可以尝试一下。并非所有现有的 Xposed 框架模块都能立即工作，但据报道，一些真正受欢迎的模块(如 Amplify)正在工作。

如果您不确定您的设备或 ROM 是否受支持，请确保定期备份并在尝试之前仔细阅读该主题。最后，在留下重复问题之前，一定要使用“搜索”功能。Android O 可能就在眼前，但正如俗话所说，“迟到总比不到好。”此外，许多用户在相当长的一段时间内都不会在他们的设备上看到 Android O，所以 Xposed 应该是一个不错的选择，这样你就不会感到被落下了。

* * *

### 更新:Rovo89 的回应

Xposed 框架背后的最初开发者，XDA 资深公认开发者 [rovo89](https://forum.xda-developers.com/member.php?u=4419114) ，已经在 Github 上回应了他对这些最近发展的想法。

> #### 从我的经验来看，我可以告诉你，做好基础工作并不难，但是做好细节却要花很多时间。这就像是 80-20 法则，只不过更像是 95-5 左右。
> 
> #### 我为以前版本设计的挂钩方法相当稳定，也可以应用于新版本。我假设你需要大部分时间来检查所有调用`IsProxyMethod()`和`IsDirect()`的地方，并决定它们是否应该考虑新的方法修饰符(即是否使用参数`true`)。如果你没有这样做，你可能会错过一些新推出这种电话的地方。对于像`InstallStubsForMethod()`这样的方法来说也是一样，即使当它们被挂钩的方法调用时，也需要对原始的原始方法进行操作。你需要查找更多与此相关的地方。这仍然在几天的范围内，但是如果你错过了这样做，你可能会看到模糊的崩溃或行为不端，这是非常难以调试的。
> 
> #### 除此之外，你还采用了一种方法，在这种方法中，钩子只适用于完全从零开始编译的 rom。库存的 rom，甚至大多数定制的 rom(不包括你的端口，而建设)以及任何应用程序的设备可能已经编译过。所以你不得不用一个运行特殊 ROM 的擦除设备重新开始。如果没有，那么优化(比如内联)可能会阻止一个方法被调用，因此钩子就不起作用了。最糟糕的是，确切的行为将取决于 ROM，甚至用户如何使用设备(现在应用程序是基于配置文件编译的)。模块会随机失败，模块开发人员会怀疑他们做错了什么(答案:没有)。如果没有满足所有的先决条件，那么它就是一个相当不可靠的 API。想象一下 Google 发布了一个更新，其中按钮的`OnClickListener`有时不被调用，除非你从头编译你的 ROM...对我个人来说，这是一个很大的限制。

他继续说道:

> #### 用这个发布 flashable ZIPs 根本没有意义，因为这个端口仅仅是为了重新编译一个 ROM。
> 
> 正如我所担心的，**没有一个警告说这是一个不完整的端口，经常无法履行 API 合同**。😠这对开发者和用户来说是不好的，他们至少应该知道它是不完整的，这样他们才能决定他们是否想要支持/使用它。没有一个大大的警告，我绝不敢做那样的事情。事实上，由于我是一个完美主义者，我根本不会发表一个不完整的版本，可靠性对我来说非常重要。
> 
> #### 我刚刚检查了我的 Git 日志，我已经在 10 月份准备好了基本的挂钩(如在这个端口中)。从那以后，我一直致力于消除这些限制。为了使它在预编译的 rom 上更加可靠，我也可以移植重新编译部分，但是这仍然不理想。正如上面所解释的，我们现在有了 JIT，它允许我们保留所有的优化，只使直接受挂钩影响的方法无效(并且可能重新编译)。这非常具有挑战性，因为它不仅仅是复制和粘贴。在此之前，我不会发表任何东西。我知道 9 个月对我来说是很长的一段时间，但是，这是我的业余时间，例如，由于要搬到一个新的公寓，我有几个月不能工作。)在所有，只有非常有限的时间。

我们应该明确的是，这些最近的发展并不是你们都知道和喜欢的真正的“x 暴露”,但从功能上来说，它们允许你现在就在 Android Nougat 上使用一些 x 暴露的框架模块。我们不会责怪你没有等待 Android Nougat 的 Xposed 框架的正式、更稳定、更兼容的版本，但我们想澄清的是，这一迭代只是一种权宜之计，旨在满足一些用户的需求。未来可能不会以这种方式处理 Xposed。

* * *

[**在 XDA 论坛**](https://forum.xda-developers.com/xposed/xposed-android-nougat-sdk-25-arm64-t3639221) 下载牛轧糖的非官方公开框架