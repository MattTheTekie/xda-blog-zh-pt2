# ElementalX 内核第 1 部分开发者 Flar2 访谈

> 原文：<https://www.xda-developers.com/flar2-elementalx-interview-part-1/>

# ElementalX 内核开发人员 Flar2 访谈第 1 部分:起源、内核开发和 Android 变化

我们采访了 ElementalX 内核的开发者 flar2，并深入探讨了他的个人生活、开发工作等话题。

我最近采访了 flar2，他是著名的 ElementalX 内核和他更受欢迎的 ElementalX 内核管理器应用程序的幕后人员。他已经为众多设备发布了他的内核版本，包括一加和 Nexus 设备。

在这一部分，我们询问 flar2 对 Android 性能瓶颈的看法，以及更多关于他的个人生活！你可以点击查看本次采访的第二部分[。](http://xda-developers.com/flar2-elementalx-interview-part-2)

* * *

嘿，你好！在我们开始讨论问题之前，首先介绍一下你自己。

> #### 我叫亚伦·塞加特，也叫弗拉尔。大多数人都知道我是 ElementalX 内核的开发者。我也有几个应用程序。

你以前有过计算机和开发方面的经验吗？比如计算机科学学位什么的？

> #### 我很小的时候就开始接触电脑。我的第一台电脑是德州仪器 TI-99/4A。我学会了如何用 BASIC 编程，把我的程序保存在盒式磁带上(是的，我老了)。后来我们家买了一台 286 的 IBM 克隆机，那时我远离了编码，因为那是在互联网广为人知之前，我没有任何资源，甚至不认识任何有电脑的人。我在大学开始学习计算机科学，但是第一年就被退学了。我从来没有真正去上课，因为我太忙于娱乐和与我的乐队演出。后来我重返校园，获得了社会学博士学位。在学生时代，我对 Linux 和开放源码产生了兴趣，但是从来没有认真地进行过编程。我在这里或那里贡献了一些小的东西，但大部分只是为我自己的目的制作脚本和小程序。我大概在 2002 年左右构建了我的第一个 Linux 内核。当时，我没有编写自己的代码，只是尝试不同的补丁和构建选项来提高性能。我更热衷于构建计算机、超频以及让硬件做一些它不应该做的事情。

**除了 Android 应用开发和内核开发之外，还有其他开发让你感兴趣吗？**

> #### 不完全是，我已经找到了好的工具，几乎可以满足我在电脑上做的所有事情。我开始为 Android 开发内核和应用程序的原因是，我觉得现有工具需要某些功能和改进空间。例如，我制作了按钮映射器，因为我想让三星手机上的 home 键做更多的事情，我不喜欢颠倒的 back 和 recents 键。我做了 DevCheck，因为其他系统信息应用程序没有以清晰简洁的方式显示我想看的信息。ElementalX kernel 增加了新的硬件特性，EX Kernel Manager 控制这些特性，并增加了一些我用来简化开发的工具。我喜欢解决问题，对事物进行逆向工程或给手机添加新的硬件功能是一个有趣的挑战。

**你是如何接触到 Android 开发的，具体来说是内核开发？**

> #### 我一直很讨厌手机，抗拒了很久。我的妻子和我共用一个基本的翻盖手机和一个主要用于紧急情况的最小计划。2012 年，我们家发生了一场火灾，我们在外面呆了将近三个月。我们所有的公用设施都被切断了，我们决定不重新连接我们的座机，所以我们买了一部智能手机，我想是一部 LG P-什么的。我意识到它就像一台迷你电脑，并决定我需要自己的迷你电脑，所以我买了一台 HTC One V。
> 
> #### 由于我修补和修改了几乎所有的东西，我立即发现了 XDA，并发现 Android 手机不仅可以运行 Linux，还可以超频。我是 Linux 用户很久了，所以我叉了一个内核，就被钩住了。我很快买了一台便宜的宏碁平板电脑，开始摆弄硬件和内核，因为我想让它有 USB OTG。结果是硬件没有能力，但这就是我如何开始了解更多关于移动硬件的知识。我从来没有公开发布过 LG、宏碁平板电脑或 One V 的内核，而是为每一个都构建了自己的内核，并安装了定制的 rom，这在当时是必要的，因为 Android 尚未成熟。
> 
> #### 我很快就买不下 One V 了，换了一台 HTC One XL，这时候 ElementalX 诞生了。

ElementalX 最初的目标是什么，最近几年有什么变化？

> #### ElementalX 的目标一直是在不损害稳定性或性能的情况下添加有用的硬件功能，并发布人们可以依赖的东西。我总是把稳定性放在第一位，因为我需要我的手机可靠。没有随机重启或相机不工作之类的事情。这些年来，这一理念一直保持不变。我让事情变得简单，并添加我觉得有用的硬件功能。像唤醒手势，高亮度模式，振动调节，声音控制，支持更多的文件系统，操纵杆等。
> 
> #### 我努力让我的内核保持最新，易于安装，尽可能广泛兼容。一些用户对我没有从 CAF 或上游 Linux 添加很多补丁感到失望，但我的主要目标是交付一个非常稳定的产品，没有奇怪的问题。我的许多用户都不是在 XDA 上发帖很多的人，他们是通过定制内核满足特定需求的超级用户，或者是偶尔喜欢修补硬件但不是铁杆 flash 迷的人。我希望不了解最新 Android 开发的人能够毫无问题地使用 ElementalX。
> 
> #### 有很多其他内核在试验上游补丁。在 ElementalX 中，我使用了一组精心挑选的补丁和优化。在我 Android 之外的职业生涯中，我衡量难以衡量的事情，并使用证据来制定政策和提供建议。我将同样的原则应用于内核开发，除非有可衡量的好处，否则一般不使用补丁。EX 内核管理器中的电池监控器就是一个例子。它提供了一种客观测量电池调整和内核变化的方法。DevCheck 中的浮动监视器是我用于开发的另一个工具，主要用于在不同的用例中监控 CPU 频率和温度，如游戏、观看视频或网页浏览。

过去几年 Android 的变化对你的工作有什么影响？

> #### 有时很难处理这么多的安全变化，但我理解它们。如果我没看错的话，Android 现在比 Windows 应用更广泛，这让它成为了众矢之的。坏人会利用他们能利用的任何角度来剥削 Android 用户。
> 
> #### 防止修改系统分区显然是保护设备完整性的关键。我记得当 HTC 在 2012 年或 2013 年开始这样做时，这似乎是世界末日。当时，root 需要写入/system，编辑 build.prop，安装特权应用程序，删除膨胀软件和几乎所有流行的 mod。当时的许多定制都涉及到像 deodexing 和修改框架这样的事情。很长一段时间，HTC 都没有提供内核源代码，所以我做了一个内核模块来禁用股票内核中的系统写保护，为此我第一次作为一名开发人员而出名。但随着时间的推移，像 verity 这样的保护成为 Android 的标准部分，它迫使创新和更好的解决方案，如 Chainfire 的无系统根，现在有 Magisk 可以无系统地做各种事情。
> 
> #### 另一个大问题是 SELinux，它导致大量应用程序停止工作。许多用户讨厌它，直到今天仍然有人在许可模式下运行 SELinux，这是一个非常糟糕的想法。我认为 SELinux 是 Android 最重要的安全特性。举个例子说明 SELinux 的重要性，我刚拿到 Pixel XL 的时候，还没有 root 可用，但是脏牛漏洞利用正在制造新闻。我渴望开始内核开发，这意味着搜索或修改 sysfs 文件，这需要 root。我编译了一个 Dirty Cow 概念验证，并且能够以 root 身份运行命令，但是 SELinux 阻止我做任何有趣的事情。我不得不修改 boot.img 来允许 SELinux。我也许可以在不修改内核的情况下获得完全访问权限，但这需要花费很多很多时间。总之，让 SELinux 来执行吧，这是抵御恶意软件的主要防线。学习使用 sepolicy-inject 根据需要更改特定的策略。
> 
> #### 当 Nougat 出现时，最初几乎所有的/sys 和/proc 对用户应用程序都是不可见的。进行更改总是需要 Root，但是突然之间，只需要 root 就可以读取/sys 和/proc。在这些文件系统中肯定有可以用来利用设备的信息，所以有必要添加限制。但是也有很多用户应该能够看到的信息。为什么需要 root 查看当前的 i/o 调度程序、GPU 频率或面板硬件类型？我不得不对 DevCheck 做了很多修改来处理这个问题，很多用户对为什么更新到 Nougat 后信息不再可用感到困惑。最终，取消了对 sysfs 路径的一些限制。
> 
> #### 除此之外，从应用程序开发的角度来看，我喜欢 Android 的大多数 API 变化，即使它们迫使我对我的应用程序进行大量的更改。这些变化通常是向好的方向发展。

* * *

[**看看这次采访的第二部分吧！**](http://xda-developers.com/flar2-elementalx-interview-part-2)