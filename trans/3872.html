<html>
<head>
<title>Make your own Clipboard Manager with Tasker and AutoTools</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>用Tasker和AutoTools制作你自己的剪贴板管理器</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/make-clipboard-manager-with-tasker-autotools/#0001-01-01">https://www.xda-developers.com/make-clipboard-manager-with-tasker-autotools/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>一段时间以来，我一直试图解决手机上没有剪贴板管理器的问题。有第三方应用程序和一些内置剪贴板管理器的键盘，但我个人发现许多第三方键盘很慢而且笨重，因此我通常坚持使用Gboard。此外，如果可以的话，我通常会尽量避免安装专用于一个目的的新应用程序。这是我自己的剪贴板管理器在Tasker中发挥作用的地方！</p>

 
<hr/>


<h2 id="tasker---clipboard-manager">Tasker -剪贴板管理器</h2>


<p>多亏了新的AutoTools WebScreens操作，我终于可以创建自己的剪贴板管理器了，它可以快速、方便地访问。Tasker剪贴板管理器项目可以存储多达9个剪辑，在添加新剪辑时替换旧剪辑。我挑选了9个项目来存储，因为它们非常适合我的屏幕，但通过一些简单的调整，你可以设置存储剪贴板的数量。</p>

<p>虽然你<em>可以</em>有一个浮动的动作按钮(FAB)来拉起剪贴板，但我更喜欢用滑动手势来代替。为了缓解潜在的性能问题，我已经设置了Tasker剪贴板管理器项目，以便在您的手机内存中占用非常小的空间，因为配置文件只能限于某些应用程序。在下面的视频中，你可以看到我将剪贴板菜单只链接到Google+和Pages Manager应用程序。但是请记住，每当您对当前存储的剪辑进行更改时，剪辑的收集都会在后台进行。</p>

<p>如果您使用的是<a href="https://play.google.com/store/apps/details?id=com.joaomgcd.join"> Join </a>应用程序，这个项目应该不会干扰它。但是通过使用Join，您还可以与其他设备共享我的项目中的选定剪辑。对于这个项目，我使用的是AutoTools的WebScreens操作，所以要确保你已经安装了插件。其他的都只是股票Tasker。对剪贴板管理器的访问是由应用程序本身驱动的。因此，当我看YouTube或玩游戏时，我不需要激活这个配置文件，所以我的配置文件被设置为只在需要它的应用程序上激活。</p>

<p>这里有一个展示我的作品的视频:</p>

 
<p class="w-rich w-youtube" id="ZKPy-46sjHc">  </p>


<p>如果你想按原样导入我的项目，那么你可以点击下面的链接，这将带你到AndroidFileHost下载页面。</p>

<p/><p><a href="https://www.androidfilehost.com/?fid=673368273298969744"> <strong>下载Tasker剪贴板管理器项目</strong> </a></p>

<p>下载上面的ZIP文件，并将内容解压缩到您的Android设备的内部存储中。打开Tasker，在首选项中禁用“初学者模式”。然后，回到Tasker的主页，长按左下角的home图标。您将看到一个“导入”项目的选项。点击该选项，然后找到您之前提取的. prj.xml文件。导入后，您将会在Tasker的默认主页图标旁边的底部看到一个新标签。</p>

<p>请注意，该项目要求您安装<a href="https://play.google.com/store/apps/details?id=com.joaomgcd.autotools">自动工具</a>才能工作。如果你想定制我的项目的各个方面，那么我建议你继续阅读下面的内容，这样你就可以了解这是如何工作的，以及可以做出哪些改变。请注意，至少，您应该更改应用程序上下文中的应用程序，以便这个剪贴板管理器可以在比默认设置更多的应用程序中被调用。</p>

<hr/>

<h3 id="profile---apps-with-clipboard">个人资料-带剪贴板的应用程序</h3>
<p>在这个例子中，我使用Google+和Pages Manager来启用WebScreens滑动。</p>



<section class="emaki-custom-block emaki-custom-expandable"><div class="emaki-custom expandable" id="custom_block_17"><h3 id="tasker-profile---apps-with-clipboard">TASKER个人资料-带剪贴板的应用程序</h3><p/><pre>Profile: Apps With Clipboard <p>恢复:否</p><p>应用程序:Google+或页面管理器</p><p>进入:启动菜单</p><p>A1:自动工具网页屏幕[配置:屏幕预设:滑动</p><p>显示模式:覆盖</p><p>关闭覆盖ID:滑动</p><p>source:/storage/emulated/0/AutoTools/swipe/page . html</p><p>烤面包持续时间:5000</p><p>背景色:#00CE93D8</p><p>宽度:10</p><p>身高:400</p><p>重力:右下角</p><p>动画:从底部滑入</p><p>覆盖Id:刷卡</p><p>显示持续时间:500</p><p>隐藏持续时间:250</p><p>拖动:不可拖动</p><p>隐藏对话框阴影:true</p><p>注入头:变量a = 1；</p><p>命令前缀:滑动</p><p>向左滑动:向左</p><p>向右滑动:向右</p><p>向上滑动:向上</p><p>向下滑动:向下</p><p>边框颜色:#AB47BC</p><p>边界宽度:3</p><p>边框侧:右侧超时(秒):30 ]</p><p>退出:退出剪辑手势</p><p>A1:自动工具网页屏幕[配置:屏幕预设:滑动</p><p>显示模式:关闭</p><p>关闭覆盖ID:滑动</p><p>source:/storage/emulated/0/AutoTools/swipe/page . html</p><p>烤面包持续时间:5000</p><p>背景色:#00CE93D8</p><p>宽度:10</p><p>身高:400</p><p>重力:右下角</p><p>动画:从底部滑入</p><p>显示持续时间:500</p><p>隐藏持续时间:250</p><p>拖动:不可拖动</p><p>隐藏对话框阴影:true</p><p>注入头:变量a = 1；</p><p>命令前缀:滑动</p><p>向左滑动:向左</p><p>向右滑动:向右</p><p>向上滑动:向上</p><p>向下滑动:向下</p><p>边框颜色:#AB47BC</p><p>边界宽度:3</p><p>边框侧:右侧超时(秒):30 ]</p><p/></pre> </div></section>
<p>选择要在上下文中启用的应用程序，然后创建一个名为Launch Menu的任务。此任务将在Tasker项目-剪贴板管理器中启用网络屏幕滑动。</p>

<p/><h4>任务启动菜单</h4>

<p>在AutoTools WebScreen选项中，导入一个屏幕预设<strong>(滑动)</strong>并删除所有命令，除了设置页面命令部分的“<strong>左</strong>”。</p>

<p>根据您的喜好设置窗口设置。我将重力设置为右下角，宽度设置为10，高度设置为'<strong> fill </strong>'。</p>

<p/><h4>任务退出剪辑手势</h4>

<p>我们需要在不需要的时候禁用手势。添加退出任务并创建另一个WebScreens操作。这次使用显示模式来设置'<strong>关闭</strong>动作。这将终止网页屏幕和刷卡识别。</p>


<p>默认情况下，向右滑动会发出自动工具命令<strong> swipe=:=right </strong>。当这种情况发生时，我希望我的剪贴板管理器打开。创建一个新的配置文件，将AutoApps上下文设置为“<strong>刷卡</strong>”作为过滤器。当滑动完成后，一个漂亮的菜单会出现，里面有我们需要的所有剪辑。</p>



<section class="emaki-custom-block emaki-custom-expandable"><div class="emaki-custom expandable" id="custom_block_27"><p/><pre>Profile: Show Menu <p>事件:AutoApps命令[配置:命令过滤器:滑动]</p><p>进入:剪贴板菜单</p><p>A1:自动工具网页屏幕[配置:屏幕预设:卡片列表</p><p>显示模式:对话框</p><p>source:/storage/emulated/0/AutoTools/cardlist/page . html</p><p>烤面包持续时间:5000</p><p>宽度:100</p><p>高度:填充</p><p>重力:右下角</p><p>动画:从顶部滑入</p><p>显示持续时间:500</p><p>隐藏持续时间:250</p><p>根据命令关闭:真</p><p>等待命令:真</p><p>标题:剪辑</p><p>卡片标题:%ClipPosition()</p><p>左侧卡片潜台词:%ClipAbrev()</p><p>卡片命令:%ClipPosition()</p><p>命令前缀:剪贴板</p><p>背景颜色:#BDBDBD</p><p>强调色:#F9A825</p><p>最大卡片宽度:90%</p><p>最大图像高度:75</p><p>标题文本大小:5</p><p>卡片填充:0</p><p>卡片对齐:居中</p><p>项目分隔符:，超时(秒):30 ]</p><p/></pre> </div></section>
<p/><h4>任务-剪贴板菜单</h4>

<p>布局是从Joao的教程中“借用”来的。我喜欢侧面发射器的样子，所以没有必要重新发明轮子。显然，该WebScreen中使用的变量会有所不同，但布局几乎是相同的。</p>

<p>添加一个AutoTools Web屏幕操作，并选择卡片列表预设。在窗口设置设置下:</p>

<ul> <li>宽度为<strong> 100 </strong></li> <li>到<strong>填充的高度</strong></li> <li>重力至<strong>右下角</strong></li> </ul>

<p>在命令选项下，根据命令和<strong>启用<strong>关闭，等待命令</strong>，然后在卡片设置下:</strong></p>

<ul> <li><strong> %ClipPosition() </strong>的卡片标题(将包含1-9的数字)</li> <li>卡片附加到<strong> %ClipAbrev() </strong>(包含简短片段)</li> <li>卡命令给<strong> %ClipPosition() </strong>(用于识别按压)</li> <li>命令前缀到<strong>剪贴板</strong></li> <li>最大卡片宽度和最小卡片宽度为<strong>的90% </strong></li> <li>最大图像高度为<strong> 75 </strong></li> <li>标题文本大小为<strong> 5 </strong></li> </ul>

<p>您可以随意修改通知的外观，自己摆弄这些数字。请记住，没有下一步就打开网页屏幕不会给你任何预览。</p>

<h3 id="task---array-numbers">任务数组编号</h3>
<p>我们需要一个包含从1到9的数字的数组。这些将用于识别我们的剪贴板条目，并将存储在<strong> %ClipPosition() </strong>数组中。</p>



<section class="emaki-custom-block emaki-custom-expandable"><div class="emaki-custom expandable" id="custom_block_38"><h3 id="task---array-numbers">任务数组编号</h3><p/><pre>array numbers<p>A1:变量集[名称:% clip position To:1 . 2 . 3 . 4 . 5 . 6 . 7 . 8 . 9</p><p>递归变量:Off做数学:Off追加:Off ]</p><p>A2:变量Split[Name:% clip position Splitter:。删除基础:关闭]</p><p/></pre> </div></section>
<p>创建此任务，然后生成数组。这将创建全局数组。</p>

<h3 id="profile---clipboard-monitor">配置文件-剪贴板监视器</h3>
<p>该配置文件将监控包含当前剪贴板值的系统变量<strong> %CLIP </strong>的变化。创建一个设置了事件触发变量的概要文件，并将其设置为监控变量<strong> %CLIP </strong>。当用户(您)设置了一个新的剪贴板条目时，Tasker将检测到这一变化。</p>



<section class="emaki-custom-block emaki-custom-expandable"><div class="emaki-custom expandable" id="custom_block_43"><h3 id="profile---clipboard-monitor">配置文件-剪贴板监视器</h3><p/><pre>Profile: Clipboard Monitor <p>事件:变量集[变量:%CLIP值:*仅用户变量:Off ]</p><p>输入:剪贴板管理器</p><p>A1:可变部分[名称:%CLIP From:1长度:6 Adapt To Fit:On Store Result In:% abrev]</p><p>A2:数组推送[变量数组:%ClipboardArray位置:1值:%CLIP填充空格:Off ]</p><p>A3:数组推送[变量数组:%ClipAbrev位置:1值:%abrev填充空格:On ]</p><p>A4:数组处理[变量数组:%ClipAbrev类型:删除重复项]</p><p>A5:数组进程[变量数组:%ClipboardArray类型:删除重复项]</p><p>A6:数组进程[变量数组:% ClipboardArray数组类型:Squash ]</p><p>A7:数组进程[变量数组:%ClipAbrev类型:Squash ]</p><p>A8:数组Pop [变量数组:% clipa brev Position:10 To Var:]If[% clipa brev(#)eq 10]</p><p>A9:数组Pop [变量数组:% clipboard Array Position:10 To Var:]If[% clipboard Array(#)eq 10]</p><p/></pre> </div></section>
<p/><h4>任务-剪贴板管理器</h4>

<p>我们的剪贴板内容存储在<strong> %ClipboardArray()中。</strong>每次保存一个新的剪贴板，一个<strong>数组Push (A2) </strong>动作将它移动到数组的第一个位置。因为我不想让整个文本在侧边菜单上可见，所以我创建了另一个数组<strong> %ClipAbrev() </strong> <strong> (A3) </strong>，它将存储剪贴板的前X个字母。要缩短剪贴板，使用<strong> (A1)变量选择</strong>并将字符数限制为6(确保勾选了适应)，并将该值存储在本地<strong> %abrev </strong>变量中，该变量用于填充<strong> (A3)数组推送</strong>动作。</p>

<p>现在我们已经准备好剪贴板集合，我们必须清理混乱。该数组将收集所有的剪贴板。这意味着当我们从侧边菜单中选择一个剪贴板时，它将收集新的值并将其作为副本分配给菜单。因此，每次我们保存一个剪辑时，我都想删除重复的条目<strong> (A4，A5) </strong>并删除空白区域<strong> (A6，A7) </strong>。<strong>数组处理动作</strong>在<strong> %Clipboard Array() </strong>和<strong> %ClipAbrev() </strong>上都执行。</p>

<p>最后，我希望我的菜单只包含9个条目。你可以有更多的菜单，但是我发现这9个菜单不需要滚动就很适合我的屏幕。为此，使用<strong>数组Pop (A8，</strong><strong>【A9)</strong>并删除第10个位置。如果数组包含10个元素，只需做这个<strong>。否则，删除最后一个元素。我们通过检查元素的数量<strong> %ClipboardArray(#) = 10 </strong>来实现这一点。</strong></p>
<p class="ad-odd"> </p>


<h2 id="profile---set-clipboard">配置文件集剪贴板</h2>
<p>我们快完成了。这是一个非常简单的简介。我们使用AutoApps命令剪贴板来检查命令是否已被接收。该命令看起来像这样:<em> clipboard=:=1 </em>其中数字代表我们侧边菜单上按下的按钮。</p>



<section class="emaki-custom-block emaki-custom-expandable"><div class="emaki-custom expandable" id="custom_block_51"><h3 id="profile---set-clipboard">配置文件集剪贴板</h3><p/><pre>Profile: Set Clipboard <p>事件:AutoApps命令[配置:命令过滤器:剪贴板]</p><p>回车:设置新剪辑</p><p>A1:设置剪贴板[Text:% Clipboard array(% aacomm)Add:Off]</p><p/></pre> </div></section>
<p/><h4>任务-设置新剪辑</h4>

<p>任务也很简单。将剪贴板设置为<strong> %ClipboardArray() </strong>的值，我们希望选择由接收到的命令的<strong> %aacomm </strong>部分指定的元素。所以将剪贴板设置为<strong> %ClipboardArray(%aacomm) </strong>就大功告成了。Tasker剪贴板管理器现在已经完成。</p>

<hr/>

<p>现在，在您选择的应用程序中，您可以向右滑动来打开您自己的自定义剪贴板管理器！跟随<a href="https://www.xda-developers.com/category/tutorials/"> XDA开发者教程</a>获取更多这样的帖子。此外，查看我们的<a href="https://forum.xda-developers.com/u/tasker-tips-tricks"> Tasker Tips &amp; Tricks </a>论坛，了解我们社区中自动化爱好者的最新创造。</p>
<p class="ad-even"> </p>


<h2 id=""> </h2></div>


</div>    
</body>
</html>