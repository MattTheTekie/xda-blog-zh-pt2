<html>
<head>
<title>How to Listen to your Google Voice Voicemail on your Google Home</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Google Home上收听您的Google Voice语音邮件</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/how-to-listen-to-your-google-voice-voicemail-on-your-google-home/#0001-01-01">https://www.xda-developers.com/how-to-listen-to-your-google-voice-voicemail-on-your-google-home/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>当Google Home第一次发布时，它(现在仍然)缺乏许多功能。你仍然无法设置日历事件、阅读短信、创建待办事项列表等等。然而，如果你有勇气，你可以自己实现几乎所有这些功能，这要归功于<a href="https://play.google.com/store/apps/details?id=com.joaomgcd.autovoice&amp;hl=en"> AutoVoice </a>和<a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm&amp;hl=en"> Tasker </a>的强大功能。为了展示你使用Google Home和AutoVoice的创造力，我将向你展示如何让你的Google Home <strong>阅读你最新的Google Voice语音邮件。现在这看起来像是巫术，但希望在本教程结束时，一切都会变得有意义。</strong></p>

  
<p>通过AutoVoice，你可以从Google Home设备向手机发送语音命令，然后手机会解释这些命令并通过Tasker执行一些操作。最好的部分是，由于<a href="https://api.ai/"> API.ai </a>的力量，你可以向你的手机发送自然语言命令，前提是你向AutoVoice注册0.99美元/月的订阅服务，以抵消托管API.ai服务器的成本。这意味着当你对着你的Google Home说话时，你不必说得那么机器人化/精确，AutoVoice仍然会识别你试图发送的命令。</p>

<p>一段时间以来，AutoVoice与Google Home的集成一直处于测试阶段，但AutoVoice 3.0 的<a href="https://www.xda-developers.com/autovoice-3-0-brings-google-home-amazon-echo-ifttt-integration-and-natural-language-support-to-stable-channel/">版本允许Tasker插件的所有用户享受Google Home集成。现在，AutoVoice已经被用户广泛使用，并且它的大多数问题都已经解决，我将开始展示我用AutoVoice和Tasker做的一些东西。我的第一个谷歌主页教程，阅读你最新的谷歌语音邮件，是我最复杂的分享，但它是一个很好的候选人，表明你可以用Tasker做什么，只受你的想象力限制。</a></p>

 
<p class="w-rich w-youtube" id="Xp9qsa_j_Rk">  </p>


<p/><p>在我的谷歌主页上听我最新的语音邮件。</p>

<p><em> <strong>推荐阅读:查看我们的<a href="https://www.xda-developers.com/category/tutorials/">以前的教程</a>，在那里我们向你展示如何解决很少有人接触过的常见问题。</strong> </em></p>

<hr/>

<h3 id="requirements">要求</h3>
<p>AutoVoice是这个项目工作的软要求。您可以使用IFTTT来触发任务，但这将需要您使用一种变通方法，涉及另一个应用程序，如<a href="https://play.google.com/store/apps/details?id=com.joaomgcd.join&amp;hl=en"> Join </a>或<a href="https://play.google.com/store/apps/details?id=com.pushbullet.android&amp;hl=en">push pullet</a>向Tasker发送命令，因为IFTTT不直接与Tasker集成。此外，不使用AutoVoice的最重要的警告是，如果使用IFTTT，语音命令将是不灵活的。这意味着你必须每次都完全准确地说出你的命令，否则命令不会被触发。如果你开始创建大量的Tasker/Google Home集成(我目前有28个)，这在未来可能是一个问题，这意味着你每次都必须记住并准确再现你想要的命令。</p>


<hr/>


<h2 id="preparation">准备</h2>
<p>在我们开始讨论这个很酷的集成之前，我们必须为它的正常工作做一些准备。我将分几个部分来介绍这个设置。</p>

<h3 id="part-1---setting-up-autovoice">第1部分-设置AutoVoice</h3>
<p>关于如何用Google Home设置AutoVoice，我已经写了很长时间，所以请<a href="https://www.xda-developers.com/autovoice-integration-finally-makes-its-way-to-google-home-heres-how-to-use-it/">在这里</a>参考我以前的文章。唯一值得注意的变化是，你不再需要AutoVoice测试版，因为集成现在与AutoVoice稳定更新一起工作。我还建议您通读关于使Tasker配置文件对AutoVoice命令做出反应的简短教程，因为我们将在这里做同样的事情。要点是，在这个设置过程中，您将做四件主要的事情:</p>

<ol> <li>在Google Home应用中启用AutoVoice服务。</li> <li>设置一个API.ai帐户并获取您的API密钥</li> <li>将这些API键添加到AutoVoice的自然语言设置中</li> <li>订阅AutoVoice自然语言订阅服务</li> </ol>

<p>同样，这些步骤在我之前的文章中有更详细的描述，所以我建议您通读一遍。</p>

<h3 id="part-2---setting-up-google-voice">第2部分-设置Google Voice</h3>
<p>我们需要一种方法来访问您的Google Voice语音邮件，以便Tasker可以提取语音邮件内容。我们将通过将我们所有的语音邮件转发到您关联的Gmail帐户来实现这一点。这是谷歌语音的原生功能，你需要做的只是在谷歌语音应用程序中切换一个按钮。</p>





<p>完成后，您将开始在电子邮件中接收所有新的语音邮件。如您所见，这封电子邮件既包含语音邮件的副本，也包含语音邮件实际音频的链接。我们将出于我们的目的使用此电子邮件。</p>

<h3 id="part-3---setting-up-autoweb">第3部分-设置AutoWeb</h3>
<p>为了提取这封邮件的内容，我们需要使用<a href="https://developers.google.com/gmail/api/"> Gmail API </a> <span>来访问邮件内容。我们将使用开头附近链接的AutoWeb应用程序来完成这项工作。打开AutoWeb并点击“浏览Web服务”向下滚动到Gmail API，点击它进行导入。导入后，AutoWeb会要求您对要使用API的Gmail帐户进行身份验证。选择将语音邮件转发到 <span>的同一个Gmail帐户</span> <strong>。</strong></span></p>





<p>现在，您已经通过使用Gmail API将您的手机链接到您的Gmail帐户！</p>

<h3 id="part-4---setting-up-autocast">第4部分-设置自动成本核算</h3>
<p>在我们可以将语音邮件音频发送到我们的Google Home之前，我们需要设置AutoCast，以便它可以连接到Google Home。打开AutoCast并选择“管理演职人员设备”。点击顶部栏中的“<strong> + </strong>”图标，选择您的Google Home设备。</p>





<p>最后，我们已经准备好进行实际设置。</p>

<hr/>
<p class="ad-odd"> </p>


<h2 id="reading-your-latest-google-voice-voicemail-on-google-home">在谷歌主页上阅读您最新的谷歌语音邮件</h2>
<h3 id="autovoice">AutoVoice</h3>
<p>我们需要做的第一件事是创建一个AutoVoice自然语言命令。这很容易做到。</p>

<ol> <li>打开自动语音</li> <li>利用自然语言</li> <li>点击命令</li> <li>点击<strong> + </strong>图标添加新命令</li> <li>输入语音命令列表，用逗号分隔，包含您认为触发此命令时可以说出的语音命令的各种变体。</li> <li>对于响应，您可以输入尽可能多的响应，或者不输入任何响应，以便Google Home在您发出该命令时向您朗读。</li> <li>完成后，给这个命令命名。这里什么都行。</li> </ol>





<p>即使您正在输入一堆不同的命令和响应，您也不必担心要记住准确地说出这些命令。API.ai将自动解析您所说的任何内容，并使用其自然语言算法将您所说的命令与您在此列出的命令进行匹配。</p>

<p>或者，如果你只是想下载我自己的设置，你可以在下面的链接。我相信，就目前而言，为了导入它，您必须登录API.ai并在那里导入它。</p>

<p><a href="https://www.androidfilehost.com/?fid=529152257862710887"> <strong>下载AutoVoice自然语言意图</strong> </a></p>

<p>老实说，这个设置的实际自动语音部分相当简单，因为我们不处理口头命令中的变量/参数或上下文。真正复杂的部分来自下一部分，我们让Tasker对这个AutoVoice自然语言命令做出反应。</p>

<h3 id="tasker">包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包包</h3>


<p>这是我们制作这份简介的一步一步的指南。</p>

<ol> <li>打开Tasker，按下<strong> + </strong>图标，创建一个新的个人资料。</li> <li>进入事件-&gt;插件-&gt;自动语音-&gt;自然语言。</li> <li>点击铅笔图标打开AutoVoice的配置屏幕。</li> <li>按“命令”并选择您之前创建的命令的名称。</li> <li>按上面的勾号图标，然后按返回键返回到Tasker的主屏幕。</li> <li>Tasker将要求您创建一个新任务。如果你愿意，你可以给它一个名字，但是不管怎样，点击勾号图标来创建一个新的任务。</li> </ol>

<p>进入任务编辑屏幕后，我们将创建如下所示的任务。要创建新动作，请点击底部中间的<strong> + </strong>图标。对于这里的任何Tasker专业人员，您可以展开下面的切换，以显示您自己可以关注的个人资料和任务描述。</p>

<section class="emaki-custom-block emaki-custom-expandable"><div class="emaki-custom expandable" id="custom_block_44"><h3 id="home---read-voicemail">家庭阅读语音邮件</h3><pre> <code class="hljs sql"> Profile: Home - Read Voicemail (165)<br/> <span class="hljs-selector-tag">Event</span>: <span class="hljs-selector-tag">AutoVoice</span> <span class="hljs-selector-tag">Natural</span> <span class="hljs-selector-tag">Language</span> <span class="hljs-selector-attr">[ Configuration:Commands: read my last voicemail ]</span><br/>Enter: Read Voicemail (164)<br/> <span class="hljs-selector-tag">A1</span>: <span class="hljs-selector-tag">AutoCast</span> <span class="hljs-selector-tag">Speak</span> <span class="hljs-selector-attr">[ Configuration:Device: Bedroom Home Timeout (Seconds):60 ]</span> <br/> A2: AutoWeb Web Service [ Configuration:API: Gmail<br/>API Action: <span class="hljs-keyword">List</span> messages<br/><span class="hljs-keyword">Include</span> spam trash: <span class="hljs-keyword">false</span><br/>User ID: me<br/><span class="hljs-selector-tag">Search</span>: <span class="hljs-selector-tag">from</span><span class="hljs-selector-pseudo">:voice-noreply</span><span class="hljs-keyword">@google</span>.com<br/><span class="hljs-selector-tag">Max</span> <span class="hljs-selector-tag">Results</span>: 5 <span class="hljs-selector-tag">Timeout</span> (<span class="hljs-selector-tag">Seconds</span>)<span class="hljs-selector-pseudo">:120</span> ] <br/> <span class="hljs-selector-tag">A3</span>: <span class="hljs-selector-tag">Wait</span> <span class="hljs-selector-attr">[ MS:0 Seconds:1 Minutes:0 Hours:0 Days:0 ]</span> <br/> A4: AutoWeb Web Service [ Configuration:API: Gmail<br/>API Action: Get Message<br/>Format: full<br/><span class="hljs-selector-tag">User</span> <span class="hljs-selector-tag">ID</span>: <span class="hljs-selector-tag">me</span> <span class="hljs-selector-tag">Timeout</span> (<span class="hljs-selector-tag">Seconds</span>)<span class="hljs-selector-pseudo">:120</span> ] <br/> A5: <span class="hljs-keyword">For</span> [ Variable:%headers Items:<span class="hljs-number">1</span>:%payload_headers_name(<br/> A6: Variable <span class="hljs-keyword">Set</span> [ <span class="hljs-keyword">Name</span>:%<span class="hljs-keyword">reference</span> <span class="hljs-keyword">To</span>:%headers Recurse <span class="hljs-keyword">Variables</span>:<span class="hljs-keyword">Off</span> <span class="hljs-keyword">Do</span> Maths:<span class="hljs-keyword">Off</span> Append:<span class="hljs-keyword">Off</span> ] <span class="hljs-keyword">If</span> [ %payload_headers_name(%headers) ~ Subject ]<br/> A7: <span class="hljs-keyword">End</span> <span class="hljs-keyword">For</span> <br/> A8: Java <span class="hljs-built_in">Function</span> [ Return:decodedbody Class Or <span class="hljs-built_in">Object</span>:Base64 <span class="hljs-built_in">Function</span>:decode<br/>{<span class="hljs-keyword">byte</span>[]} (String, <span class="hljs-keyword">int</span>) Param:%bodydata(<span class="hljs-number">1</span>) Param:<span class="hljs-number">8</span> Param: Param: Param: Param: Param: ] <br/> A9: Java <span class="hljs-built_in">Function</span> [ Return:%body Class Or <span class="hljs-built_in">Object</span>:<span class="hljs-built_in">String</span> <span class="hljs-built_in">Function</span>:<span class="hljs-keyword">new</span><br/>{<span class="hljs-built_in">String</span>} (byte[], <span class="hljs-built_in">String</span>) Param:decodedbody Param:UTF<span class="hljs-number">-8</span> Param: Param: Param: Param: Param: ] <br/> A10: Variable Split [ Name:%body Splitter:https://www.google.com/voice/fm/ <span class="hljs-keyword">Delete</span> Base:<span class="hljs-keyword">Off</span> ] <br/> <span class="hljs-selector-tag">A11</span>: <span class="hljs-selector-tag">Variable</span> <span class="hljs-selector-tag">Split</span> <span class="hljs-selector-attr">[ Name:%body2 Splitter:&gt; Delete Base:Off ]</span> <br/> A12: HTTP Get [ Server:Port:https:<br/> A13: Variable <span class="hljs-keyword">Set</span> [ <span class="hljs-keyword">Name</span>:%voicemail <span class="hljs-keyword">To</span>:%payload_headers_value(%<span class="hljs-keyword">reference</span>) Recurse <span class="hljs-keyword">Variables</span>:<span class="hljs-keyword">Off</span> <span class="hljs-keyword">Do</span> Maths:<span class="hljs-keyword">Off</span> Append:<span class="hljs-keyword">Off</span> ] <br/> A14: Variable Split [ Name:%voicemail Splitter:from <span class="hljs-keyword">Delete</span> Base:<span class="hljs-keyword">Off</span> ] <br/> A15: Variable Split [ Name:%voicemail2 Splitter:at <span class="hljs-keyword">Delete</span> Base:<span class="hljs-keyword">Off</span> ] <br/> A16: Test Phone [ Type:Contact Name Data:%voicemail21 Store Result In:%name Continue Task After <span class="hljs-built_in">Error</span>:On ] <br/> A17: Variable <span class="hljs-keyword">Set</span> [ <span class="hljs-keyword">Name</span>:%voicemail <span class="hljs-keyword">To</span>:%voicemail1 <span class="hljs-keyword">from</span> %<span class="hljs-keyword">name</span> <span class="hljs-keyword">at</span> %voicemail22 Recurse <span class="hljs-keyword">Variables</span>:<span class="hljs-keyword">Off</span> <span class="hljs-keyword">Do</span> Maths:<span class="hljs-keyword">Off</span> Append:<span class="hljs-keyword">Off</span> ] <span class="hljs-keyword">If</span> [ %<span class="hljs-keyword">name</span> <span class="hljs-keyword">Set</span> ]<br/> A18: Variable <span class="hljs-keyword">Set</span> [ <span class="hljs-keyword">Name</span>:%voicemail <span class="hljs-keyword">To</span>:%voicemail1 <span class="hljs-keyword">from</span> %voicemail21 <span class="hljs-keyword">at</span> %voicemail22 Recurse <span class="hljs-keyword">Variables</span>:<span class="hljs-keyword">Off</span> <span class="hljs-keyword">Do</span> Maths:<span class="hljs-keyword">Off</span> Append:<span class="hljs-keyword">Off</span> ] <span class="hljs-keyword">If</span> [ %<span class="hljs-keyword">name</span> !<span class="hljs-keyword">Set</span> ]<br/> A19: AutoCast Speak [ Configuration:Device: Bedroom Home<br/><span class="hljs-selector-tag">Text</span>: %<span class="hljs-selector-tag">voicemail</span> <span class="hljs-selector-tag">Timeout</span> (<span class="hljs-selector-tag">Seconds</span>)<span class="hljs-selector-pseudo">:60</span> ] <br/> <span class="hljs-selector-tag">A20</span>: <span class="hljs-selector-tag">Wait</span> <span class="hljs-selector-attr">[ MS:0 Seconds:5 Minutes:0 Hours:0 Days:0 ]</span> <br/> A21: AutoCast [ Configuration:<br/>Starting Casting Screen<br/>Persistent Notification: <span class="hljs-literal">true</span><br/>Cast Device: Bedroom Home<br/>Screen: Full Screen Media<br/>Audio: <span class="hljs-regexp">/storage/</span>emulated/<span class="hljs-number">0</span>/Tasker/voicemail.mp3<br/>Audio Volume: 100<br/>Audio Position: 0<br/>Audio AutoPlay: <span class="hljs-literal">true</span> Timeout (Seconds):<span class="hljs-number">3000</span> ]</code> </pre> </div></section>
<p>下面的分步指南将向您展示如何复制右侧屏幕截图中显示的任务。这个任务是这个设置的核心，相当复杂。它的工作原理是，一旦激活该配置文件，最初的几个操作(A2-A4)会从您的Gmail帐户中搜索并提取来自voice-noreply@google.com的邮件，这是Google Voice使用的自动电子邮件服务。然后我们寻找主题头(A5-A7 ),这样我们就可以得到谁在何时发送了语音邮件的信息。接下来，我们提取Gmail邮件的邮件正文，邮件正文以base 64编码，因此我们必须使用Java函数(A8-A9)。在我们检索到解码后的消息后，我们接着寻找将我们链接到语音邮件音频文件(A10-A11)的URL，并最终将该文件下载为mp3 (A12)。A13-A18简单地查找留下语音邮件的号码的联系信息(如果存在的话)。最后，A19-A21将读出语音邮件是在什么时间由谁发送的，以及记录的语音邮件音频。</p>

<ol> <li>插件-&gt;自动发布-&gt;自动发布语音。设备:<strong>选择你的谷歌主页。</strong>(这里不需要任何文字，这只是为了连接到Google Home。)</li> <li>插件- &gt; AutoWeb。API: Gmail。API操作:列出消息。用户ID:我。搜索:<strong>from:voice-noreply@google.com</strong>。最大结果:5。输出:<strong> Id。</strong></li> <li>任务-&gt;等待。等待1秒钟。</li> <li>插件- &gt; AutoWeb。API: Gmail。API操作:获取消息。格式:全。用户ID:我。消息ID: <strong> %aid(1) </strong>。输出:<strong>主体数据，有效载荷头名称，</strong>和<strong>有效载荷头值。</strong></li> <li>任务-&gt;用于。变量:<strong>%头</strong>。项目:<strong>1:%有效负载标题名称(#) </strong></li> <li>变量-&gt;变量集。名称:<strong>%引用</strong>。致:<strong> %headers </strong>。检查If并将其设置为If<strong>% payload _ headers _ name(% headers)~ Subject。</strong></li> <li>任务-&gt;结束。</li> <li>代码- &gt; Java函数。对于类/对象，选择<strong> Base64。</strong>功能:<strong>解码{byte[]} (String，int) </strong>。Param (string): <strong> %bodydata(1)。</strong> Param (int): <strong> 8。</strong>返回:<strong> decodedbody。</strong></li> <li>代码- &gt; Java函数。对于类/对象，选择<strong>字符串。</strong>函数:<strong> new {String} (byte[]，String) </strong>。param(byte[]):<strong>decode body。</strong> Param (string): <strong> UTF-8。</strong>返回:<strong>%体。</strong></li> <li>变量-&gt;变量拆分。名称:<strong>%体。</strong>拆分器:【https://www.google.com/voice/fm/】T2</li> <li>变量-&gt;变量拆分。名称:<strong> %body2 </strong>。拆分器:<strong> &gt; </strong></li> <li>Net - &gt; HTTP Get。服务器:端口:<strong>https://www.google.com</strong>路径:<strong> /voice/fm/%body21 </strong> Mime类型:<strong> audio/* </strong>输出文件:<strong>/SD card/Tasker/voice mail . MP3</strong></li> <li>变量-&gt;变量集。姓名:<strong>%语音邮件</strong>。收件人:<strong>%有效负载标题值(%参考)</strong></li> <li>变量-&gt;变量拆分。姓名:<strong>%语音信箱。</strong>拆分器:中的<strong/></li> <li>变量-&gt;变量拆分。姓名:<strong> %voicemail2 </strong>。分割器:<strong>在</strong></li> <li>电话-&gt;测试电话。类型:<strong>联系人姓名。</strong>数据:<strong> %voicemail21 </strong>。将结果存储在:<strong> %name。</strong>出错后，确保检查<strong>继续任务。</strong></li> <li>变量-&gt;变量集。姓名:<strong>%语音邮件</strong>。收件人:<strong> %voicemail1发自%name于%voicemail22 </strong>。检查底部的if，并将其设置为是否设置了<strong> %name。</strong></li> <li>变量-&gt;变量集。姓名:<strong>%语音邮件</strong>。收件人:<strong> %voicemail1发自%voicemail21，时间为%voicemail22 </strong>。在底部检查是否，如果没有设置<strong> %name，将其设置为。</strong></li> <li>插件-&gt;自动发布-&gt;朗读。设备:<strong>选择你的Google Home </strong>。正文:<strong>%语音信箱</strong></li> <li>任务-&gt;等待。等待<strong> 5秒钟。</strong>这是一个<strong>可配置的延迟</strong>，以确保在宣布新语音邮件和播放语音邮件音频之间总是有足够的时间。如果这个太短，可以增加这个时间。不过，可以试验一下这个值，看看怎样将延迟降低到可接受的水平。</li> <li>插件-&gt;自动发布-&gt;自动发布。Cast Device: <strong>再次挑选你的Google Home。</strong>选择<strong>全屏媒体</strong>作为屏幕。转到全屏媒体元素，然后音频，对于音频(“要播放的歌曲”)，将<strong>/SD card/Tasker/voice mail . MP3</strong>。选择<strong>自动播放</strong>。</li> </ol>

<p>就是这样！现在，你需要做的就是发送命令到你的Google Home设备来触发这个任务。你可以说“<em> <strong>”嘿/好的谷歌，让我和AutoVoice </strong> </em>”然后当AutoVoice告诉你说你的命令时，说出你的命令的一个变体。或者你可以说“<em> <strong>嘿/OK谷歌，问AutoVoice到【命令】</strong> </em>”就像我在开头展示的视频中做的那样，一口气说出你的命令。</p>

<hr/>
<p class="ad-even"> </p>


<h2 id="download-profile">下载个人资料</h2>
<p>你可以从下面的链接下载我制作的任务简介/任务。如果您选择这样做，请确保您进入并修改两个“自动发布”操作，以便它们引用您的特定Google Home设备。此外，检查以确保在我的个人资料中命名的AutoVoice自然语言命令与您创建的命令相同。如果没有，只需更改配置文件以指向您的命令。应该只需要几秒钟。</p>

<p><a href="https://www.androidfilehost.com/?fid=817550096634754127"> <strong>下载首页阅读语音邮件任务者简介</strong> </a></p>

<p>下载上述XML文件后，将其保存在设备上的任何地方。打开Tasker，在首选项中禁用初学者模式。然后返回主屏幕，长按Profiles选项卡，直到您看到一个弹出框，其中有一个“导入”选项。按下该按钮，导航到保存. prf.xml文件的位置，并选择要导入的文件。</p>

<p>我希望这个教程对你有用。我喜欢摆弄API和Tasker，直到我能够让事情正常工作。我知道这不是超级优雅，但这主要是一个展示，你可以如何有力地将你的谷歌主页与各种网络服务和你的手机集成。希望这能激发你创造一些你以前认为不可能的东西！</p>

 </div>


</div>    
</body>
</html>