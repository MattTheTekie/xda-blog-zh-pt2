# 深度集成的渐进式网络应用程序(WebAPKs)在 Android 上的 Chrome 上运行

> 原文：<https://www.xda-developers.com/deeply-integrated-progressive-web-apps-are-already-live-for-chrome-on-android/>

在 Android 的大部分历史中，应用程序都是作为本地包安装在设备上的。我们通常通过下载 APK 文件来获取所需的安装文件，该文件是包含应用程序所有资源和资产的归档文件。虽然以这种方式安装本机应用程序有很多好处，但是开发基于 web 的应用程序也有很多好处。Web 应用程序可以在多个平台上访问，可以很容易地修改，并且可以很容易地部署。

谷歌在网络应用上更进了一步，创建了[渐进式网络应用](https://developers.google.com/web/progressive-web-apps/) (PWA)，它与移动设备的集成程度更高。渐进式网络应用程序可以发送推送通知，最重要的是“安装”在设备的主屏幕上。通过点击 Chrome 菜单中的“添加到主屏幕”选项，可以从大多数网站创建这些网络应用，然而，渐进式网络应用的实际功能如何[取决于网站支持](https://developers.google.com/web/progressive-web-apps/checklist)。

PWA 的一个主要缺点是它们不被视为设备上的实际应用。由于这些网络应用是通过主屏幕快捷方式访问的，许多喜欢主屏幕主题化的用户可能会被这个事实吓跑。我可以凭经验说话。幸运的是，在去年 11 月的 2016 年 [Chrome 开发峰会](https://developer.chrome.com/devsummit/)期间，Chrome 团队展示了渐进式网络应用程序实际上可以转化为 apk，安装在你的设备上。

开发团队没有说明对“WebAPKs”的确切支持将于何时上线，但显然它已经上线了——只是没有人真正注意到。公平地说，支持这个特性的唯一方法是启用一个新的 Chrome 标志:

```
chrome://flags/#enable-improved-a2hs
```

如果你将上面的链接粘贴到地址栏中(在 Android 版 Chrome 的 Dev 或 Canary 频道上)，你会看到一个 Chrome 标志，上面写着:

> #### **启用改进的主屏幕添加功能。**
> 
> #### Android 打包了“渐进式 Web 应用程序”，以便它们可以更深入地与 Android 集成。Chrome 服务器用于打包网站。在 Chrome Canary 和 Chrome Dev 中，这需要在 Android 安全设置中启用“不可信来源”。

如前所述，渐进式网络应用程序现在可以打包成**实际可安装的 Android 包！**它使用一个后端 Chrome 服务器将网站打包成一个 APK(虽然不清楚是否是谷歌在运行这个服务器，我们假设是这样)。一旦你启用了这个标志并重启 Chrome，任何你“安装到主屏幕”的 PWA 都会下载一个 APK 文件安装到你的设备上。当然，并不是每个网站都支持这个，但是你可以在这里看看[完全支持这个新功能的网站。](https://pwa.rocks/)

* * *

## 渐进式网络应用的乐趣

我们采取了两种不同的 pwa 来看看专题进展如何——金融时报和电报。《金融时报》是一个简单的新闻网站，在这个时代，移动网站可能比单独的应用程序更好。

正如你所看到的，PWA 被 Android 当成了一个实际的应用程序。它会提示你安装，并像其他应用程序一样驻留在应用程序抽屉中。此外，删除 PWA 就像卸载任何其他应用程序一样。

请注意显示最近应用程序屏幕的这两个截图中信息栏的差异。第一个屏幕截图是在没有启用此新标志的情况下“安装”PWA 时发生的情况，而第二个屏幕截图显示了启用标志的 PWA 的真实安装。《金融时报》是我手机上的一个应用程序，可以与 Chrome 的其他标签分开。

接下来是 Telegram web 应用程序。这个 PWA 使用 Telegram 的网络界面为您提供信息。老实说，Telegram 可能是 Android 上存在的设计和功能最好的应用程序之一，所以我个人认为没有必要使用这个 PWA。然而，我想测试作为 PWA 安装的即时消息的功能，所以我决定试一试。

虽然 Telegram 确实可以正确安装和显示我的所有信息，但有一个主要的警告:通知。通知现在似乎无法正常工作。当我通过 Telegram 给 Mario Serrafero 发消息时，他确实收到了一个通知(如左下角的截图所示)，但其中没有任何有用的信息。打开“站点设置”选项，我们看到了 Telegram web 应用程序的站点特定设置，显示通知已启用，因此我们不确定为什么通知不起作用。

当然，由于启用 WebAPK 安装的标志只存在于 Android 版 Chrome 的 Dev 和 Canary 通道中，我们假设该功能是 WIP，因此此时并不是所有功能都可以工作。因为我们知道 Chrome 能够发送推送通知(例如在脸书上)，所以在不久的将来，以这种方式安装的渐进式网络应用程序也可能能够接收推送通知。

* * *

除此之外，这是对一个实验性特性的巧妙审视，我希望随着时间的推移，这个特性会变得更加健壮。我个人喜欢使用网络应用程序，因为它们可以为我提供我需要的信息，而没有任何花里胡哨的东西，这些东西会使设备变慢或耗尽我的电池。此外，这种方法解决了我对 web 应用程序的一个主要疑虑，即它们需要停留在你的主屏幕上才能启动。随着各种流行网站的 web 包装器变得越来越普遍，希望我们会看到更多的公司采用渐进式 Web 应用程序标准。