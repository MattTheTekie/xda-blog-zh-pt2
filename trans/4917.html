<html>
<head>
<title>Android P now tells you when Accessibility Services stop working</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Android P现在会告诉你什么时候辅助服务停止工作</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/android-p-accessibility-services-stop-working/#0001-01-01">https://www.xda-developers.com/android-p-accessibility-services-stop-working/#0001-01-01</a></blockquote><div><header class="article_heading">


<h1 class="heading_title">Android P现在会告诉你什么时候辅助服务停止工作</h1>

<p class="heading_sharing">  </p>


<p class="heading_excerpt">被授予可访问性服务权限的应用程序有时会由于各种错误而崩溃，我们刚刚发现Android P实际上会告诉用户什么时候工作不正常。</p>



  </header>

<section id="article-body" class="article-body" itemprop="articleBody">

<div class="content-block-regular">
<p/><p>去年年底，我们讨论了谷歌发给许多Android应用程序开发者的一封电子邮件，内容是关于他们如何使用辅助功能服务。当查看谷歌自己关于该功能的文档时，他们明确声明该功能将通过提供用户界面增强来帮助残疾用户。然而，我们都知道一些最具创新性的应用程序将它用于各种各样的事情。被授予可访问性服务权限的应用程序有时会由于各种错误而崩溃，我们刚刚发现Android P实际上会告诉我们什么时候工作不正常。</p>

 
<hr/>

<h3 id="what-is-an-accessibility-service">什么是辅助功能服务？</h3>
<p>辅助功能服务允许Android应用程序更容易被某些残疾用户(如视力障碍者)使用。现在，这个特性通常被称为<em> a11y </em>，并且是一个应用程序，系统可以根据可访问性服务注册要监听的<a href="https://developer.android.com/reference/android/accessibilityservice/AccessibilityServiceInfo.html#eventTypes">事件</a>向其提供某些信息。例如，一个被授予了辅助功能服务权限的应用程序可以监听<code><span>TYPE_VIEW_CLICKED</span></code>事件，这允许它从系统接收关于用户可能按下的任何按钮的信息。然后，应用程序可以获取这些数据并对其进行其他处理(比如在本例中重新映射一个按钮)。</p>

<hr/>

<p>发送给开发者的电子邮件令人惊讶，因为谷歌自己的文档的前一版本没有提到任何关于无障碍服务用于帮助残疾用户的内容。当时，我们被告知，在30天内没有修复的应用程序将从Play Store中删除，这还没有发生。无论如何，谷歌仍在努力改善Android P的无障碍服务，因为它现在会告诉你服务何时出现故障。</p>





<p>我们在测试XDA新的导航手势应用程序的alpha版本时发现了这一变化。有一个错误导致服务崩溃。因为这是我们过去处理过的事情，我们知道我们必须进入设置应用程序，然后关闭再打开。不过，在Android Oreo和更早的版本中，该服务会简单地说它已启用，这导致许多人认为它没有任何问题。当一个应用程序有这样的错误，服务必须再次启用时，情况就不一样了。</p>

<p>有了Android P，谷歌现在告诉用户某个特定应用的可访问性服务出了问题。我们不再像过去那样只说“已启用”，而是被告知它不起作用，我们需要“点击以获取信息”在我们的例子中，当我们点击应用程序时，我们被告知服务出现故障。所以很高兴看到谷歌向用户传达了一些信息，而不是让他们去猜测到底发生了什么。</p>

 </div>


<p id="article-waypoint"/>
</section>


        </div>    
</body>
</html>