<html>
<head>
<title>How to change your Nav Bar Icons or Re-arrange the Buttons without Root</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何改变你的导航栏图标或重新安排按钮没有根</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/how-to-change-your-nav-bar-icons-or-re-arrange-the-buttons-without-root/#0001-01-01">https://www.xda-developers.com/how-to-change-your-nav-bar-icons-or-re-arrange-the-buttons-without-root/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>那些运行第一个<a href="https://www.xda-developers.com/google-announces-android-o-developer-preview-1-available-for-supported-devices/"> Android O开发者预览版</a>的人可能已经摆弄过它隐藏的<a href="https://www.xda-developers.com/android-o-preview-brings-nav-bar-customization-under-system-ui-tuner/">导航栏定制器</a>了，它位于SystemUI调谐器中。这个导航条定制器实际上已经在AOSP出现了几个月，但人们认为在Android Nougat上访问它的唯一方式是通过对系统UI APK的<a href="https://forum.xda-developers.com/nexus-6p/themes-apps/mod-enable-navbar-tuner-nougat-t3447478">修改，当然，这需要root访问权限。直到这个星期，我们才发现Android Nougat的隐藏导航条定制器实际上不需要root访问、自定义ROM或系统UI模块就可以访问。有了这个功能，我们可以改变导航条图标，交换按键，或者添加额外的按钮。</a></p>

  
<p>没错——你可以用一个锁定的引导程序在一个完全库存的、非根化的ROM上修改你的导航栏。人们认为仅限于Android O的功能实际上可以在Nexus、Pixel、一加和一些索尼、HTC和摩托罗拉手机上运行Android Nougat。如果你的设备运行的软件接近谷歌的软件(对不起，三星和华为/Honor用户)，那么你的设备可能有我们可以使用的隐藏的AOSP导航条定制程序。在本教程中，我将向你展示如何使用导航条定制器来把按钮图标改变成你想要的样子，或者按照你想要的顺序重新排列它们。</p>





<p/><p><em>谷歌Nexus 6上的Pixel导航条</em></p>
<div class="body-img portrait"><div class="responsive-img image-expandable img-article-item-portrait" data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2017/04/Screenshot_20170418-221217-169x300.png" data-modal-id="single-image-modal" data-modal-container-id="single-image-modal-container" data-img-caption="&quot;Reversed Nav Bar on Nexus 6&quot;">
 
<figure> <picture>  <source media="(min-width: 1024px)" sizes="750px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2017/04/Screenshot_20170418-221217-169x300.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 768px)" sizes="750px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2017/04/Screenshot_20170418-221217-169x300.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 481px)" sizes="600px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2017/04/Screenshot_20170418-221217-169x300.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 0px)" sizes="360px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2017/04/Screenshot_20170418-221217-169x300.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <img class="lazyload" alt="" data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2017/04/Screenshot_20170418-221217-169x300.png" src="../Images/36086757b3c1cf1fdb5773a26f2ee70b.png" data-original-src="https://static1.xdaimages.com/wordpress/wp-content/uploads/2017/04/Screenshot_20170418-221217-169x300.png"/> </picture> <figcaption class="body-img-caption">Reversed Nav Bar on Nexus 6</figcaption> </figure> </div>


 </div>


<hr/>


<h2 id="modifying-the-nav-bar---setup">修改导航栏-设置</h2>
<section class="emaki-custom-block emaki-custom-note"><div class="emaki-custom note" id="custom_block_7"><p><strong>需求</strong>:你需要一个与AOSP导航条定制器兼容的设备。参见本线程中的<a href="https://forum.xda-developers.com/android/apps-games/app-custom-navigation-bar-customize-t3590967">的“兼容性”部分。(注意:您的设备OEM或类型可能未在该主题中列出。确定你的设备是否兼容的唯一方法是试用，我们将在下面告诉你怎么做。</a></p> </div></section>
<p>有两种方法可以修改我们的导航条。一种是通过应用程序，另一种是通过ADB shell命令(这是应用程序的工作方式)。为了完整起见，我们将向您展示这两个图标，但请注意，到目前为止，您不能通过应用程序修改股票导航条图标，直到开发人员更新其应用程序以包含该功能。</p>

<p>我们需要做的第一件事是确保你可以修改你设备上的导航条。如果你的设备是在<a href="https://forum.xda-developers.com/android/apps-games/app-custom-navigation-bar-customize-t3590967/">自定义导航栏线程</a>中列出的兼容设备之一，那么它很有可能是兼容的。我们可以通过运行这个应用程序附带的简短教程来验证。</p>

<p>从谷歌Play商店安装应用<a href="https://play.google.com/store/apps/details?id=xyz.paphonb.systemuituner">(同时</a><a href="https://play.google.com/apps/testing/xyz.paphonb.systemuituner">注册beta测试</a>，这样我们就可以使用它的实验功能在以后重新安排导航条)。接下来，打开应用程序，继续浏览介绍性屏幕。自定义导航栏将要求您授予它一个名为WRITE_SECURE_SETTINGS的特定权限，以便继续使用该应用程序。有两种方法可以做到这一点，如申请中所述。</p>

<ol> <li>如果你有一个根设备，在你的手机上打开<a href="https://play.google.com/store/apps/details?id=jackpal.androidterm">终端模拟器</a>，通过键入<code>su</code>授予它根访问权限。然后，输入这个命令:<code>pm grant xyz.paphonb.systemuituner android.permission.WRITE_SECURE_SETTINGS</code></li> <li>如果您的设备不是根设备，那么您需要通过ADB授予许可。在机器上打开命令提示符/终端，然后输入以下命令:<code>adb shell pm grant xyz.paphonb.systemuituner android.permission.WRITE_SECURE_SETTINGS</code></li> </ol>

<p>一旦你通过上述两种方法中的任何一种授予应用程序此权限，那么应用程序将继续进行兼容性测试。如果你的导航条没有变化，那么你很不幸的不走运。如果你的导航条变成显示一个右箭头按钮，那么恭喜你的设备是受支持的！我们现在可以继续修改我们的导航栏。</p>





<hr/>
<p class="ad-odd"> </p>


<h2 id="re-arranging-the-nav-bar-buttons">重新排列导航栏按钮</h2>
<h3 id="app-method">App方法</h3>
<p>现在你已经设置了应用程序，重新排列导航条按钮非常非常容易。你必须在自定义导航栏应用程序的测试版上才能做到这一点，所以在继续之前，请返回并确保你在测试频道上。</p>

<p>如果你是测试版，你会在主设置部分看到一个叫做<strong>实验调整</strong>的部分。点击它，你会看到允许你替换现有的back、home和recent键的选项。通过将后退按钮更改为概览(最近)按钮，并将概览(最近)按钮更改为后退按钮，您可以在这里轻松地重新排列您的键。或者以你想要的任何方式改变它们，这里没有真正的限制。交换按键后，您还可以在导航栏设置菜单中使用布局选项。</p>





<h3 id="adb-method">亚行方法</h3>
<p>如果你愿意的话，下面是如何使用ADB命令来做同样的事情。我们将要修改的命令是名为sysui_nav_bar的安全设置首选项。这个首选项是一个包含导航条布局的字符串。首选项的默认结构如下</p>

<pre> <code class="hljs ">space,back;home;recent,space</code> </pre>
<p>其中space表示将导航条键彼此分开的空白区域，back、home和recent表示导航条中的3个默认按钮。例如，如果我们想交换back和recent键，我们需要如下修改字符串</p>

<pre> <code class="hljs ">space,recent;home;back,space</code> </pre>
<section class="emaki-custom-block emaki-custom-note"><div class="emaki-custom note" id="custom_block_25"><p>注:如果您试图从根shell环境(如电话上的终端仿真器)输入以下任何命令，则您需要在发送命令之前省略“adb shell”。</p> </div></section>
<p>现在，为了实际修改这个字符串，我们需要使用ADB shell命令，语法如下</p>

<pre> <code class="hljs javascript">adb shell settings put secure sysui_nav_bar <span class="hljs-string">"STRING"</span></code> </pre>
<p>因此，我们发送的交换最近键和后退键的命令如下所示</p>

<pre> <code class="hljs javascript">adb shell settings put secure sysui_nav_bar <span class="hljs-string">"space,recent;home;back,space"</span></code> </pre>
<p>正如您可能猜到的，这是相当灵活的。我们可以通过修改首选项的字符串值来随意移动这些键。例如，我们可以通过改变两个空格的位置来使翻转的导航条键左对齐或右对齐:</p>

<p>左对齐:</p>

<pre> <code class="hljs javascript">adb shell settings put secure sysui_nav_bar <span class="hljs-string">"recent;home;back,space,space"</span></code> </pre>
<p>右对齐:</p>

<pre> <code class="hljs javascript">adb shell settings put secure sysui_nav_bar <span class="hljs-string">"space,space,recent;home;back"</span></code> </pre>
<p>但是我们也可以改变导航条按钮，使之与标准的后退、主页或最近键完全不同，比如发送众多<a href="https://developer.android.com/reference/android/view/KeyEvent.html">按键事件</a>中的一个。我们将在下一节利用这一点，向您展示如何更改导航栏按钮上的图标。</p>

<hr/>
<p class="ad-even"> </p>


<h2 id="custom-nav-bar-icons">自定义导航栏图标</h2>
<p>现在，以下部分可能看起来没什么大不了的，因为在Play Store上有<a href="https://play.google.com/store/apps/details?id=pl.damianpiwowarski.navbarapps">众多</a> <a href="https://play.google.com/store/apps/details?id=com.axndx.prithvee.pixelnavbar">应用</a> <a href="https://play.google.com/store/apps/details?id=com.dunrite.pixbar">承诺改变你没有根的导航栏。它们确实有效——然而，许多用户报告说，在Chrome等特定应用中，当播放全屏视频或一些游戏时，这些应用存在问题。此外，这些应用程序中有许多要求你启用辅助功能服务来监控应用程序，以知道何时重新着色导航条，这</a><a href="https://www.xda-developers.com/working-as-intended-an-exploration-into-androids-accessibility-lag/">可能会降低性能</a>。最后，如果你依赖这些应用太久，那么当Android O推出时，你可能会突然惊讶地看到它们停止工作，因为下一个Android版本是<a href="https://www.xda-developers.com/android-o-is-breaking-apps-that-overlay-on-top-of-the-status-bar/">杀死这些应用</a>在系统UI元素上绘图的能力。</p>

<p>我们正在使用的方法是基于谷歌的导航栏调谐器的实现，所以它没有这些问题。然而，目前有一个问题我们想提前说明:如果你选择按照这种方法来修改你的home键，那么<strong>长按home键动作将不再工作</strong>意味着你不能再从home键快速访问谷歌助手。如果你不介意的话，下面是如何改变导航条上的图标。</p>

<p>你需要做的第一件事是下载你想要替换默认导航条按键图标的图标。我会为你提供下载链接来抓取谷歌Pixel导航条图标，但是如果你想要其他的图标，你可以自己去找。你将需要PNG格式的图标，至于大小，你可以通过在Material.io 上查找你的<a href="https://material.io/devices/">设备的显示密度指标并将其与</a><a href="http://iconhandbook.co.uk/reference/chart/android/">图标大小参考图表</a>相关联来确定你需要的图标大小。</p>

<p>提取这些谷歌像素导航条图标的功劳归于XDA资深会员<a href="https://forum.xda-developers.com/member.php?u=7692227"> dariomrk </a>。如果你有1920x1080p的显示器，请下载<a href="https://www.androidfilehost.com/?fid=457095661767155130">这个档案；如果你有2560x1440p的显示器，请下载</a><a href="https://www.androidfilehost.com/?fid=457095661767155131">这个档案。将任一zip文件的内容提取到存储根目录下名为“NavIcons”的文件夹中。</a></p>

<p>将图标放在适当的位置后，输入以下ADB shell命令(警告，它很长):</p>

<pre> <code class="hljs javascript">adb shell settings put secure sysui_nav_bar <span class="hljs-string">"space,key(4:file:///storage/emulated/0/NavIcons/back.png);key(3:file:///storage/emulated/0/NavIcons/home.png);key(187:file:///storage/emulated/0/NavIcons/recents.png),space"</span></code> </pre>
<p>该命令的作用是用具有相同功能的KeyEvents替换back、home和recent键。具体来说，back换成<a href="https://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_BACK"> KEYCODE_BACK </a>，home换成<a href="https://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_HOME"> KEYCODE_HOME </a>，recent换成<a href="https://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_APP_SWITCH"> KEYCODE_APP_SWITCH </a>。这些按键代码执行完全相同的功能，但是因为我们使用了KeyEvents，所以我们可以指定我们想要为它们使用什么图标。在本例中，我们指向在/NavIcons中保存的back.png、home.png和recents.png。</p>

<p>然而，通过用KeyEvents替换stock键，我们失去了长按home键的能力，因为目前没有办法识别模拟键输入的长按事件。</p>

<p>我意识到，现在，这种方法可能看起来不理想或不容易实现，但在撰写本文时，自定义导航栏应用程序尚未更新，以支持添加您自己的图标。目前，我的方法(这正是该应用程序的工作方式，当该应用程序更新时，它将面临同样的限制)是如何在你的导航栏上获得任何你想要的自定义图标。</p>

<hr/>

<p>本教程到此为止。在未来的教程中，我将展示改变你的导航条的潜在的实际用途，特别是在使用自动化应用程序如Tasker的情况下。关注XDA 上的<a href="https://www.xda-developers.com/category/tutorials/">教程类别，了解我们发布的所有最新提示和技巧。</a></p>

 </div>


</div>    
</body>
</html>