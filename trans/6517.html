<html>
<head>
<title>Bubbles in Android Q will replace the overlay API in a future Android version</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Android Q中的气泡将在未来的Android版本中取代覆盖API</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/android-q-system-alert-window-deprecate-bubbles/#0001-01-01">https://www.xda-developers.com/android-q-system-alert-window-deprecate-bubbles/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>谷歌的年度I/O开发者大会充斥着关于谷歌所有应用、服务和开发者工具的新闻，但Android操作系统是最大的话题之一。Android现在在全球超过25亿台设备上使用，占据了谷歌I/O的大量时间。该平台有很多变化——事实上，如此之多，以至于谷歌不可能对每个变化都给予同等的关注。在2019年I/O第一天的“Android的新功能”演讲中，谷歌宣布了一个非常古老的API即将发生的重大变化:<a href="https://developer.android.com/reference/android/Manifest.permission.html#SYSTEM_ALERT_WINDOW"> SYSTEM_ALERT_WINDOW </a>。该API允许开发人员在屏幕顶部绘制一个覆盖图，其最著名的用途是聊天头部气泡(想想Facebook Messenger)。既然谷歌在Android Q 中以<a href="https://www.xda-developers.com/android-q-beta-2-notification-bubbles/">气泡的形式提供了SYSTEM_ALERT_WINDOW的替代API，谷歌已经决定最终在未来的Android版本中弃用SYSTEM_ALERT_WINDOW。</a></p>

  
<p>SYSTEM_ALERT_WINDOW即将被弃用，这是板上钉钉的事情。允许一个应用程序在其他应用程序上覆盖窗口会带来明显的安全风险；臭名昭著的“<a href="https://www.xda-developers.com/cloak-and-dagger-exploit-uses-overlays-and-accessibility-services-to-hijack-the-system/">斗篷和匕首</a>”漏洞证明SYSTEM_ALERT_WINDOW需要被控制。</p>

 
<p class="w-rich w-youtube" id="NceNhsu87iA">  </p>


<p>谷歌开始限制Android Oreo中覆盖图可以后退的区域，他们已经完全删除了Android Q (Go Edition)的API。)SYSTEM_ALERT_WINDOW的最大问题是，尽管用户应该通过特殊的权限管理屏幕手动授予权限，但谷歌Play商店会在安装时自动授予访问权限。在Android Q中，对SYSTEM_ALERT_WINDOW权限<a href="https://www.androidpolice.com/2019/03/16/android-q-steps-up-the-fight-up-against-overlay-based-malware/">的访问是短暂的</a>:侧装应用只能在30秒内访问该权限，通过Google Play安装的应用可以访问该权限，直到设备重新启动。</p>

<p>但在未来的Android版本中，SYSTEM_ALERT_WINDOW将被完全否决，所有使用它的Android应用程序都必须过渡到Android Q beta 2中引入的新的<a href="https://developer.android.com/preview/features/bubbles"> Bubbles API </a>。</p>
<div class="body-img portrait"><div class="responsive-img image-expandable img-article-item-portrait" data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/05/bubbles-screenshot.png" data-modal-id="single-image-modal" data-modal-container-id="single-image-modal-container" data-img-caption="&quot;Bubbles API in Android Q. Source: Google.&quot;">
 
<figure> <picture>  <source media="(min-width: 1024px)" sizes="750px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/05/bubbles-screenshot.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 768px)" sizes="750px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/05/bubbles-screenshot.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 481px)" sizes="600px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/05/bubbles-screenshot.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <source media="(min-width: 0px)" sizes="360px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/05/bubbles-screenshot.png?q=50&amp;fit=crop&amp;dpr=1.5"/> <img class="lazyload" alt="Demonstration of the Bubbles API in Android Q (Android 10)." data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/05/bubbles-screenshot.png" src="../Images/f12869cfa36ae3a56bb9d5651d84c4ec.png" data-original-src="https://static1.xdaimages.com/wordpress/wp-content/uploads/2019/05/bubbles-screenshot.png"/> </picture> <figcaption class="body-img-caption">Bubbles API in Android Q. Source: Google.</figcaption> </figure> </div>


 </div>


<p>然而，气泡是通知API的一部分，所以它不能完全取代SYSTEM_ALERT_WINDOW。尽管气泡以微小的、可调整大小的活动的形式出现，但它们必须由用户从满足一个或多个条件的通知中发出。</p>

 
<p class="w-rich w-youtube" id="OMXv56kvgNQ">  </p>


<p>使用SYSTEM_ALERT_WINDOW API的应用程序开发者有很多，在不久的将来，他们将不得不开始寻找替代的Bubbles API。我们试图得到一个时间表，谷歌何时计划放弃这个API，但没有得到答案。假设这个API不会存在太久:我敢打赌它将不再出现在Android R中。</p>

<p>你可以通过下面的YouTube链接观看整个“Android中的新功能”会议(从16:53开始。)</p>

 
<p class="w-rich w-youtube" id="l1e1gHhci70">  </p>

</div>


</div>    
</body>
</html>